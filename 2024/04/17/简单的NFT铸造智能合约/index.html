<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ivan53471.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="代码以下将展示一个简单的 NFT 铸造智能合约 (忽略交易相关的函数)">
<meta property="og:type" content="article">
<meta property="og:title" content="简单的NFT铸造智能合约">
<meta property="og:url" content="https://ivan53471.github.io/2024/04/17/%E7%AE%80%E5%8D%95%E7%9A%84NFT%E9%93%B8%E9%80%A0%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/index.html">
<meta property="og:site_name" content="黄梓铭 (Ivan Wong)">
<meta property="og:description" content="代码以下将展示一个简单的 NFT 铸造智能合约 (忽略交易相关的函数)">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-17T03:30:19.000Z">
<meta property="article:modified_time" content="2024-05-26T07:50:36.530Z">
<meta property="article:author" content="黄梓铭">
<meta property="article:tag" content="C&#x2F;C++, C#, Go, 算法, 游戏">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ivan53471.github.io/2024/04/17/%E7%AE%80%E5%8D%95%E7%9A%84NFT%E9%93%B8%E9%80%A0%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>简单的NFT铸造智能合约 | 黄梓铭 (Ivan Wong)</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">黄梓铭 (Ivan Wong)</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">9</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">11</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ivan53471.github.io/2024/04/17/%E7%AE%80%E5%8D%95%E7%9A%84NFT%E9%93%B8%E9%80%A0%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/MyPhoto.jpg">
      <meta itemprop="name" content="黄梓铭">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黄梓铭 (Ivan Wong)">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          简单的NFT铸造智能合约
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-04-17 11:30:19" itemprop="dateCreated datePublished" datetime="2024-04-17T11:30:19+08:00">2024-04-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-26 15:50:36" itemprop="dateModified" datetime="2024-05-26T15:50:36+08:00">2024-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A7%91%E7%A0%94/" itemprop="url" rel="index"><span itemprop="name">科研</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>37k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>34 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3><span id="代码">代码</span></h3><p>以下将展示一个简单的 NFT 铸造智能合约 (忽略交易相关的函数)</p>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity &gt;=0.8.0;</span><br><span class="line"></span><br><span class="line">// ERC 165 标准接口</span><br><span class="line">interface IERC165 &#123;&#125;</span><br><span class="line"></span><br><span class="line">// ERC 721 标准接口</span><br><span class="line">interface IERC721 is IERC165 &#123;</span><br><span class="line">    function balanceOf(address owner) external view returns (uint balance);</span><br><span class="line"></span><br><span class="line">    function ownerOfTokenId(uint tokenId) external view returns (address owner);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract ERC721 is IERC721 &#123;</span><br><span class="line">    </span><br><span class="line">    using Address for address;</span><br><span class="line"></span><br><span class="line">    // Mapping from token ID to owner address</span><br><span class="line">    mapping(uint =&gt; address) private _owners;</span><br><span class="line"></span><br><span class="line">    // Mapping owner address to token count</span><br><span class="line">    mapping(address =&gt; uint) private _balances;</span><br><span class="line"></span><br><span class="line">    // Mapping from tokenId to picture URL</span><br><span class="line">    mapping(uint256 =&gt; string) private _tokenURLs;</span><br><span class="line"></span><br><span class="line">    // Mapping from URL to token ID</span><br><span class="line">    mapping(string =&gt; uint256) private _urlToTokenId;</span><br><span class="line"></span><br><span class="line">    // Mapping from address to array of owned token IDs</span><br><span class="line">    mapping(address =&gt; uint256[]) private _ownedTokens;</span><br><span class="line"></span><br><span class="line">    // Mapping from address to array of owned URLs</span><br><span class="line">    mapping(address =&gt; string[]) private _ownedURLs;</span><br><span class="line"></span><br><span class="line">    // Mapping from URL to transaction hash</span><br><span class="line">    mapping(string =&gt; bytes32) public tokenHashes;</span><br><span class="line"></span><br><span class="line">    // Array to store all token IDs</span><br><span class="line">    uint256[] private _allTokenIds;</span><br><span class="line"></span><br><span class="line">    // Mapping from token Id to index in _allTokenIds array</span><br><span class="line">    mapping(uint256 =&gt; uint256) private _allTokenIdsIndex;</span><br><span class="line">    </span><br><span class="line">    // Event triggered when setting token URL</span><br><span class="line">    event TokenURLSet(uint256 indexed tokenId, string url);</span><br><span class="line"></span><br><span class="line">    // Private function _mint to mint NFTs by address and tokenId</span><br><span class="line">    function _mint(address to, uint tokenId) private &#123;</span><br><span class="line">        require(to != address(0), &quot;mint to zero address&quot;);</span><br><span class="line">        require(_owners[tokenId] == address(0), &quot;token already minted&quot;);</span><br><span class="line"></span><br><span class="line">        _balances[to] += 1;</span><br><span class="line">        _owners[tokenId] = to;</span><br><span class="line"></span><br><span class="line">        // Add tokenId to _allTokenIds array</span><br><span class="line">        _allTokenIds.push(tokenId);</span><br><span class="line">        _allTokenIdsIndex[tokenId] = _allTokenIds.length - 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Internal function to set token URL</span><br><span class="line">    function _setTokenURL(uint256 tokenId, string memory tokenURI) internal &#123;</span><br><span class="line">        require(_exists(tokenId), &quot;URL set of nonexistent token&quot;);</span><br><span class="line">        _tokenURLs[tokenId] = tokenURI;</span><br><span class="line">        emit TokenURLSet(tokenId, tokenURI);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Function to mint NFTs by address and picture URL</span><br><span class="line">    function mint(address to, string memory tokenURI) public &#123;</span><br><span class="line">        bytes32 hash = keccak256(abi.encodePacked(tokenURI));</span><br><span class="line">        uint256 newTokenId = uint256(hash);</span><br><span class="line"></span><br><span class="line">        _mint(to, newTokenId);</span><br><span class="line"></span><br><span class="line">        _setTokenURL(newTokenId, tokenURI);</span><br><span class="line">        _urlToTokenId[tokenURI] = newTokenId;</span><br><span class="line">        _ownedTokens[to].push(newTokenId);</span><br><span class="line">        _ownedURLs[to].push(tokenURI);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Function to get token URL by tokenId</span><br><span class="line">    function getURLbyTokenId(uint256 tokenId) public view returns (string memory) &#123;</span><br><span class="line">        require(_exists(tokenId), &quot;URL query for nonexistent token&quot;);</span><br><span class="line">        return _tokenURLs[tokenId];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get tokenId by URL</span><br><span class="line">    function getTokenIdbyURL(string memory tokenURI) public view returns (uint256) &#123;</span><br><span class="line">        uint256 tokenId = _urlToTokenId[tokenURI];</span><br><span class="line">        require(_exists(tokenId), &quot;Token with this URL does not exist&quot;);</span><br><span class="line"></span><br><span class="line">        return tokenId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to burn NFTs</span><br><span class="line">    function burn(uint256 tokenId) external &#123;</span><br><span class="line">        address owner = ownerOfTokenId(tokenId);</span><br><span class="line">        require(msg.sender == owner, &quot;not owner of token&quot;);</span><br><span class="line"></span><br><span class="line">        _balances[owner] -= 1;</span><br><span class="line">        delete _owners[tokenId];</span><br><span class="line"></span><br><span class="line">        string memory tokenURL = _tokenURLs[tokenId];</span><br><span class="line">        delete _tokenURLs[tokenId];</span><br><span class="line">        delete _urlToTokenId[tokenURL];</span><br><span class="line"></span><br><span class="line">        uint256[] storage ownedTokens = _ownedTokens[owner];</span><br><span class="line">        for (uint256 i = 0; i &lt; ownedTokens.length; i++) &#123;</span><br><span class="line">            if (ownedTokens[i] == tokenId) &#123;</span><br><span class="line">                ownedTokens[i] = ownedTokens[ownedTokens.length - 1];</span><br><span class="line">                ownedTokens.pop();</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string[] storage ownedURLs = _ownedURLs[owner];</span><br><span class="line">        for (uint256 i = 0; i &lt; ownedURLs.length; i++) &#123;</span><br><span class="line">            if (keccak256(abi.encodePacked(ownedURLs[i])) == keccak256(abi.encodePacked(tokenURL))) &#123;</span><br><span class="line">                ownedURLs[i] = ownedURLs[ownedURLs.length - 1];</span><br><span class="line">                ownedURLs.pop();</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Remove tokenId from _allTokenIds array</span><br><span class="line">        uint256 indexToRemove = _allTokenIdsIndex[tokenId];</span><br><span class="line">        uint256 lastIndex = _allTokenIds.length - 1;</span><br><span class="line">        uint256 lastTokenId = _allTokenIds[lastIndex];</span><br><span class="line">        _allTokenIds[indexToRemove] = lastTokenId;</span><br><span class="line">        _allTokenIdsIndex[lastTokenId] = indexToRemove;</span><br><span class="line">        _allTokenIds.pop();</span><br><span class="line">        delete _allTokenIdsIndex[tokenId];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Private function to check if token exists</span><br><span class="line">    function _exists(uint256 tokenId) private view returns (bool) &#123;</span><br><span class="line">        return _owners[tokenId] != address(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get the total count of tokens owned by owner</span><br><span class="line">    function balanceOf(address owner) external view override returns (uint) &#123;</span><br><span class="line">        require(owner != address(0), &quot;owner = zero address&quot;);</span><br><span class="line">        return _balances[owner];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to determine owner by tokenId</span><br><span class="line">    function ownerOfTokenId(uint tokenId) public view override returns (address owner) &#123;</span><br><span class="line">        owner = _owners[tokenId];</span><br><span class="line">        require(owner != address(0), &quot;token doesn&#x27;t exist&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to determine owner by URL</span><br><span class="line">    function ownerOfURL(string memory tokenURI) public view returns (address) &#123;</span><br><span class="line">        uint256 token_Id = _urlToTokenId[tokenURI];</span><br><span class="line">        require(_exists(token_Id), &quot;Token with this URL does not exist&quot;);</span><br><span class="line"></span><br><span class="line">        return _owners[token_Id];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all token IDs owned by specified owner</span><br><span class="line">    function getOwnedTokenIds(address owner) public view returns (uint256[] memory) &#123;</span><br><span class="line">        require(owner != address(0), &quot;owner = zero address&quot;);</span><br><span class="line">        return _ownedTokens[owner];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all URLs owned by specified owner</span><br><span class="line">    function getOwnedURLs(address owner) public view returns (string[] memory) &#123;</span><br><span class="line">        require(owner != address(0), &quot;owner = zero address&quot;);</span><br><span class="line">        return _ownedURLs[owner];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all token IDs owned by current owner</span><br><span class="line">    function getMyTokenIds() public view returns (uint256[] memory) &#123;</span><br><span class="line">        return _ownedTokens[msg.sender];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all URLs owned by current owner</span><br><span class="line">    function getMyURLs() public view returns (string[] memory) &#123;</span><br><span class="line">        return _ownedURLs[msg.sender];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all token IDs</span><br><span class="line">    function getAllTokenIds() public view returns (uint256[] memory) &#123;</span><br><span class="line">        return _allTokenIds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all URLs</span><br><span class="line">    function getAllURLs() public view returns (string[] memory) &#123;</span><br><span class="line">        string[] memory urls = new string[](_allTokenIds.length);</span><br><span class="line">        for (uint256 i = 0; i &lt; _allTokenIds.length; i++) &#123;</span><br><span class="line">            uint256 tokenId = _allTokenIds[i];</span><br><span class="line">            urls[i] = _tokenURLs[tokenId];</span><br><span class="line">        &#125;</span><br><span class="line">        return urls;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to set transaction hash</span><br><span class="line">    // use when the front end receive the event that the nft is minted</span><br><span class="line">    function setTransactionHash(string memory tokenURI, bytes32 txhash) public &#123;</span><br><span class="line">        tokenHashes[tokenURI] = txhash;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get transaction hash</span><br><span class="line">    function getTransactionHash(string memory tokenURI) public view returns (bytes32) &#123;</span><br><span class="line">        return tokenHashes[tokenURI];</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Library to check if address is a contract address</span><br><span class="line">library Address &#123;</span><br><span class="line">    function isContract(address account) internal view returns (bool) &#123;</span><br><span class="line">        uint size;</span><br><span class="line">        assembly &#123;</span><br><span class="line">            size := extcodesize(account)</span><br><span class="line">        &#125;</span><br><span class="line">        return size &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>以下是对一些接口的解释</p>
<ol>
<li>mint</li>
</ol>
<ul>
<li>所需参数: 拥有者地址to，数据URL</li>
<li>实现功能: 铸造一个新的代币，将新代币分配给地址 <code>to</code>，并使用 <code>tokenURI</code> 作为代币的元数据</li>
</ul>
<ol start="2">
<li>burn</li>
</ol>
<ul>
<li>所需参数: 代币tokenId</li>
<li>实现功能: 允许代币的拥有者销毁一个代币。销毁后，代币将从拥有者的余额中移除。</li>
</ul>
<ol start="3">
<li>balanceOf</li>
</ol>
<ul>
<li>所需参数: 地址<code>address owner</code></li>
<li>实现功能: 返回指定地址 <code>owner</code> 拥有的代币数量。</li>
</ul>
<ol start="4">
<li>getOwnedTokenIds</li>
</ol>
<ul>
<li>所需参数: 地址<code>address owner</code></li>
<li>实现功能: 返回一个数组，包含指定地址 <code>owner</code> 拥有的所有代币的 <code>tokenId</code>。</li>
</ul>
<ol start="5">
<li>getOwnedURLs</li>
</ol>
<ul>
<li>所需参数: 地址<code>address owner</code></li>
<li>实现功能: 返回一个数组，包含与指定地址 <code>owner</code> 拥有的代币相关联的所有 <code>tokenURL</code>。</li>
</ul>
<ol start="6">
<li>getTokenIdByUrl</li>
</ol>
<ul>
<li>所需参数: 图片的 <code>tokenURI</code></li>
<li>实现功能: 根据提供的 <code>tokenURI</code> 返回对应的 <code>tokenId</code>。如果不存在具有该 <code>tokenURI</code> 的代币，则抛出错误。</li>
</ul>
<ol start="7">
<li>getURLbyTokenId</li>
</ol>
<ul>
<li>所需参数: 代币的tokenId<code>uint256 tokenId</code></li>
<li>实现功能: 根据提供的 <code>tokenId</code> 返回对应的 <code>tokenURI</code>。如果不存在具有该 <code>tokenId</code> 的代币，则抛出错误。</li>
</ul>
<ol start="8">
<li>OwnerOfTokenId</li>
</ol>
<ul>
<li>所需参数: 代币的tokenId<code>uint tokenId</code></li>
<li>实现功能: 返回拥有指定 <code>tokenId</code> 的代币的地址。如果代币不存在，则抛出错误。</li>
</ul>
<ol start="9">
<li>OwnerOfURL</li>
</ol>
<ul>
<li>所需参数: 图片的 <code>tokenURI</code></li>
<li>实现功能: 根据提供的 <code>tokenURI</code> 返回拥有该 <code>tokenURI</code> 的代币的地址。如果代币不存在，则抛出错误。</li>
</ul>
<h3><span id="abi-和-bytecode">abi 和 bytecode</span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var abi = JSON.parse(&#x27;[&#123;\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[&#123;\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;,&#123;\&quot;indexed\&quot;:false,\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;url\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;TokenURLSet\&quot;,\&quot;type\&quot;:\&quot;event\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;name\&quot;:\&quot;balanceOf\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;burn\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getAllTokenIds\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getAllURLs\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getMyTokenIds\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getMyURLs\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;name\&quot;:\&quot;getOwnedTokenIds\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;name\&quot;:\&quot;getOwnedURLs\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;getTokenIdbyURL\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;getTransactionHash\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;getURLbyTokenId\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;,&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;mint\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;ownerOfTokenId\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;ownerOfURL\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;,&#123;\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;txhash\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;&#125;],\&quot;name\&quot;:\&quot;setTransactionHash\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;tokenHashes\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;]&#x27;)</span><br><span class="line"></span><br><span class="line">var code = &quot;0x&quot; +  &quot;608060405234801561001057600080fd5b506127c1806100206000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c80636dffece4116100975780637ba0ca0d116100665780637ba0ca0d1461030d578063bdbed7221461032b578063d0def52114610349578063ffd448571461036557610100565b80636dffece41461025f5780636f8867041461028f57806370a08231146102ad578063785fc822146102dd57610100565b806342966c68116100d357806342966c68146101b35780634fac7e41146101cf5780635d46fa18146101ff57806368564b121461022f57610100565b8063105e18a81461010557806312e8ac061461013557806327030bec146101655780633fc3097414610183575b600080fd5b61011f600480360381019061011a91906117b0565b610381565b60405161012c919061192f565b60405180910390f35b61014f600480360381019061014a9190611987565b610508565b60405161015c91906119c3565b60405180910390f35b61016d6105b3565b60405161017a919061192f565b60405180910390f35b61019d60048036038101906101989190611987565b6106c9565b6040516101aa9190611a28565b60405180910390f35b6101cd60048036038101906101c89190611987565b6107b6565b005b6101e960048036038101906101e491906117b0565b610cd7565b6040516101f69190611b08565b60405180910390f35b61021960048036038101906102149190611c5f565b610ddd565b6040516102269190611cc1565b60405180910390f35b61024960048036038101906102449190611c5f565b610e05565b6040516102569190611ceb565b60405180910390f35b61027960048036038101906102749190611c5f565b610e7a565b60405161028691906119c3565b60405180910390f35b610297610f21565b6040516102a4919061192f565b60405180910390f35b6102c760048036038101906102c291906117b0565b611083565b6040516102d49190611ceb565b60405180910390f35b6102f760048036038101906102f29190611c5f565b61113a565b6040516103049190611cc1565b60405180910390f35b610315611168565b6040516103229190611b08565b60405180910390f35b6103336111fd565b6040516103409190611b08565b60405180910390f35b610363600480360381019061035e9190611d06565b611255565b005b61037f600480360381019061037a9190611d8e565b61139d565b005b6060600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036103f2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103e990611e36565b60405180910390fd5b600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b828210156104fd57838290600052602060002001805461047090611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461049c90611e85565b80156104e95780601f106104be576101008083540402835291602001916104e9565b820191906000526020600020905b8154815290600101906020018083116104cc57829003601f168201915b505050505081526020019060010190610451565b505050509050919050565b600080600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105ae576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105a590611f02565b60405180910390fd5b919050565b6060600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b828210156106c057838290600052602060002001805461063390611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461065f90611e85565b80156106ac5780601f10610681576101008083540402835291602001916106ac565b820191906000526020600020905b81548152906001019060200180831161068f57829003601f168201915b505050505081526020019060010190610614565b50505050905090565b60606106d4826113c4565b610713576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161070a90611f6e565b60405180910390fd5b60026000838152602001908152602001600020805461073190611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461075d90611e85565b80156107aa5780601f1061077f576101008083540402835291602001916107aa565b820191906000526020600020905b81548152906001019060200180831161078d57829003601f168201915b50505050509050919050565b60006107c182610508565b90508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610831576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082890611fda565b60405180910390fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546108809190612029565b9250508190555060008083815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560006002600084815260200190815260200160002080546108dc90611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461090890611e85565b80156109555780601f1061092a57610100808354040283529160200191610955565b820191906000526020600020905b81548152906001019060200180831161093857829003601f168201915b5050505050905060026000848152602001908152602001600020600061097b91906116e1565b60038160405161098b9190612099565b9081526020016040518091039020600090556000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905060005b8180549050811015610aa15784828281548110610a0357610a026120b0565b5b906000526020600020015403610a8e578160018380549050610a259190612029565b81548110610a3657610a356120b0565b5b9060005260206000200154828281548110610a5457610a536120b0565b5b906000526020600020018190555081805480610a7357610a726120df565b5b60019003818190600052602060002001600090559055610aa1565b8080610a999061210e565b9150506109e3565b506000600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905060005b8180549050811015610c015783604051602001610b059190612099565b60405160208183030381529060405280519060200120828281548110610b2e57610b2d6120b0565b5b90600052602060002001604051602001610b4891906121ee565b6040516020818303038152906040528051906020012003610bee578160018380549050610b759190612029565b81548110610b8657610b856120b0565b5b90600052602060002001828281548110610ba357610ba26120b0565b5b906000526020600020019081610bb991906123c7565b5081805480610bcb57610bca6120df565b5b600190038181906000526020600020016000610be791906116e1565b9055610c01565b8080610bf99061210e565b915050610ae8565b5060006008600087815260200190815260200160002054905060006001600780549050610c2e9190612029565b9050600060078281548110610c4657610c456120b0565b5b906000526020600020015490508060078481548110610c6857610c676120b0565b5b90600052602060002001819055508260086000838152602001908152602001600020819055506007805480610ca057610c9f6120df565b5b6001900381819060005260206000200160009055905560086000898152602001908152602001600020600090555050505050505050565b6060600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610d48576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3f90611e36565b60405180910390fd5b600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020018280548015610dd157602002820191906000526020600020905b815481526020019060010190808311610dbd575b50505050509050919050565b6000600682604051610def9190612099565b9081526020016040518091039020549050919050565b600080600383604051610e189190612099565b9081526020016040518091039020549050610e32816113c4565b610e71576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e6890612521565b60405180910390fd5b80915050919050565b600080600383604051610e8d9190612099565b9081526020016040518091039020549050610ea7816113c4565b610ee6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610edd90612521565b60405180910390fd5b60008082815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16915050919050565b6060600060078054905067ffffffffffffffff811115610f4457610f43611b34565b5b604051908082528060200260200182016040528015610f7757816020015b6060815260200190600190039081610f625790505b50905060005b60078054905081101561107b57600060078281548110610fa057610f9f6120b0565b5b90600052602060002001549050600260008281526020019081526020016000208054610fcb90611e85565b80601f0160208091040260200160405190810160405280929190818152602001828054610ff790611e85565b80156110445780601f1061101957610100808354040283529160200191611044565b820191906000526020600020905b81548152906001019060200180831161102757829003601f168201915b505050505083838151811061105c5761105b6120b0565b5b60200260200101819052505080806110739061210e565b915050610f7d565b508091505090565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036110f3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ea90611e36565b60405180910390fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6006818051602081018201805184825260208301602085012081835280955050505050506000915090505481565b6060600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054806020026020016040519081016040528092919081815260200182805480156111f357602002820191906000526020600020905b8154815260200190600101908083116111df575b5050505050905090565b6060600780548060200260200160405190810160405280929190818152602001828054801561124b57602002820191906000526020600020905b815481526020019060010190808311611237575b5050505050905090565b6000816040516020016112689190612099565b60405160208183030381529060405280519060200120905060008160001c9050611292848261142f565b61129c818461163c565b806003846040516112ad9190612099565b908152602001604051809103902081905550600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819080600181540180825580915050600190039060005260206000200160009091909190915055600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020839080600181540180825580915050600190039060005260206000200160009091909190915090816113969190612541565b5050505050565b806006836040516113ae9190612099565b9081526020016040518091039020819055505050565b60008073ffffffffffffffffffffffffffffffffffffffff1660008084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361149e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114959061265f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff1660008083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461153f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611536906126cb565b60405180910390fd5b60018060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461158e91906126eb565b925050819055508160008083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600781908060018154018082558091505060019003906000526020600020016000909190919091505560016007805490506116219190612029565b60086000838152602001908152602001600020819055505050565b611645826113c4565b611684576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161167b9061276b565b60405180910390fd5b806002600084815260200190815260200160002090816116a49190612541565b50817f9f29759901a481b6bf52ac6c03ccf75f53edec21c990efc5d3828daf7f93f13b826040516116d59190611a28565b60405180910390a25050565b5080546116ed90611e85565b6000825580601f106116ff575061171e565b601f01602090049060005260206000209081019061171d9190611721565b5b50565b5b8082111561173a576000816000905550600101611722565b5090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061177d82611752565b9050919050565b61178d81611772565b811461179857600080fd5b50565b6000813590506117aa81611784565b92915050565b6000602082840312156117c6576117c5611748565b5b60006117d48482850161179b565b91505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611843578082015181840152602081019050611828565b60008484015250505050565b6000601f19601f8301169050919050565b600061186b82611809565b6118758185611814565b9350611885818560208601611825565b61188e8161184f565b840191505092915050565b60006118a58383611860565b905092915050565b6000602082019050919050565b60006118c5826117dd565b6118cf81856117e8565b9350836020820285016118e1856117f9565b8060005b8581101561191d57848403895281516118fe8582611899565b9450611909836118ad565b925060208a019950506001810190506118e5565b50829750879550505050505092915050565b6000602082019050818103600083015261194981846118ba565b905092915050565b6000819050919050565b61196481611951565b811461196f57600080fd5b50565b6000813590506119818161195b565b92915050565b60006020828403121561199d5761199c611748565b5b60006119ab84828501611972565b91505092915050565b6119bd81611772565b82525050565b60006020820190506119d860008301846119b4565b92915050565b600082825260208201905092915050565b60006119fa82611809565b611a0481856119de565b9350611a14818560208601611825565b611a1d8161184f565b840191505092915050565b60006020820190508181036000830152611a4281846119ef565b905092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b611a7f81611951565b82525050565b6000611a918383611a76565b60208301905092915050565b6000602082019050919050565b6000611ab582611a4a565b611abf8185611a55565b9350611aca83611a66565b8060005b83811015611afb578151611ae28882611a85565b9750611aed83611a9d565b925050600181019050611ace565b5085935050505092915050565b60006020820190508181036000830152611b228184611aaa565b905092915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611b6c8261184f565b810181811067ffffffffffffffff82111715611b8b57611b8a611b34565b5b80604052505050565b6000611b9e61173e565b9050611baa8282611b63565b919050565b600067ffffffffffffffff821115611bca57611bc9611b34565b5b611bd38261184f565b9050602081019050919050565b82818337600083830152505050565b6000611c02611bfd84611baf565b611b94565b905082815260208101848484011115611c1e57611c1d611b2f565b5b611c29848285611be0565b509392505050565b600082601f830112611c4657611c45611b2a565b5b8135611c56848260208601611bef565b91505092915050565b600060208284031215611c7557611c74611748565b5b600082013567ffffffffffffffff811115611c9357611c9261174d565b5b611c9f84828501611c31565b91505092915050565b6000819050919050565b611cbb81611ca8565b82525050565b6000602082019050611cd66000830184611cb2565b92915050565b611ce581611951565b82525050565b6000602082019050611d006000830184611cdc565b92915050565b60008060408385031215611d1d57611d1c611748565b5b6000611d2b8582860161179b565b925050602083013567ffffffffffffffff811115611d4c57611d4b61174d565b5b611d5885828601611c31565b9150509250929050565b611d6b81611ca8565b8114611d7657600080fd5b50565b600081359050611d8881611d62565b92915050565b60008060408385031215611da557611da4611748565b5b600083013567ffffffffffffffff811115611dc357611dc261174d565b5b611dcf85828601611c31565b9250506020611de085828601611d79565b9150509250929050565b7f6f776e6572203d207a65726f2061646472657373000000000000000000000000600082015250565b6000611e206014836119de565b9150611e2b82611dea565b602082019050919050565b60006020820190508181036000830152611e4f81611e13565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611e9d57607f821691505b602082108103611eb057611eaf611e56565b5b50919050565b7f746f6b656e20646f65736e277420657869737400000000000000000000000000600082015250565b6000611eec6013836119de565b9150611ef782611eb6565b602082019050919050565b60006020820190508181036000830152611f1b81611edf565b9050919050565b7f55524c20717565727920666f72206e6f6e6578697374656e7420746f6b656e00600082015250565b6000611f58601f836119de565b9150611f6382611f22565b602082019050919050565b60006020820190508181036000830152611f8781611f4b565b9050919050565b7f6e6f74206f776e6572206f6620746f6b656e0000000000000000000000000000600082015250565b6000611fc46012836119de565b9150611fcf82611f8e565b602082019050919050565b60006020820190508181036000830152611ff381611fb7565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061203482611951565b915061203f83611951565b925082820390508181111561205757612056611ffa565b5b92915050565b600081905092915050565b600061207382611809565b61207d818561205d565b935061208d818560208601611825565b80840191505092915050565b60006120a58284612068565b915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b600061211982611951565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361214b5761214a611ffa565b5b600182019050919050565b60008190508160005260206000209050919050565b6000815461217881611e85565b612182818661205d565b9450600182166000811461219d57600181146121b2576121e5565b60ff19831686528115158202860193506121e5565b6121bb85612156565b60005b838110156121dd578154818901526001820191506020810190506121be565b838801955050505b50505092915050565b60006121fa828461216b565b915081905092915050565b60008154905061221481611e85565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b60006008830261227d7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612240565b6122878683612240565b95508019841693508086168417925050509392505050565b6000819050919050565b60006122c46122bf6122ba84611951565b61229f565b611951565b9050919050565b6000819050919050565b6122de836122a9565b6122f26122ea826122cb565b84845461224d565b825550505050565b600090565b6123076122fa565b6123128184846122d5565b505050565b5b818110156123365761232b6000826122ff565b600181019050612318565b5050565b601f82111561237b5761234c81612156565b61235584612230565b81016020851015612364578190505b61237861237085612230565b830182612317565b50505b505050565b600082821c905092915050565b600061239e60001984600802612380565b1980831691505092915050565b60006123b7838361238d565b9150826002028217905092915050565b8181036123d55750506124ad565b6123de82612205565b67ffffffffffffffff8111156123f7576123f6611b34565b5b6124018254611e85565b61240c82828561233a565b6000601f83116001811461243b5760008415612429578287015490505b61243385826123ab565b8655506124a6565b601f1984166124498761221b565b965061245486612156565b60005b8281101561247c57848901548255600182019150600185019450602081019050612457565b868310156124995784890154612495601f89168261238d565b8355505b6001600288020188555050505b5050505050505b565b7f546f6b656e207769746820746869732055524c20646f6573206e6f742065786960008201527f7374000000000000000000000000000000000000000000000000000000000000602082015250565b600061250b6022836119de565b9150612516826124af565b604082019050919050565b6000602082019050818103600083015261253a816124fe565b9050919050565b61254a82611809565b67ffffffffffffffff81111561256357612562611b34565b5b61256d8254611e85565b61257882828561233a565b600060209050601f8311600181146125ab5760008415612599578287015190505b6125a385826123ab565b86555061260b565b601f1984166125b986612156565b60005b828110156125e1578489015182556001820191506020850194506020810190506125bc565b868310156125fe57848901516125fa601f89168261238d565b8355505b6001600288020188555050505b505050505050565b7f6d696e7420746f207a65726f2061646472657373000000000000000000000000600082015250565b60006126496014836119de565b915061265482612613565b602082019050919050565b600060208201905081810360008301526126788161263c565b9050919050565b7f746f6b656e20616c7265616479206d696e746564000000000000000000000000600082015250565b60006126b56014836119de565b91506126c08261267f565b602082019050919050565b600060208201905081810360008301526126e4816126a8565b9050919050565b60006126f682611951565b915061270183611951565b925082820190508082111561271957612718611ffa565b5b92915050565b7f55524c20736574206f66206e6f6e6578697374656e7420746f6b656e00000000600082015250565b6000612755601c836119de565b91506127608261271f565b602082019050919050565b6000602082019050818103600083015261278481612748565b905091905056fea2646970667358221220fd0c05e9309ea22159cad7faa8357fabed9c609909ccc80bd530d94ef65ccb3d64736f6c63430008130033&quot;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        <div class="reward-container">
  <div>赏个鸡腿🍗</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="黄梓铭 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="黄梓铭 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/03/30/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" rel="prev" title="以太坊私链部署智能合约">
      <i class="fa fa-chevron-left"></i> 以太坊私链部署智能合约
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/04/29/W4terCTF_2024_Writeup/" rel="next" title="W4terCTF 2024 Writeup">
      W4terCTF 2024 Writeup <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">2.</span> <span class="nav-text">abi 和 bytecode</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="黄梓铭"
      src="/images/MyPhoto.jpg">
  <p class="site-author-name" itemprop="name">黄梓铭</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Ivan53471" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Ivan53471" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/1480639239@qq.com" title="E-Mail → 1480639239@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">黄梓铭</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">82k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:15</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #4D4D4C;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #F7F7F7;
      background-image: linear-gradient(#F7F7F7, #F7F7F7);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>

  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


</body>
</html>
