<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Goè°ƒç”¨geth JSON RPCæ¥å£</title>
    <url>/2024/03/27/Go%E8%B0%83%E7%94%A8geth_JSON_RPC%E6%8E%A5%E5%8F%A3/</url>
    <content><![CDATA[<p>åœ¨Goä¸­è°ƒç”¨ä»¥å¤ªåŠçš„æ ¼å¼å¦‚ä¸‹</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">client, _ := rpc.Dial(<span class="string">&quot;http://localhost:8545&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> result <span class="type">bool</span></span><br><span class="line">client.Call(&amp;result ,<span class="string">&quot;net_listening&quot;</span>) </span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>æœ‰ä»¥ä¸‹å¸¸ç”¨æ¥å£</p>
<h2><span id="net">net</span></h2><p>1ã€net_version<br>å½“å‰è¿æ¥ç½‘ç»œçš„ID</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> networkid <span class="type">string</span></span><br><span class="line">client.Call(&amp;networkid,<span class="string">&quot;net_version&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>2ã€net_listening<br>å®¢æˆ·ç«¯æ˜¯å¦å¤„äºç›‘å¬çŠ¶æ€</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> is_listing <span class="type">bool</span></span><br><span class="line">client.Call(&amp;is_listing,<span class="string">&quot;net_listening&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2><span id="eth">eth</span></h2><p>1ã€eth_accounts<br>è¿”å›è´¦æˆ·åœ°å€æ•°ç»„</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> accounts []<span class="type">string</span></span><br><span class="line">client.Call(&amp;accounts,<span class="string">&quot;eth_accounts&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>2ã€eth_getBalance<br>éœ€è¦ä¼ å…¥è´¦æˆ·åœ°å€ï¼Œè¿”å›ä½™é¢ï¼Œå•ä½æ˜¯<em>wei</em><br> â€œlatestâ€ è¡¨ç¤ºä½ è¦æŸ¥è¯¢çš„æ˜¯å½“å‰é“¾ä¸Šæœ€æ–°çš„è´¦æˆ·ä½™é¢</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> balance <span class="type">string</span></span><br><span class="line">client.Call(&amp;balance,<span class="string">&quot;eth_getBalance&quot;</span>,<span class="string">&quot;0x558c90c05d8c4b55a87de03bd601fd76faf50f9b&quot;</span>,<span class="string">&quot;latest&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>3ã€eth_coinbase<br>è·å–æŒ–çŸ¿è´¦æˆ·åœ°å€</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> proto_version <span class="type">string</span></span><br><span class="line">client.Call(&amp;proto_version , <span class="string">&quot;eth_protocolVersion&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>4ã€eth_mining<br>è¿”å›å®¢æˆ·ç«¯æ˜¯å¦åœ¨æŒ–çŸ¿</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> is_mining <span class="type">bool</span></span><br><span class="line">client.Call(&amp;is_mining,<span class="string">&quot;eth_mining&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>5ã€eth_getTransactionCount<br>è¿”å›æŒ‡å®šåœ°å€å‘ç”Ÿçš„äº¤æ˜“æ•°é‡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> transactionCount <span class="type">string</span></span><br><span class="line">client.Call(&amp;transactionCount,<span class="string">&quot;eth_getBalance&quot;</span>,<span class="string">&quot;0x72w12d05d8c4b55a87de03bd601fd76faf50f9b&quot;</span>,<span class="string">&quot;latest&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>6ã€eth_blockNumber<br>è·å–å½“å‰å—ç¼–å·</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> blockNum <span class="type">string</span></span><br><span class="line">client.Call(&amp;blockNum ,<span class="string">&quot;eth_blockNumber&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2><span id="personal">personal</span></h2><p>1ã€personal_listAccounts<br>è·å–è¯¥èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰è´¦æˆ·</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> accounts []<span class="type">string</span></span><br><span class="line">client.Call(&amp;accounts,<span class="string">&quot;personal_listAccounts&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>2.personal_newAccount<br>åˆ›å»ºç”¨æˆ·ï¼Œéœ€è¦å°†å¯†ç ä½œä¸ºå‚æ•°ä¼ å…¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> newAccount <span class="type">string</span></span><br><span class="line">client.Call(&amp;newAccount, <span class="string">&quot;personal_newAccount&quot;</span>, <span class="string">&quot;12345678&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>3.personal_lockAccount<br>é”å®šæŒ‡å®šè´¦æˆ·ï¼Œéœ€è¦å°†åœ°å€ä½œä¸ºå‚æ•°ä¼ å…¥</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> is_lock <span class="type">bool</span></span><br><span class="line">client.Call(&amp;is_lock, <span class="string">&quot;personal_lockAccount&quot;</span>, <span class="string">&quot;è´¦æˆ·åœ°å€&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>4.personal_unlockAccount<br>è§£é”æŒ‡å®šè´¦æˆ·,æœ‰äº›æ“ä½œå¿…é¡»è§£é”è´¦æˆ·æ‰å¯ä»¥æ“ä½œ</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> is_unlock <span class="type">bool</span></span><br><span class="line">client.Call(&amp;is_unlock, <span class="string">&quot;personal_lockAccount&quot;</span>, <span class="string">&quot;è´¦æˆ·åœ°å€&quot;</span>,<span class="string">&quot;è´¦æˆ·å¯†ç &quot;</span>)</span><br></pre></td></tr></table></figure>

<h2><span id="db">db</span></h2><p>1.db_putString<br>åœ¨æœ¬åœ°æ•°æ®åº“ä¸­å­˜å…¥å­—ç¬¦ä¸²</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> is_ok <span class="type">bool</span></span><br><span class="line">client.Call(&amp;is_ok, <span class="string">&quot;db_putString&quot;</span>, <span class="string">&quot;db_name&quot;</span>,<span class="string">&quot;key&quot;</span>,<span class="string">&quot;&quot;</span>value<span class="string">&quot;)</span></span><br></pre></td></tr></table></figure>

<p>2.db_getString<br>ä»æœ¬åœ°æ•°æ®åº“è¯»å–å­—ç¬¦ä¸²</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> val <span class="type">string</span></span><br><span class="line">client.Call(&amp;val, <span class="string">&quot;db_getString&quot;</span>, <span class="string">&quot;db_name&quot;</span>,<span class="string">&quot;key&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ç§‘ç ”</category>
      </categories>
  </entry>
  <entry>
    <title>My First Post</title>
    <url>/2024/03/23/My-First-Post/</url>
    <content><![CDATA[<h2><span id="start-my-blogging-journey">Start My Blogging Journey</span></h2><p>This is my first post. Although it seems to be essential, I have never done this before.<br>I want to create my own blog, which can show my identity.</p>
<h2><span id="another-reason">Another Reason</span></h2><p>I am publishing this blog post as part of my assignment for the cloud computing course.<br>My name is é»„æ¢“é“­ and my ID number is 21311151.</p>
]]></content>
      <categories>
        <category>startup</category>
      </categories>
  </entry>
  <entry>
    <title>W4terCTF 2024 Writeup</title>
    <url>/2024/04/29/W4terCTF_2024_Writeup/</url>
    <content><![CDATA[<h2><span id="å‰è¨€">å‰è¨€</span></h2><p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å‚åŠ  <em>CTF</em> ç«èµ›ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆå¥½ç©çš„ï¼Œä¹Ÿå¾ˆæœ‰æ”¶è·<br>ç”±äºæœ¬äººæ˜¯ç¬¬ä¸€æ¬¡å‚åŠ CTFæ¯”èµ›ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ä¸çŸ¥é“å¾—åˆ°flagéœ€è¦æˆªå›¾ï¼Œæ‰€ä»¥æœ‰äº›é¢˜ç›®æ²¡æœ‰flagæˆªå›¾ï¼Œä¸€äº›æµç¨‹çš„å›¾ç‰‡ä¹Ÿæ²¡æœ‰æˆªåˆ°ã€‚ä½†æ˜¯æˆ‘ä¼šå°½é‡å°†æ€è·¯è®²æ¸…æ¥šçš„</p>
<span id="more"></span>

<h2><span id="writeup">Writeup</span></h2><h3><span id="misc">MISC</span></h3><h4><span id="brokenmp4">broken.mp4</span></h4><p>è¯¥é¢˜ä½¿ç”¨untruncè½¯ä»¶ï¼Œä»¥ä¸‹è½½é™„ä»¶å¾—åˆ°çš„ç¬¬ä¸€ä¸ªè§†é¢‘ä¸ºreference fileï¼Œä»¥ç¬¬äºŒä¸ªè§†é¢‘ä¸ºtruncate fileï¼Œç”Ÿæˆç¬¬äºŒä¸ªè§†é¢‘çš„ä¿®å¤è§†é¢‘ï¼Œåœ¨è§†é¢‘çš„æœ€åå°±å¯ä»¥è·å¾—flag</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/broken.png" class>

<h4><span id="sign-in">Sign in</span></h4><p>è¯¥é¢˜é€šè¿‡åœ¨æ¦œå•å¯»æ‰¾W4terDr0pé˜Ÿä¼ï¼Œå³å¯è·å¾—flag</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Signin.png" class>
<h4><span id="priv-escape">Priv Escape</span></h4><p>é€šè¿‡sudo -l å¯ä»¥å‘ç°ï¼Œ&#x2F;usr&#x2F;sbin&#x2F;nginxå¯¹äºå½“å‰ç”¨æˆ·ï¼Œæ˜¯è¢«r00tèµ‹æƒæ‰§è¡Œçš„ï¼Œè¿™å°±æ˜¯æœ¬é¢˜çš„çªç ´å£ã€‚é‚£ä¹ˆï¼Œè§£é¢˜çš„æµç¨‹å°±åº”è¯¥æ˜¯ï¼šé€šè¿‡r00tå¼€å¯nginxæœåŠ¡ï¼Œæš´éœ²ä¸€ä¸ªç«¯å£ï¼Œå½“å‰ç”¨æˆ·åœ¨è®¿é—®è¿™ä¸ªç«¯å£çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¯¥ç«¯å£è·å–flag<br>å…·ä½“æµç¨‹ï¼š<br>ç›´æ¥å¼€å¯nginxè‚¯å®šæ˜¯ä¸å¯è¡Œçš„ï¼Œå…³æ³¨åˆ°nginxçš„å¯åŠ¨å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡-c æŒ‡å®šnginx.confçš„è·¯å¾„ã€‚æ‰€ä»¥è¦å…ˆè‡ªå·±å†™ä¸€ä¸ªnginx.confï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆåªæˆªå–é‡è¦éƒ¨åˆ†ï¼‰ï¼š</p>
<p>è¿™é‡Œè¦æŒ‡å®špidçš„è·¯å¾„ï¼Œa.pidæ˜¯è‡ªå·±åˆ›å»ºçš„ï¼Œè€Œä¸”è¿™ä¸ªpidçš„å€¼éœ€è¦å…ˆé€šè¿‡sudo -u r00t &#x2F;usr&#x2F;sbin&#x2F;nginxå¯åŠ¨nginxï¼Œå¹¶ç”¨ps -ef | grep nginx è·å–åˆ°ï¼ˆæ­¤å¤„ä¸º120ï¼‰ï¼Œå†é€šè¿‡echoè¾“å…¥åˆ°a.pid</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv1.png" class>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv2.png" class>

<p>è¿™äº›éƒ½è¦æŒ‡å®šåˆ°å¯ä»¥è®¿é—®çš„ç›®å½•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv3.png" class>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv4.png" class>

<p>æ‰€æœ‰çš„include ä¹Ÿè¦æ³¨é‡Šæ‰ï¼Œä¸ç„¶ä¼šæŠ¥é”™</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv5.png" class>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv6.png" class>

<p>æ­¤å¤„æš´éœ²18888ç«¯å£ä¾›å½“å‰ç”¨æˆ·è®¿é—®</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv7.png" class>

<p>tipsï¼šæ‰€æœ‰çš„æ–‡ä»¶åˆ›å»ºéƒ½å¯ä»¥é€šè¿‡touch + echo çš„æ–¹å¼å†™å…¥ï¼Œå¦‚æœå†™é”™äº†ï¼Œå°±rmåé‡å†™</p>
<p>ç„¶åå°±å¯ä»¥é€šè¿‡sudo -u r00t &#x2F;usr&#x2F;sbin&#x2F;nginx -c &#x2F;home&#x2F;W4terCTFPlayer&#x2F;nginx.conf å¼€å¯nginxæœåŠ¡<br>tipsï¼šåœ¨æ­¤ä¹‹å‰ï¼Œè¦ç¡®å®š&#x2F;home&#x2F;W4terCTFPlayerä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¯è¯»ï¼Œå¯ä»¥é€šè¿‡ chmod -R 777  &#x2F;home&#x2F;W4terCTFPlayer å®ç°</p>
<p>æœ€åï¼Œå°±å¯ä»¥é€šè¿‡curl 127.0.0.1:18888 è®¿é—®åˆ°flagå•¦</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Priv8.png" class>

<h4><span id="gz-gpt">GZ GPT</span></h4><p>ä¸€å¼€å§‹çœŸçš„æ˜¯ä¸€ç‚¹å¤´ç»ªæ²¡æœ‰ï¼ŒåªçŸ¥é“flagã€CTFè¾“å…¥çš„æ—¶å€™ä¼šæœ‰ä¸ä¸€æ ·çš„å›ç­”ï¼Œç„¶åå°±ä¸€ç›´å¡åœ¨è¿™ã€‚<br>ç„¶ååé¢æœ‰å‡ºç°çš„è¿™äº›â€œä¸œè¥¿â€ï¼Œæˆ‘çœŸçš„æœ‰ä¸€å¤§æ®µæ—¶é—´è®¤ä¸ºæ˜¯ä¹±ç ï¼ï¼ï¼å› ä¸ºæˆ‘ç”¨cmdçš„æ—¶å€™ä¼šæœ‰ä¹±ç å‡ºç°ï¼Œç„¶åä¸€ç›´æ²¡æœ‰ç®¡ï¼ˆå•Šå•Šå•Šæ•‘å‘½ï¼‰</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/GZ1.png" class>

<p>å®é™…ä¸Šè®¤çœŸè§‚å¯Ÿä¹‹åå¯ä»¥å‘ç°ï¼Œè¿™é‡Œæ˜¯æœ‰ä¸¤ç§å›¾æ¡ˆï¼Œè€Œä¸”æœ‰å…«ä¸ªï¼Œæ‰€ä»¥å°±èƒ½è”æƒ³åˆ°æ˜¯å…«ä½äºŒè¿›åˆ¶<br>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥éªŒè¯ä¸€ä¸‹ï¼Œå‘ç°ç¬¬ä¸€ç¬¬äºŒä¸ªäºŒè¿›åˆ¶è½¬ASCII åå°±æ˜¯W4ï¼Œå°±å¯ä»¥ç¡®è®¤æ˜¯æ­£ç¡®çš„è§£ç­”æ–¹æ³•äº†<br>ç„¶åä¸æ–­å‘è¯·æ±‚ï¼Œä¼šå‘ç°è¿‡äº†ä¸€è½®æœ‰ä¸€å¥è¯æ˜¯æ²¡æœ‰ç¬¦å·çš„ï¼Œè¯´æ˜å·²ç»åˆ°ç»“å°¾äº†ã€‚è¿™æ—¶å°±å¯ä»¥å°†è¿™äº›äºŒè¿›åˆ¶æ•°è¾“å…¥è½¬æ¢å™¨ï¼Œå¾—åˆ°ä»¥ä¸‹ç»“æœ</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/GZ2.png" class>

<h4><span id="spam-2024">Spam 2024</span></h4><p>é¦–å…ˆæ‹¿åˆ°ä¸€ä¸ªå¾ˆé•¿çš„åƒåœ¾é‚®ä»¶ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°æ˜¯Spam Encodeç”Ÿæˆçš„ï¼ŒDecode åå¾—åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">59,6f,75,20,6c,69,6b,65,20,65,6d,6f,6a,69,73,2c,20,64,6f,6e,27,74,20,79,6f,75,3f,0a,0a,01f643,01f4b5,01f33f,01f3a4,01f6aa,01f30f,01f40e,01f94b,01f6ab,01f606,2705,01f606,01f6b0,01f4c2,01f32a,263a,01f6e9,01f30f,01f4c2,01f579,01f993,01f405,01f375,01f388,01f600,01f504,01f6ab,01f3a4,01f993,2705,01f4ee,01f3a4,01f385,01f34e,01f643,01f309,01f383,01f34d,01f374,01f463,01f6b9,01f923,01f418,01f3f9,263a,01f463,01f4a7,01f463,01f993,01f33f,2328,01f32a,01f30f,01f643,01f375,2753,2602,01f309,01f606,01f3f9,01f375,01f4a7,01f385,01f449,01f30a,01f6b9,01f6aa,01f374,01f60e,01f383,01f32a,01f643,01f441,01f94b,01f451,01f4a7,01f418,01f3a4,01f94b,01f418,01f6e9,01f923,01f309,01f6e9,23e9,01f60d,2753,01f418,01f621,2600,01f60d,01f643,01f601,01f600,01f601,01f6ab,01f4c2,2705,2603,01f6ab,01f60e,01f52a,01f451,01f600,01f579,01f6ab,01f60d,01f32a,01f4c2,01f44c,01f34d,01f44c,01f993,01f590,01f923,01f60e,01f3ce,01f34d,01f3f9,01f34c,01f34d,01f3a4,2600,01f3f9,01f388,01f6b0,01f4a7,2600,2709,01f3f9,01f34d,01f993,01f385,01f374,2602,23e9,01f6aa,01f40d,263a,01f418,01f607,01f621,01f375,01f30f,01f993,01f375,01f6e9,01f4c2,01f44c,01f3f9,01f5d2,01f5d2,0a,0a,42,74,77,2c,20,74,68,65,20,6b,65,79,20,69,73,20,22,4b,45,59,22</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé¢åŒ…å«äº†ä¸¤ç§ç¼–ç ï¼Œä¸€ç§æ˜¯59å½¢å¼ ï¼Œå¦ä¸€ç§æ˜¯01f643 å½¢å¼ï¼Œç¬¬ä¸€ç§å¾ˆå®¹æ˜“çœ‹å‡ºæ˜¯åå…­è¿›åˆ¶ï¼Œæ‰€ä»¥æ”¾åˆ° CyberChef ä¸­è§£ç å¾—åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Spam1.png" class>

<p>æ ¹æ®æç¤ºï¼Œç¬¬äºŒç§å½¢å¼çš„ç¼–ç åº”è¯¥æ˜¯ emoji çš„ Unicode ç¼–ç ï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸€ä¸ªå°ç¨‹åºå¯¹å…¶è¿›è¡Œè½¬æ¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">unicode_to_emoji</span>(<span class="params">input_string</span>):</span><br><span class="line">    <span class="comment"># å°†è¾“å…¥çš„unicodeå­—ç¬¦ä¸²æŒ‰é€—å·åˆ†å‰²æˆåˆ—è¡¨</span></span><br><span class="line">    unicode_list = input_string.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨è½¬æ¢åçš„emoji</span></span><br><span class="line">    emoji_list = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># éå†unicodeåˆ—è¡¨ï¼Œå°†æ¯ä¸ªunicodeè½¬æ¢ä¸ºå¯¹åº”çš„emojiï¼Œå¹¶åŠ å…¥åˆ°emojiåˆ—è¡¨ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> unicode_char <span class="keyword">in</span> unicode_list:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            emoji_char = <span class="built_in">chr</span>(<span class="built_in">int</span>(unicode_char.strip(), <span class="number">16</span>))</span><br><span class="line">            emoji_list.append(emoji_char)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Invalid Unicode: <span class="subst">&#123;unicode_char.strip()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿”å›é€—å·åˆ†éš”çš„è½¬æ¢åçš„emojiå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(emoji_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•</span></span><br><span class="line">unicode_input = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ä»¥é€—å·åˆ†éš”çš„Unicodeå­—ç¬¦ä¸²ï¼š&quot;</span>)</span><br><span class="line">emoji_output = unicode_to_emoji(unicode_input)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è½¬æ¢åçš„Emojiå­—ç¬¦ä¸²ä¸ºï¼š&quot;</span>, emoji_output)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ğŸ™ƒğŸ’µğŸŒ¿ğŸ¤ğŸšªğŸŒğŸğŸ¥‹ğŸš«ğŸ˜†âœ…ğŸ˜†ğŸš°ğŸ“‚ğŸŒªâ˜ºğŸ›©ğŸŒğŸ“‚ğŸ•¹ğŸ¦“ğŸ…ğŸµğŸˆğŸ˜€ğŸ”„ğŸš«ğŸ¤ğŸ¦“âœ…ğŸ“®ğŸ¤ğŸ…ğŸğŸ™ƒğŸŒ‰ğŸƒğŸğŸ´ğŸ‘£ğŸš¹ğŸ¤£ğŸ˜ğŸ¹â˜ºğŸ‘£ğŸ’§ğŸ‘£ğŸ¦“ğŸŒ¿âŒ¨ğŸŒªğŸŒğŸ™ƒğŸµâ“â˜‚ğŸŒ‰ğŸ˜†ğŸ¹ğŸµğŸ’§ğŸ…ğŸ‘‰ğŸŒŠğŸš¹ğŸšªğŸ´ğŸ˜ğŸƒğŸŒªğŸ™ƒğŸ‘ğŸ¥‹ğŸ‘‘ğŸ’§ğŸ˜ğŸ¤ğŸ¥‹ğŸ˜ğŸ›©ğŸ¤£ğŸŒ‰ğŸ›©â©ğŸ˜â“ğŸ˜ğŸ˜¡â˜€ğŸ˜ğŸ™ƒğŸ˜ğŸ˜€ğŸ˜ğŸš«ğŸ“‚âœ…â˜ƒğŸš«ğŸ˜ğŸ”ªğŸ‘‘ğŸ˜€ğŸ•¹ğŸš«ğŸ˜ğŸŒªğŸ“‚ğŸ‘ŒğŸğŸ‘ŒğŸ¦“ğŸ–ğŸ¤£ğŸ˜ğŸğŸğŸ¹ğŸŒğŸğŸ¤â˜€ğŸ¹ğŸˆğŸš°ğŸ’§â˜€âœ‰ğŸ¹ğŸğŸ¦“ğŸ…ğŸ´â˜‚â©ğŸšªğŸâ˜ºğŸ˜ğŸ˜‡ğŸ˜¡ğŸµğŸŒğŸ¦“ğŸµğŸ›©ğŸ“‚ğŸ‘ŒğŸ¹ğŸ—’ğŸ—’</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç¼–ç ä¹Ÿèƒ½æ¯”è¾ƒå®¹æ˜“çœ‹å‡ºï¼Œå°±æ˜¯emoji-AESç¼–ç ï¼ˆemoji-AESç¼–ç çš„å¼€å¤´å’Œç»“å°¾æ˜¯æœ‰ä¸€å®šæ ¼å¼çš„ï¼‰<br>é‚£ä¹ˆå…³é”®å°±åœ¨äºå¯†é’¥ï¼Œæç¤ºä¸­è¯´äº†å¯†é’¥ä¸ºKEYï¼Œä½†æ˜¯è§£å¯†ä¸€ç›´åœ¨æŠ¥é”™ï¼Œå¥‡æ€ªäº†ï¼å¯†æ–‡å¤§æ¦‚ç‡æ˜¯æ²¡æœ‰é”™è¯¯çš„ï¼Œä¹Ÿæ²¡æœ‰å…¶ä»–æç¤ºå¯†æ–‡è¦åšè¿›ä¸€æ­¥å˜æ¢ï¼Œé‚£ä¹ˆéš¾é“æ˜¯å¯†é’¥çš„é—®é¢˜å—ï¼Ÿ<br>è¿™é‡Œå‡ºé¢˜äººç»™æˆ‘ä»¬æŒ–äº†ä¸€ä¸ªâ€œå°â€å‘ï¼Œé‚£å°±æ˜¯ KEY å¹¶ä¸æ˜¯å¯†é’¥ï¼ŒğŸ”‘æ‰æ˜¯ï¼Œå› ä¸º â€œI like emojiâ€ ğŸ˜‚<br>è§£å¯†æˆåŠŸå¾—åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0x???? âŠ• dxBUQVJndGJbbGByE3tGUW57VxV0bH9db3FSe2YFUndUexVUYWl/QW1FAW1/bW57EhQSEF0=</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„æç¤ºå€’æ˜¯è›®æ˜æ˜¾çš„ï¼Œå·¦è¾¹æ˜¯ä¸€ä¸ª4ä½16è¿›åˆ¶æ•°ï¼Œä¸­é—´æ˜¯å¼‚æˆ–ï¼Œå³è¾¹æ˜¯ç±»ä¼¼äºbase64çš„ç¼–ç ã€‚æ—¢ç„¶åªæ˜¯4ä½16è¿›åˆ¶ï¼Œé‚£ä¹ˆæœ€å¤§ä¹Ÿå°±65536ï¼Œå®Œå…¨å¯ä»¥çˆ†ç ´å¾—å‡ºæ˜æ–‡ã€‚<br>æ‰€ä»¥å†™ä¸ªä»£ç æŠŠæ‰€æœ‰å¯èƒ½ç»“æœè¾“å‡ºï¼Œç„¶åæ‰¾å°±å¥½å•¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="comment"># Base64 ç¼–ç çš„å­—ç¬¦ä¸²</span></span><br><span class="line">encoded_data = <span class="string">&#x27;dxBUQVJndGJbbGByE3tGUW57VxV0bH9db3FSe2YFUndUexVUYWl/QW1FAW1/bW57EhQSEF0=&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Base64 è§£ç </span></span><br><span class="line">decoded_bytes = base64.b64decode(encoded_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†æ‰€æœ‰å¯èƒ½çš„0x0000åˆ°0xFFFFï¼ˆ65535ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0x10000</span>):</span><br><span class="line">    <span class="comment"># å°†æ•´æ•°iè½¬åŒ–ä¸ºä¸¤å­—èŠ‚å½¢å¼</span></span><br><span class="line">    key = i.to_bytes(<span class="number">2</span>, <span class="string">&#x27;little&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºç”¨äºXORæ“ä½œçš„å®Œæ•´å¯†é’¥ï¼Œé‡å¤åŒ¹é…æ•°æ®é•¿åº¦</span></span><br><span class="line">    full_key = key * (<span class="built_in">len</span>(decoded_bytes) // <span class="built_in">len</span>(key)) + key[:<span class="built_in">len</span>(decoded_bytes) % <span class="built_in">len</span>(key)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># XORè§£å¯†</span></span><br><span class="line">    xored_result = <span class="built_in">bytes</span>([b ^ k <span class="keyword">for</span> b, k <span class="keyword">in</span> <span class="built_in">zip</span>(decoded_bytes, full_key)])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°è¯•è§£ç ä¸ºå­—ç¬¦ä¸²ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰æ„ä¹‰çš„è¾“å‡ºï¼ˆASCIIå¯æ‰“å°å­—ç¬¦ï¼‰</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        decoded_text = xored_result.decode(<span class="string">&#x27;ascii&#x27;</span>)</span><br><span class="line">        <span class="comment"># æ‰“å°å¯èƒ½æœ‰æ„ä¹‰çš„ç»“æœï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºWï¼Œç¬¬äºŒä¸ªå­—ç¬¦ä¸º4</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>(<span class="number">32</span> &lt;= <span class="built_in">ord</span>(c) &lt;= <span class="number">126</span> <span class="keyword">or</span> c <span class="keyword">in</span> <span class="string">&#x27;\r\n\t&#x27;</span> <span class="keyword">for</span> c <span class="keyword">in</span> decoded_text) <span class="keyword">and</span> decoded_text[<span class="number">0</span>] == <span class="string">&#x27;W&#x27;</span> <span class="keyword">and</span> decoded_text[<span class="number">1</span>] == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;Key <span class="subst">&#123;i:04x&#125;</span>:&#x27;</span>, decoded_text)</span><br><span class="line">    <span class="keyword">except</span> UnicodeDecodeError:</span><br><span class="line">        <span class="comment"># å¦‚æœæ— æ³•è§£ç ä¸ºASCIIï¼Œå¿½ç•¥é”™è¯¯</span></span><br><span class="line">        <span class="keyword">continue</span></span><br></pre></td></tr></table></figure>

<p>å¾—å‡ºæ˜æ–‡å¦‚ä¸‹ï¼š<br><code>Key 2420: W4terCTF&#123;H@V3_fuN_w1TH_yOUr_F!rSt_5pAM_eMa!I_IN_2024&#125;</code></p>
<h3><span id="pwn">Pwn</span></h3><h4><span id="remember-it-0">Remember It 0</span></h4><p>è¯¥é¢˜é€šè¿‡è®¿é—®å®¹å™¨ï¼Œè¿ç»­ç­”å¯¹10ä¸ªstringåï¼Œè·å¾—shellï¼Œlså‘ç°ç›®å½•ä¸­æœ‰flagï¼Œå†ç”¨cat flag å‘½ä»¤å¾—åˆ°flag</p>
<h3><span id="web">Web</span></h3><h4><span id="gitzip">GitZip</span></h4><p>æœ¬é¢˜ç”¨åˆ°burpæŠ“åŒ…ï¼Œåœ¨routes.jsæ–‡ä»¶ä¸­å‘ç°å…¶ä¸­aget(â€˜&#x2F;:htmlnameâ€™) å¯ä»¥ç©¿é€æ”»å‡»ï¼Œå°†htmlnameè®¾ä¸º..&#x2F;å°±å¯ä»¥è®¿é—®åˆ°çˆ¶çº§ç›®å½•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨&#x2F;tmp&#x2F;flagå‰é¢ä¸æ–­åŠ ..&#x2F;ï¼Œä¸€å±‚ä¸€å±‚å¾€ä¸Šæµ‹è¯•ï¼ˆåœ¨å“ªä¸€å±‚æˆ‘å¿˜è®°äº†ï¼Œå½“æ—¶æ²¡æœ‰æˆªå›¾ï¼‰ï¼Œç”¨burpå‘é€Getè¯·æ±‚æŠ¥æ–‡ï¼Œå°±èƒ½åœ¨å“åº”æŠ¥æ–‡ä¸­æ‰¾åˆ°flagäº†ã€‚<br>è¿™é‡Œæœ‰ä¸ªè¦æ³¨æ„çš„ç‚¹æ˜¯urlå¿…é¡»é€šè¿‡ç¼–ç å†å‘é€è¯·æ±‚ï¼Œå¦åˆ™æ— æ³•æ‰¾åˆ°flagã€‚</p>
<h4><span id="png-server">PNG Server</span></h4><p>é¦–å…ˆç”¨.txtå†™ä¸€ä¸ªä¸€å¥è¯æœ¨é©¬ï¼Œåœ¨æ–‡ä»¶å¤´éƒ¨åŠ ä¸ŠGIF87aï¼Œè¿™æ ·å°±èƒ½è¯†åˆ«ä¸ºgifï¼Œå¯ä»¥æˆåŠŸä¸Šä¼ <br>ç„¶åï¼Œæ³¨æ„åˆ°php.iniä¸­æœ‰cgi.fix_pathinfo&#x3D;1 è¿™ä¹ˆä¸€å¥è¯ã€‚<br>cgi.fix_pathinfoçš„è§£é‡Šå¦‚ä¸‹ï¼š<br>è¯¥é€‰é¡¹ä½äºé…ç½®æ–‡ä»¶php.iniä¸­ï¼Œé»˜è®¤å€¼ä¸º1ï¼Œè¡¨ç¤ºå¼€å¯ã€‚å½“phpé‡åˆ°æ–‡ä»¶è·¯å¾„&#x2F;test.png&#x2F;x.phpæ—¶ï¼Œè‹¥&#x2F;test.png&#x2F;x.phpä¸å­˜åœ¨ï¼Œåˆ™ä¼šå»æ‰æœ€åçš„&#x2F;x.phpï¼Œç„¶ååˆ¤æ–­&#x2F;test.pngæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™æŠŠ&#x2F;test.pngå½“åšæ–‡ä»¶&#x2F;test.png&#x2F;x.phpè§£æï¼Œå¦‚è‹¥test.pngè¿˜ä¸å­˜åœ¨å¦‚æœåœ¨å…¶å‰é¢è¿˜æœ‰åç¼€ï¼Œç»§ç»­å‰é¢çš„æ­¥éª¤ï¼Œä»¥æ­¤ç±»æ¨ã€‚è‹¥æ˜¯å…³é—­è¯¥é€‰é¡¹ï¼Œè®¿é—®&#x2F;test.jpg&#x2F;x.php åªä¼šè¿”å›æ‰¾ä¸åˆ°æ–‡ä»¶ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸Šä¼ å›¾ç‰‡åï¼Œç”¨burpæŠ“åˆ°å“åº”æŠ¥æ–‡ï¼Œè·å–åˆ°å›¾ç‰‡çš„ä½ç½®ï¼Œå†ä½¿ç”¨èšå‰‘è¿æ¥ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br>åˆ©ç”¨ä¸Šé¢æåˆ°çš„æ€§è´¨ï¼Œåªéœ€è¦åœ¨.pngåé¢å†æ·»åŠ  &#x2F;ä»»æ„åå­—.phpï¼Œè¿™æ ·å›¾ç‰‡é©¬å°±èƒ½è¢«å½“æˆphpæ‰§è¡Œäº†</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/PNG1.png" class>

<p>è¿æ¥æˆåŠŸåï¼Œå›åˆ°çˆ¶çº§ç›®å½•ï¼Œå°±èƒ½æ‰¾åˆ°&#x2F;flag</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/PNG2.png" class>

<h4><span id="user-manager">User Manager</span></h4><p>è¯¥é¢˜åœ¨æŸ¥çœ‹main.goçš„æ—¶å€™ï¼Œå‘ç°åœ¨order_byå­—æ®µä½œsqlæ³¨å…¥ã€‚<br>é¦–å…ˆé€šè¿‡burpæŠ“åˆ°ä¸€ä¸ªæ­£å¸¸çš„Get &#x2F;usersåŒ…ï¼Œé€šè¿‡ä¿®æ”¹order_by&#x3D; åçš„å­—æ®µï¼ŒçŒœå‡ºåå­—çš„åˆ—åæ˜¯Nameå’Œå¯†ç çš„åˆ—åæ˜¯Secretï¼Œç„¶åçŒœæƒ³æ•°æ®è¡¨åå«usersï¼Œç»è¿‡æµ‹è¯•å‘ç°æ²¡æœ‰é—®é¢˜ã€‚<br>ç„¶åå°†order_by&#x3D; åçš„å­—æ®µæ”¹ä¸ºä»¥ä¸‹è¯­å¥<br><code>Secret; INSERT INTO users (Name) SELECT Secret FROM users;</code><br>æ„æ€æ˜¯å°†Secretåˆ—çš„å†…å®¹å…¨éƒ¨è¦†ç›–Nameåˆ—å†…å®¹<br>ç»è¿‡ç¼–ç åæ˜¯<br><code>Secret%3B%20INSERT%20INTO%20users%20(Name)%20SELECT%20Secret%20FROM%20users%3B</code><br>è¿™æ ·åœ¨å“åº”æŠ¥æ–‡ä¸­å°±ä¼šå‘ç°ï¼ŒNameå­—æ®µä¸­å‡ºç°äº†flag</p>
<h4><span id="auto-unserialize">Auto Unserialize</span></h4><p>è¿™æ˜¯ä¸€ä¸ªååºåˆ—åŒ–çš„é¢˜ï¼Œåœ¨è®¿é—®åˆ°çš„phpä»£ç ä¸­å‘ç°file_existçš„å‚æ•°æ˜¯å¯ä»¥äººä¸ºæŒ‡å®šçš„</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Auto1.png" class>

<p>è€Œä¸”ï¼Œå¯¹äºæ–‡ä»¶çš„ä¸Šä¼ ä¹Ÿæ²¡æœ‰å¾ˆå¼ºçš„æ£€æµ‹ï¼Œåªæ˜¯åˆ¤æ–­æ˜¯ä¸æ˜¯jpg<br>æ‰€ä»¥å¯ä»¥ç”¨ pharååºåˆ—åŒ–ï¼Œæ„é€ ä¸€ä¸ª ä¼ªè£…æˆjpgçš„ .pharæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">command_test</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$command</span> = <span class="string">&quot;system(&#x27;cat /flag&#x27;);&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> <span class="title function_ invoke__">command_test</span>();</span><br><span class="line"><span class="variable">$phar</span> = <span class="keyword">new</span> <span class="title class_">Phar</span>(<span class="string">&quot;shell.phar&quot;</span>); <span class="comment">//ç”Ÿæˆä¸€ä¸ªpharæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºshell.phar</span></span><br><span class="line"><span class="variable">$phar</span>-&gt; <span class="title function_ invoke__">startBuffering</span>();</span><br><span class="line"><span class="variable">$phar</span>-&gt;<span class="title function_ invoke__">setStub</span>(<span class="string">&quot;GIF89a&lt;?php __HALT_COMPILER();?&gt;&quot;</span>); <span class="comment">//è®¾ç½®stub</span></span><br><span class="line"><span class="variable">$phar</span>-&gt;<span class="title function_ invoke__">setMetadata</span>(<span class="variable">$user</span>); <span class="comment">//å°†å¯¹è±¡userå†™å…¥åˆ°metadataä¸­</span></span><br><span class="line"><span class="variable">$phar</span>-&gt;<span class="title function_ invoke__">addFromString</span>(<span class="string">&quot;shell.txt&quot;</span>,<span class="string">&quot;haha&quot;</span>); <span class="comment">//æ·»åŠ å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åå­—ä¸ºshell.txt,å†…å®¹ä¸ºhaha</span></span><br><span class="line"><span class="variable">$phar</span>-&gt;<span class="title function_ invoke__">stopBuffering</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œåå¾—åˆ° .phar æ–‡ä»¶ï¼Œç”¨curl ä¸Šä¼ æ–‡ä»¶ï¼Œå‘ç°ä¸Šä¼ æˆåŠŸ</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Auto2.png" class>

<p>ç„¶ååœ¨ç½‘é¡µåœ°å€æ è¾“å…¥ä»¥ä¸‹urlï¼š<br><code>http://127.0.0.1:49962/?img_file=phar://check.jpg</code></p>
<p>å°±èƒ½è·å–åˆ°flagäº†</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Auto3.png" class>

<h3><span id="reverse">Reverse</span></h3><h4><span id="shuffle-puts">Shuffle Puts</span></h4><p>ä½¿ç”¨BinaryAIï¼Œè¾“å…¥meowæ–‡ä»¶ï¼Œåœ¨ASCIIå­—ç¬¦ä¸²ä¸­è·å–åˆ°flag</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Shuffle.png" class>

<h4><span id="bruteforceme">BruteforceMe</span></h4><p>é¦–å…ˆæ‹¿åˆ°ä¸€ä¸ªelfæ–‡ä»¶ï¼Œæ”¾åˆ°BinaryAIä¸­ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶ç›¸å…³çš„å‡½æ•°ï¼Œä»¥ä¸‹æ˜¯mainå‡½æ•°</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/BruteforceMe1.png" class>

<p>å¯ä»¥çœ‹åˆ°å‡ ä¸ªæç¤ºï¼š<br>1ã€	flagçš„é•¿åº¦åº”è¯¥ä¸º0x2bï¼Œä¹Ÿå°±æ˜¯43<br>2ã€	flagä¼šè¢«FUN_00101209å‡½æ•°å¤„ç†ï¼Œç„¶åå†è¢«FUN_00101290 å‡½æ•°å¤„ç†<br>3ã€	å½“è¾“å…¥çš„flagé•¿åº¦æ­£ç¡®ï¼Œå³ä½¿å†…å®¹ä¸æ­£ç¡®ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªè¯­å¥æç¤ºæ­£ç¡®çš„ä½æ•°<br>4ã€	æŸ¥çœ‹è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œéƒ½æ˜¯å¯¹flagåšä¸€å®šçš„è½¬æ¢ï¼Œä¸»è¦æ˜¯ç¬¬äºŒä¸ªå‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªbase64ç¼–ç çš„å‡½æ•°<br>çŸ¥é“äº†ä»¥ä¸Šä¿¡æ¯ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è¾“å‡ºï¼Œå¼€å§‹çŒœè¿™ä¸ªflagæ˜¯ä»€ä¹ˆã€‚<br>ä»¥ä¸‹ç¼–å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œå®ç°çš„æ•ˆæœæ˜¯ï¼Œå¯¹ { } å†…çš„å€¼çŒœæµ‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾…è¾“å…¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line">input_string=<span class="string">&quot;W4terCTF&#123;UNr31AT3DN6YtEs_caN_b3_3n1m3RAtEd&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># num</span></span><br><span class="line"><span class="comment"># _6Y</span></span><br><span class="line">input_length=<span class="variable">$&#123;#input_string&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯èƒ½å­—ç¬¦çš„æ•°ç»„</span></span><br><span class="line">all_chars=(&#123;0..9&#125; &#123;A..Z&#125; &#123;a..z&#125; _)</span><br><span class="line">num_chars=<span class="variable">$&#123;#all_chars[@]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¿®æ”¹ä½ç½®çš„èµ·ç‚¹</span></span><br><span class="line">start_position=19</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æœ€å¤§åŒ¹é…æ•°å­—å’Œå­—ç¬¦ä¸²</span></span><br><span class="line">max_matched=0</span><br><span class="line">max_matched_string=<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ªç¯è°ƒç”¨ç¨‹åº</span></span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">0</span>; i&lt;<span class="variable">$num_chars</span>; i++)); <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> ((j=<span class="number">0</span>; j&lt;<span class="variable">$num_chars</span>; j++)); <span class="keyword">do</span></span><br><span class="line">        <span class="comment"># æ„å»ºå½“å‰çš„å˜åŒ–å­—ç¬¦ä¸²</span></span><br><span class="line">        new_string=<span class="string">&quot;<span class="variable">$&#123;input_string:0:$start_position&#125;</span><span class="variable">$&#123;all_chars[i]&#125;</span><span class="variable">$&#123;all_chars[j]&#125;</span><span class="variable">$&#123;input_string:$((start_position + 2))&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è°ƒç”¨ç¨‹åºå¹¶è·å–è¾“å‡ºç»“æœ</span></span><br><span class="line">        result=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$new_string</span>&quot;</span> | ./BruteforceMe)</span><br><span class="line">        <span class="comment">#echo &quot;$new_string&quot;</span></span><br><span class="line">	<span class="comment">#echo &quot;$result&quot;</span></span><br><span class="line">        <span class="comment"># æå–ç¬¬ä¸€ä¸ªæ•°å­—å€¼</span></span><br><span class="line">        matched=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$result</span>&quot;</span> | grep -oP <span class="string">&#x27;\d+(?= out of)&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$matched</span> -gt <span class="variable">$max_matched</span> ]; <span class="keyword">then</span></span><br><span class="line">            max_matched=<span class="variable">$matched</span></span><br><span class="line">            max_matched_string=<span class="variable">$new_string</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç¬¬ä¸€ä¸ªæ•°å­—å€¼æœ€å¤§çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;String with the maximum first digit: <span class="variable">$max_matched_string</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè„šæœ¬æ˜¯åŠè‡ªåŠ¨çš„ï¼Œæ¯ä¸€æ¬¡éƒ½éœ€è¦è‡ªå·±ä¿®æ”¹start_positionå’Œinput_stringï¼Œåœ¨å…¨éƒ½è¿‡ä¸€éä¹‹åå‘ç°å¹¶æ²¡æœ‰å…¨å¯¹ï¼Œå¥‡æ€ªäº†ï¼</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/BruteforceMe2.png" class>

<p>å…¶å®æ˜¯æœ¬èº«è¿™ä¸ªè„šæœ¬æœ‰ç¼ºé™·ï¼Œåœ¨base64ç¼–ç ä¸­ï¼Œåº”è¯¥æ˜¯æ¯3ä¸ªå­—ç¬¦ä¸ºä¸€ç»„ï¼Œæ”¹æˆ4ä¸ªå­—ç¬¦ã€‚è€Œåœ¨è¿™ä¸ªè„šæœ¬ä¸­ï¼Œå…¶å®æ˜¯æ¯ä¸¤ä¸ªå­—ç¬¦è¿›è¡ŒçŒœæµ‹ï¼Œè¿™æ ·å¾ˆæœ‰å¯èƒ½åœ¨æŸä¸ªä½ç½®çŒœé”™äº†ï¼Œæ‰€ä»¥éœ€è¦äººå·¥æ’é”™ã€‚<br>é‚£åº”è¯¥æ€æ ·åšå‘¢ï¼Ÿä¹Ÿæ˜¯é€šè¿‡3ä¸ªå­—ç¬¦ä¸ºä¸€ç»„è¿™ä¸ªæ€§è´¨ï¼Œä¸€ä¸ªä¸ªç»„æ’æŸ¥ï¼Œæ¯”å¦‚ï¼š<br>å…ˆå°†UNrå…¨éƒ¨æ›¿æ¢ä¸ºæŸä¸ªä¸€å®šä¸ä¼šåœ¨flagå‡ºç°çš„ç¬¦å·ï¼Œè¾“å…¥ç¨‹åº</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/BruteforceMe3.png" class>

<p>å‘ç°æ­£ç¡®çš„æ•°é‡å°‘äº†4ä¸ªï¼Œè¯´æ˜è¿™ä¸ªç»„éƒ½æ˜¯å¯¹çš„ã€‚<br>é€šè¿‡è¿™æ ·çš„æ–¹æ³•ä¸€æ­¥æ­¥æ’æŸ¥ï¼Œæœ€ç»ˆå‘ç°æ˜¯ N6Y ç»„å’Œ n1m ç»„å‡ºç°äº†é—®é¢˜ï¼Œæ­¤æ—¶å¦‚ä½•çº é”™å‘¢ï¼Ÿ<br>å› ä¸ºæ¯ä¸ªç»„çš„é•¿åº¦ä¸º3ï¼Œé‚£ä¹ˆè‚¯å®šå‰ä¸¤ä¸ªå­—ç¬¦æˆ–è€…åä¸¤ä¸ªå­—ç¬¦ï¼Œæ˜¯ç”¨è„šæœ¬è¢«ä¸€èµ·çŒœçš„ï¼Œæ¯”å¦‚ï¼Œåœ¨n1m ä¸­ï¼Œ1mæ˜¯è¢«ä¸€èµ·çŒœå‡ºæ¥çš„ã€‚<br>é‚£ä¹ˆç°åœ¨æˆ‘å¯¹n1è¿™ä¸¤ä¸ªä½ç½®ï¼Œç”¨å‰é¢çš„è„šæœ¬çŒœï¼Œå°±ä¼šå‘ç°n1å˜æˆäº†nuï¼Œç›¸åŒçš„æ–¹æ³•ç”¨äºN6Y ï¼Œå‘ç°å˜æˆ _6Y<br>æŠŠæ–°çš„flagæäº¤åˆ°ç¨‹åºï¼Œå‘ç°ç»ˆäºå¯¹äº†</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/BruteforceMe4.png" class>

<p>åè®°ï¼šå…¶å®åœ¨åŠè‡ªåŠ¨è„šæœ¬é‚£é‡Œä¼šæœ‰æ›´ç®€å•çš„æ–¹æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾…è¾“å…¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line">input_string=<span class="string">&quot;W4terCTF&#123;000000000000000000000000000000000&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯èƒ½å­—ç¬¦çš„æ•°ç»„</span></span><br><span class="line">all_chars=(&#123;0..9&#125; &#123;A..Z&#125; &#123;a..z&#125; _)</span><br><span class="line">num_chars=<span class="variable">$&#123;#all_chars[@]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æœ€å¤§åŒ¹é…æ•°å­—å’Œå­—ç¬¦ä¸²</span></span><br><span class="line">max_matched=16  <span class="comment"># W4terCTF ä¸éœ€è¦åˆ¤æ–­</span></span><br><span class="line">max_matched_string=<span class="string">&quot;W4terCTF&#123;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯æ¬¡å¾ªç¯éå†ä¸‰ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">for</span> ((i=<span class="number">9</span>; i&lt;<span class="number">42</span>; i+=<span class="number">3</span>)); <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    max_string_first_round=<span class="string">&quot;<span class="variable">$max_matched_string</span>&quot;</span></span><br><span class="line">    max_result_first_round=<span class="string">&quot;<span class="variable">$max_matched</span>&quot;</span></span><br><span class="line">    break_all=0</span><br><span class="line">    <span class="keyword">for</span> ((j=<span class="number">0</span>; j&lt;<span class="variable">$num_chars</span> &amp;&amp; break_all == <span class="number">0</span>; j++)); <span class="keyword">do</span></span><br><span class="line">        new_string_first_round=<span class="string">&quot;<span class="variable">$&#123;max_string_first_round:0:i&#125;</span><span class="variable">$&#123;all_chars[j]&#125;</span><span class="variable">$&#123;input_string:i+1&#125;</span>&quot;</span></span><br><span class="line">        result_first_round=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$new_string_first_round</span>&quot;</span> | ./BruteforceMe)</span><br><span class="line">        matched_first_round=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$result_first_round</span>&quot;</span> | grep -oP <span class="string">&#x27;\d+(?= out of)&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$matched_first_round</span>&quot;</span> -gt <span class="string">&quot;<span class="variable">$max_result_first_round</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            max_matched=<span class="string">&quot;<span class="variable">$matched_first_round</span>&quot;</span></span><br><span class="line">            max_matched_string=<span class="string">&quot;<span class="variable">$new_string_first_round</span>&quot;</span></span><br><span class="line">            max_string_second_round=<span class="string">&quot;<span class="variable">$max_matched_string</span>&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$max_matched</span>&quot;</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$max_matched_string</span>&quot;</span></span><br><span class="line">            <span class="comment"># ç¬¬äºŒä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="keyword">for</span> ((k=<span class="number">0</span>; k&lt;<span class="variable">$num_chars</span> &amp;&amp; break_all == <span class="number">0</span>; k++)); <span class="keyword">do</span></span><br><span class="line">                new_string_second_round=<span class="string">&quot;<span class="variable">$&#123;max_string_second_round:0:i+1&#125;</span><span class="variable">$&#123;all_chars[k]&#125;</span><span class="variable">$&#123;input_string:i+2&#125;</span>&quot;</span></span><br><span class="line">                result_second_round=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$new_string_second_round</span>&quot;</span> | ./BruteforceMe)</span><br><span class="line">                matched_second_round=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$result_second_round</span>&quot;</span> | grep -oP <span class="string">&#x27;\d+(?= out of)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$matched_second_round</span>&quot;</span> -gt <span class="string">&quot;<span class="variable">$max_matched</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">                    max_matched=<span class="string">&quot;<span class="variable">$matched_second_round</span>&quot;</span></span><br><span class="line">                    max_matched_string=<span class="string">&quot;<span class="variable">$new_string_second_round</span>&quot;</span></span><br><span class="line">                    max_string_third_round=<span class="string">&quot;<span class="variable">$max_matched_string</span>&quot;</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$max_matched</span>&quot;</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$max_matched_string</span>&quot;</span></span><br><span class="line">                    <span class="comment"># ç¬¬ä¸‰ä¸ªå­—ç¬¦</span></span><br><span class="line">                    <span class="keyword">for</span> ((m=<span class="number">0</span>; m&lt;<span class="variable">$num_chars</span> &amp;&amp; break_all == <span class="number">0</span>; m++)); <span class="keyword">do</span></span><br><span class="line">                        new_string_third_round=<span class="string">&quot;<span class="variable">$&#123;max_string_third_round:0:i+2&#125;</span><span class="variable">$&#123;all_chars[m]&#125;</span><span class="variable">$&#123;input_string:i+3&#125;</span>&quot;</span></span><br><span class="line">                        result_third_round=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$new_string_third_round</span>&quot;</span> | ./BruteforceMe)</span><br><span class="line">                        matched_third_round=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$result_third_round</span>&quot;</span> | grep -oP <span class="string">&#x27;\d+(?= out of)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$matched_third_round</span>&quot;</span> -gt <span class="string">&quot;<span class="variable">$max_matched</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">                            max_matched=<span class="string">&quot;<span class="variable">$matched_third_round</span>&quot;</span></span><br><span class="line">                            max_matched_string=<span class="string">&quot;<span class="variable">$new_string_third_round</span>&quot;</span></span><br><span class="line">                            <span class="keyword">if</span> (( max_matched % <span class="number">4</span> == <span class="number">0</span> )); <span class="keyword">then</span></span><br><span class="line">                                break_all=1</span><br><span class="line">                                <span class="built_in">break</span></span><br><span class="line">                            <span class="keyword">fi</span></span><br><span class="line">                            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$max_matched</span>&quot;</span></span><br><span class="line">                            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$max_matched_string</span>&quot;</span></span><br><span class="line">                        <span class="keyword">fi</span></span><br><span class="line">                    <span class="keyword">done</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">            <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Flag is: <span class="variable">$max_matched_string</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™æ ·å¾—å‡ºçš„ flag è¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼Œéœ€è¦äººå·¥æ’æŸ¥<br><code>Flag is: W4terCTF&#123;UNr31AT3D_6Yt43_00NNb3N3n1m_RAt4d&#125;</code></p>
<h3><span id="crypto">Crypto</span></h3><h4><span id="wish">Wish</span></h4><p>è¿™ä¸ªé¢˜çœŸçš„æå¿ƒæ€å‘€ï¼Œæ”¾åœ¨å¯†ç é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å¯†ç é¢˜åšæ³•å‘€</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæ˜¯ç®—æŠ½å¥–æ¦‚ç‡çš„å‡½æ•°ï¼Œå¦‚æœâ€œè¿æ°”â€è¶³å¤Ÿå¥½ï¼Œé‚£å°±èƒ½ç›´æ¥è¿”å›flag</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Wish1.png" class>

<p>ä¸ºä»€ä¹ˆè¦è¯´æ˜¯â€œè¿æ°”â€å‘¢ï¼Ÿä»”ç»†çœ‹ç¬¬ä¸€è¡Œï¼Œrandomæ˜¯è®¾å®šseedçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€æ¬¡æŠ½å¥–ï¼Œå‡å¦‚seedç¡®å®šï¼Œç»“æœä¹Ÿæ˜¯ç¡®å®šçš„ï¼›è€Œä¸”indexçš„å€¼å†³å®šäº†forå¾ªç¯çš„æ¬¡æ•°<br>seedæ˜¯ç”±timeå†³å®šçš„ï¼Œtimeçš„èŒƒå›´å¯ä»¥ä»ä¸‹é¢å¾—åˆ°ï¼š</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Wish2.png" class>

<p>ä¹Ÿå°±æ˜¯0åˆ°86399<br>æ‰€ä»¥ï¼Œå†™ä¸€ä¸ªpythonä»£ç ï¼Œéå†0åˆ°86399çš„seedï¼Œçœ‹å“ªä¸€ä¸ªçš„ç®—å‡º abs(random.randint(0, 1919810) - 114514)çš„å€¼å°äºç­‰äº1ï¼Œé‚£ä¹ˆ probabilityçš„å€¼å°±èƒ½å¤§äº10ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">86400</span>):</span><br><span class="line">    random.seed(i)</span><br><span class="line">    <span class="comment"># print(random.randint(0, 1919810))</span></span><br><span class="line">    temp = <span class="built_in">abs</span>(random.randint(<span class="number">0</span>, <span class="number">1919810</span>) - <span class="number">114514</span>)</span><br><span class="line">    <span class="keyword">if</span> temp &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line">        <span class="built_in">print</span>(temp)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p>å¾—å‡ºç»“æœæ˜¯seedä¸º20544ï¼Œabs(random.randint(0, 1919810) - 114514)çš„å€¼ä¸º1<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰10%çš„æ¦‚ç‡å¯ä»¥æŠ½åˆ°ï¼Œå¼€æŠ½ï¼<br>é€šè¿‡burpè®¾å®šå¥½æŠ¥æ–‡æ ¼å¼ï¼Œä¿è¯æ¯æ¬¡çš„timeå’Œindexæ˜¯ä¸€æ ·çš„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Wish3.png" class>

<p>æŠ½äº†næ¬¡ä¹‹åï¼Œå°±å‘ç°flagäº†</p>
<img data-src="/2024/04/29/W4terCTF_2024_Writeup/Wish4.png" class>]]></content>
      <categories>
        <category>ç«èµ›</category>
        <category>CTF</category>
      </categories>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2024/03/23/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2><span id="quick-start">Quick Start</span></h2><h3><span id="create-a-new-post">Create a new post</span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3><span id="run-server">Run server</span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3><span id="generate-static-files">Generate static files</span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3><span id="deploy-to-remote-sites">Deploy to remote sites</span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>startup</category>
      </categories>
  </entry>
  <entry>
    <title>doris_on_es é…ç½®æ•™ç¨‹</title>
    <url>/2024/05/07/doris-on-es/</url>
    <content><![CDATA[<h2><span id="é¡¹ç›®ç”¨å¤„">é¡¹ç›®ç”¨å¤„</span></h2><p>Dorisé€šè¿‡åˆ›å»ºå¤–éƒ¨è¡¨æ–¹å¼å°†Dorisçš„åˆ†å¸ƒå¼æŸ¥è¯¢è§„åˆ’èƒ½åŠ›å’ŒES(Elasticsearch)çš„å…¨æ–‡æ£€ç´¢èƒ½åŠ›ç›¸ç»“åˆï¼Œæä¾›æ›´å®Œå–„çš„ OLAP åˆ†æåœºæ™¯è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒï¼š</p>
<ul>
<li>ES ä¸­çš„å¤šindexåˆ†å¸ƒå¼JoinæŸ¥è¯¢</li>
<li>Doris å’Œ ES ä¸­çš„è¡¨è”åˆæŸ¥è¯¢ï¼Œæ›´å¤æ‚çš„å…¨æ–‡æ£€ç´¢è¿‡æ»¤</li>
</ul>
<span id="more"></span>

<h2><span id="é…ç½®è¿‡ç¨‹">é…ç½®è¿‡ç¨‹</span></h2><p>å®éªŒç¯å¢ƒ: doris ç‰ˆæœ¬2.0.9, Elasticsearch ç‰ˆæœ¬8.7.1ï¼Œåœ¨ wsl2-ubuntu22.0.4 ä¸Šéƒ¨ç½²</p>
<p>doris çš„é…ç½®å¯ä»¥å‚è€ƒ<a href="https://doris.apache.org/zh-CN/docs/1.2/get-starting/">å®˜æ–¹æ–‡æ¡£</a>, Elasticsearch çš„é…ç½®å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/qq_45702207/article/details/120594669">è¿™ç¯‡æ–‡ç« </a> åªéœ€è¦çœ‹ Elasticsearch é…ç½®éƒ¨åˆ†å°±okäº†</p>
<p>å¯¹äº Elasticsearch çš„é…ç½®ï¼Œä½œè€…æœ‰ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯ç°åœ¨æœ¬æœºé…ç½®å¥½åï¼Œå†æŠŠæ•´ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°è™šæ‹Ÿæœºçš„ &#x2F;home&#x2F;user ç›®å½•ä¸‹ï¼Œå¦‚æœæœ‰æŠ¥é”™æ–‡ä»¶æ— æ³•å¤åˆ¶è¿‡å»çš„ç›´æ¥è·³è¿‡å°±å¥½ï¼Œä¸å½±å“ä½¿ç”¨<br>è™šæ‹Ÿæœºçš„ç›®å½•å¯ä»¥é€šè¿‡åœ¨èµ„æºç®¡ç†å™¨åœ°å€æ ä¸­è¾“å…¥ \wsl.localhost\ æ‰¾åˆ°ï¼Œæˆ‘çš„æ˜¯ \wsl.localhost\Ubuntu</p>
<p>é…ç½® Elasticsearch è¿‡ç¨‹ä¸­ä½œè€…é‡åˆ°äº†æ²¡æœ‰ tools.jar æŠ¥é”™ï¼Œéœ€è¦è‡ªè¡Œä¸‹è½½ tools.jarï¼Œå¹¶æ”¾å…¥å®‰è£…ç›®å½• \jdk-x.x.x\lib ä¸­</p>
<h3><span id="å•èŠ‚ç‚¹æŸ¥è¯¢">å•èŠ‚ç‚¹æŸ¥è¯¢</span></h3><h4><span id="åˆ›å»ºdoriså¤–éƒ¨è¡¨">åˆ›å»ºdoriså¤–éƒ¨è¡¨</span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> `es_table` (</span><br><span class="line">    `id` long COMMENT &quot;&quot;,</span><br><span class="line">    `k1` <span class="type">bigint</span>(<span class="number">20</span>) COMMENT &quot;&quot;,</span><br><span class="line">    `k2` datetime COMMENT &quot;&quot;,</span><br><span class="line">    `k3` <span class="type">varchar</span>(<span class="number">20</span>) COMMENT &quot;&quot;,</span><br><span class="line">    `k4` <span class="type">varchar</span>(<span class="number">100</span>) COMMENT &quot;&quot;,</span><br><span class="line">    `k5` <span class="type">float</span> COMMENT &quot;&quot;</span><br><span class="line">) ENGINE<span class="operator">=</span>ELASTICSEARCH</span><br><span class="line"><span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span>(`id`)</span><br><span class="line">PROPERTIES (</span><br><span class="line">    &quot;connector&quot; <span class="operator">=</span> &quot;elasticsearch&quot;,</span><br><span class="line">    &quot;host&quot; <span class="operator">=</span> &quot;http://es_ip:es_port(ä¸€èˆ¬æ˜¯9200)&quot;,</span><br><span class="line">    &quot;index&quot; <span class="operator">=</span> &quot;test&quot;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4><span id="es-åˆ›å»º-test-ç´¢å¼•">ES åˆ›å»º test ç´¢å¼•</span></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X PUT &quot;http://es_ip:es_port/test&quot; -H &#x27;Content-Type: application/json&#x27; -d &#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    &quot;properties&quot;: &#123;</span><br><span class="line">      &quot;id&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;long&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;k1&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;long&quot;,</span><br><span class="line">        &quot;index&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;k3&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;text&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;k4&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;text&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;k5&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;float&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;k2&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;date&quot;,</span><br><span class="line">        &quot;format&quot;: &quot;yyyy-MM-dd&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<h4><span id="es-æ·»åŠ æ•°æ®">ES æ·»åŠ æ•°æ®</span></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X POST &quot;http://es_ip:es_port/test/_doc&quot; -H &#x27;Content-Type: application/json&#x27; -d &#x27;&#123;</span><br><span class="line">  &quot;id&quot;: 1001,</span><br><span class="line">  &quot;k1&quot;: 100,</span><br><span class="line">  &quot;k2&quot;: &quot;2020-01-01&quot;,</span><br><span class="line">  &quot;k3&quot;: &quot;Trying&quot;,</span><br><span class="line">  &quot;k4&quot;: &quot;Trying out Elasticsearch&quot;,</span><br><span class="line">  &quot;k5&quot;: 10</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>æ•°æ®æ·»åŠ æˆåŠŸåï¼Œåœ¨mysqlå®¢æˆ·ç«¯è¿æ¥dorisæŸ¥è¯¢ESæ•°æ®</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> es_table;</span><br></pre></td></tr></table></figure>

<img data-src="/2024/05/07/doris-on-es/doris1.png" class>

<h4><span id="es-æ‰¹é‡æ·»åŠ æ•°æ®">ES æ‰¹é‡æ·»åŠ æ•°æ®</span></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -X POST &quot;http://es_ip:es_port/_bulk&quot; -H &#x27;Content-Type: application/json&#x27; -d &#x27;</span><br><span class="line">&#123;&quot;index&quot;:&#123;&quot;_index&quot;:&quot;test&quot;&#125;&#125;</span><br><span class="line">&#123; &quot;id&quot;: &quot;1&quot;, &quot;k1&quot; : 100, &quot;k2&quot;: &quot;2020-01-01&quot;, &quot;k3&quot;: &quot;Trying out Elasticsearch&quot;, &quot;k4&quot;: &quot;Trying out Elasticsearch&quot;, &quot;k5&quot;: 10.0&#125;</span><br><span class="line">&#123;&quot;index&quot;:&#123;&quot;_index&quot;:&quot;test&quot;&#125;&#125;</span><br><span class="line">&#123; &quot;id&quot;: &quot;2&quot;, &quot;k1&quot; : 100, &quot;k2&quot;: &quot;2020-01-01&quot;, &quot;k3&quot;: &quot;Trying out Doris&quot;, &quot;k4&quot;: &quot;Trying out Doris&quot;, &quot;k5&quot;: 10.0&#125;</span><br><span class="line">&#123;&quot;index&quot;:&#123;&quot;_index&quot;:&quot;test&quot;&#125;&#125;</span><br><span class="line">&#123; &quot;id&quot;: &quot;3&quot;, &quot;k1&quot; : 100, &quot;k2&quot;: &quot;2020-01-01&quot;, &quot;k3&quot;: &quot;Doris On ES&quot;, &quot;k4&quot;: &quot;Doris On ES&quot;, &quot;k5&quot;: 10.0&#125;</span><br><span class="line">&#123;&quot;index&quot;:&#123;&quot;_index&quot;:&quot;test&quot;&#125;&#125;</span><br><span class="line">&#123; &quot;id&quot;: &quot;4&quot;, &quot;k1&quot; : 100, &quot;k2&quot;: &quot;2020-01-01&quot;, &quot;k3&quot;: &quot;Doris&quot;, &quot;k4&quot;: &quot;Doris&quot;, &quot;k5&quot;: 10.0&#125;</span><br><span class="line">&#123;&quot;index&quot;:&#123;&quot;_index&quot;:&quot;test&quot;&#125;&#125;</span><br><span class="line">&#123; &quot;id&quot;: &quot;5&quot;, &quot;k1&quot; : 100, &quot;k2&quot;: &quot;2020-01-01&quot;, &quot;k3&quot;: &quot;ES&quot;, &quot;k4&quot;: &quot;ES&quot;, &quot;k5&quot;: 10.0&#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure>

<p>æ•°æ®æ·»åŠ æˆåŠŸåï¼Œåœ¨mysqlå®¢æˆ·ç«¯è¿æ¥dorisæŸ¥è¯¢ESæ•°æ®</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> es_table;</span><br></pre></td></tr></table></figure>

<img data-src="/2024/05/07/doris-on-es/doris2.png" class>

<p>åœ¨dorisä¸­æ‰§è¡Œæ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> es_table <span class="keyword">where</span> esquery(k4, <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;match&quot;: &#123;</span></span><br><span class="line"><span class="string">    &quot;k4&quot;: &quot;elasticsearch&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &#125;&#x27;</span>);</span><br><span class="line"># è¦è‡ªå·±å¤„ç†ä¸€ä¸‹æ¢è¡Œ</span><br></pre></td></tr></table></figure>

<img data-src="/2024/05/07/doris-on-es/doris3.png" class>

<h2><span id="é¢„æœŸåº”ç”¨">é¢„æœŸåº”ç”¨</span></h2><p>doris å’Œ ES éƒ½æ˜¯ä½œè€…å®è®­è¯¾ç¨‹ä¸­æ‰€å¼€å‘é¡¹ç›®çš„å…¶ä¸­ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ä½œè€…å¹¶æœªå­¦ä¼šå¦‚ä½•åº”ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œæœ¬æ–‡åªæ˜¯ä¸€æ¬¡è°ƒç ”</p>
]]></content>
      <categories>
        <category>å­¦ä¹ </category>
        <category>ç»¼åˆå®è®­</category>
      </categories>
  </entry>
  <entry>
    <title>ä»¥å¤ªåŠç§é“¾éƒ¨ç½²æ™ºèƒ½åˆçº¦</title>
    <url>/2024/03/30/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/</url>
    <content><![CDATA[<h2><span id="ç¼–å†™æ™ºèƒ½åˆçº¦">ç¼–å†™æ™ºèƒ½åˆçº¦</span></h2><p>ä»¥ä¸‹ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„å­˜å‚¨æ™ºèƒ½åˆçº¦ï¼Œä¸æ˜¯ <em>NFT</em> æ™ºèƒ½åˆçº¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: GPL-3.0</span><br><span class="line">pragma solidity &gt;=0.4.16 &lt;0.9.0;</span><br><span class="line"></span><br><span class="line">contract SimpleStorage &#123;</span><br><span class="line">    uint storedData;</span><br><span class="line"></span><br><span class="line">    function set(uint x) public &#123;</span><br><span class="line">        storedData = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function get() public view returns (uint) &#123;</span><br><span class="line">        return storedData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function add(uint x) public &#123;</span><br><span class="line">        uint y = x + storedData;</span><br><span class="line">        storedData = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2><span id="ç¼–è¯‘æ™ºèƒ½åˆçº¦">ç¼–è¯‘æ™ºèƒ½åˆçº¦</span></h2><p>åœ¨ <em>Remix</em> ä¸Šcompileåˆšåˆšå†™å¥½çš„æ™ºèƒ½åˆçº¦ï¼Œç„¶åä¼šå‡ºç°ä»¥ä¸‹ç•Œé¢ï¼ŒABI å’Œ Bytecode å¾…ä¼šéœ€è¦ç”¨åˆ°  </p>
<img data-src="/2024/03/30/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/image.png" class>

<h2><span id="éƒ¨ç½²æ™ºèƒ½åˆçº¦">éƒ¨ç½²æ™ºèƒ½åˆçº¦</span></h2><p>è¿™é‡Œå®ç°ä¸¤ç§éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯åœ¨ geth æ§åˆ¶å°éƒ¨ç½²ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ Go å®ç°</p>
<h3><span id="geth-æ§åˆ¶å°éƒ¨ç½²">geth æ§åˆ¶å°éƒ¨ç½²</span></h3><p>1ã€è§£é”è´¦æˆ·<br>24-4-15 æ›´æ–°: personal.unlockAccount è¢«å¼ƒç”¨ï¼Œä¸”æ–°æ–¹æ³•ä¸éœ€è¦</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">personal.unlockAccount(eth.coinbase)</span><br></pre></td></tr></table></figure>

<p>2ã€å½•å…¥æ™ºèƒ½åˆçº¦çš„ bytecode</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var code = &quot;0x&quot; +  &quot;608060405234801561001057600080fd5b50610218806100206000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80631003e2d21461004657806360fe47b1146100625780636d4ce63c1461007e575b600080fd5b610060600480360381019061005b9190610106565b61009c565b005b61007c60048036038101906100779190610106565b6100b8565b005b6100866100c2565b6040516100939190610142565b60405180910390f35b60008054826100ab919061018c565b9050806000819055505050565b8060008190555050565b60008054905090565b600080fd5b6000819050919050565b6100e3816100d0565b81146100ee57600080fd5b50565b600081359050610100816100da565b92915050565b60006020828403121561011c5761011b6100cb565b5b600061012a848285016100f1565b91505092915050565b61013c816100d0565b82525050565b60006020820190506101576000830184610133565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610197826100d0565b91506101a2836100d0565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156101d7576101d661015d565b5b82820190509291505056fea2646970667358221220cbc928270d8a2ea9cd6f6c4b97793588c6a480da09388d19c6fb1f05d75e718464736f6c634300080f0033&quot;</span><br></pre></td></tr></table></figure>

<p>3ã€å½•å…¥æ™ºèƒ½åˆçº¦çš„ ABI<br>ABI éœ€è¦å…ˆç»è¿‡å‹ç¼©è½¬ä¹‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var abi=JSON.parse(&#x27;[&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;x\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;add\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;get\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;x\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;set\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;]&#x27;)</span><br></pre></td></tr></table></figure>

<p>4ã€éƒ¨ç½²æ™ºèƒ½åˆçº¦</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var gas = eth.estimateGas(&#123;data: code&#125;) //å…ˆä¼°ç®—éœ€è¦å¤šå¤§çš„gas</span><br><span class="line">//åˆ›å»ºæ™ºèƒ½åˆçº¦ç±»</span><br><span class="line">var myContract = eth.contract(abi)</span><br><span class="line">//åˆ›å»ºéƒ¨ç½²æ™ºèƒ½åˆçº¦çš„äº¤æ˜“</span><br><span class="line">var deploymentTx = &#123;from: &#x27;0x890fb1799fe7fa4b8e01ccf343e088d946fcd556&#x27;, data: code, gas: gas&#125;;</span><br><span class="line">//åˆ›å»ºåˆçº¦å®ä¾‹</span><br><span class="line">var myContractInstance = myContract.new(deploymentTx)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºæˆåŠŸåï¼Œæ§åˆ¶å°ä¸­ä¼šå‡ºç°ä»¥ä¸‹æç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO [04-15|11:43:39.794] Submitted contract creation              hash=0xf2503d2c684283a9afb6ab47233a4f2fb01f156135c429586b924a0756d0a8d8 from=0x890fb1799Fe7fA4b8E01Ccf343e088D946fCd556 nonce=1 contract=0xa5D8278723e8808151c2066198619fc02818b526 value=0</span><br></pre></td></tr></table></figure>

<p>åœ¨æ§åˆ¶å°è¾“å…¥ myContractInstanceï¼Œèƒ½è·å¾—ä»¥ä¸‹ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  abi: [&#123;</span><br><span class="line">      inputs: [&#123;...&#125;],</span><br><span class="line">      name: &quot;add&quot;,</span><br><span class="line">      outputs: [],</span><br><span class="line">      stateMutability: &quot;nonpayable&quot;,</span><br><span class="line">      type: &quot;function&quot;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">      inputs: [],</span><br><span class="line">      name: &quot;get&quot;,</span><br><span class="line">      outputs: [&#123;...&#125;],</span><br><span class="line">      stateMutability: &quot;view&quot;,</span><br><span class="line">      type: &quot;function&quot;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">      inputs: [&#123;...&#125;],</span><br><span class="line">      name: &quot;set&quot;,</span><br><span class="line">      outputs: [],</span><br><span class="line">      stateMutability: &quot;nonpayable&quot;,</span><br><span class="line">      type: &quot;function&quot;</span><br><span class="line">  &#125;],</span><br><span class="line">  address: undefined,</span><br><span class="line">  transactionHash: &quot;0x727fb18ce42f5f368a349908eee34eb36ae1e3c7fd2cb4f280db8b0ed44de6de&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>24-4-10 æ›´æ–°: åœ¨è¾“å…¥ç¬¬ä¸€è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œå‘ç°æŠ¥ä»¥ä¸‹é”™è¯¯ã€‚åŸå› : PUSH0 opcode æ˜¯åœ¨ solidity 0.8.20 è¢«å¼•å…¥çš„ï¼Œè€Œç§é“¾ç”±äºè¿˜æœªåˆ° Shanghai ç¡¬åˆ†å‰ï¼Œæ­¤æ—¶è¿˜ä¸æ”¯æŒ PUSH0 opcode</p>
<img data-src="/2024/03/30/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/bug1.png" class>

<p>5ã€å¯åŠ¨èŠ‚ç‚¹æŒ–çŸ¿<br>å› ä¸ºåœ¨ç§é“¾ä¸Šæ²¡æœ‰å…¶ä»–èŠ‚ç‚¹æŒ–çŸ¿ï¼Œè€Œéƒ¨ç½²æ™ºèƒ½åˆçº¦ä¹Ÿæ˜¯ä¸€ç¬”äº¤æ˜“ï¼Œæ‰€ä»¥éœ€è¦èŠ‚ç‚¹æŒ–çŸ¿ä½¿è¿™ç¬”äº¤æ˜“æ‰“åŒ…ä¸Šé“¾ï¼Œæ™ºèƒ½åˆçº¦æ‰éƒ¨ç½²æˆåŠŸ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">miner.start()</span><br><span class="line">miner.stop()</span><br></pre></td></tr></table></figure>

<p>6ã€è°ƒç”¨æ™ºèƒ½åˆçº¦<br>ç¬¬ä¸€ç§è°ƒç”¨ç”¨äºéœ€è¦èŠ±è´¹ gas çš„å‡½æ•°ï¼Œç¬¬äºŒç§åˆ™ç”¨äºä¸éœ€è¦èŠ±è´¹ gas çš„å‡½æ•°ï¼Œç¬¬ä¸€ç§è°ƒç”¨ç”±äºä¹Ÿæ˜¯ä¸€ç¬”äº¤æ˜“ï¼Œæ‰€ä»¥éœ€è¦èŠ‚ç‚¹æŒ–çŸ¿ä¸Šé“¾</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">contract.function_name.sendTransaction(&quot;parameter_1&quot;,&quot;parameter_2&quot;,&#123;from:&quot;account_address&quot;&#125;)</span><br><span class="line">contract.function_name.call(&quot;parameter_1&quot;,&quot;parameter_2&quot;)</span><br></pre></td></tr></table></figure>

<h3><span id="ä½¿ç”¨-go-éƒ¨ç½²">ä½¿ç”¨ Go éƒ¨ç½²</span></h3><p>è¿™é‡Œæƒ³è¦å®ç°çš„æ•ˆæœæ˜¯ï¼Œæ¯æ¬¡æ–°åˆ›å»ºä¸€ä¸ªè´¦æˆ·çš„æ—¶å€™ï¼Œéƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²è¯¥æ™ºèƒ½åˆçº¦ï¼Œè¿™ä¸€åŠŸèƒ½ç”¨ Go å®ç°ã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;context&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/ecdsa&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">    <span class="string">&quot;math/big&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;strings&quot;</span></span><br><span class="line">    <span class="string">&quot;bytes&quot;</span></span><br><span class="line">    <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/ethereum/go-ethereum/accounts/abi&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/ethereum/go-ethereum/accounts/abi/bind&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/ethereum/go-ethereum/common&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/ethereum/go-ethereum/crypto&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ™ºèƒ½åˆçº¦çš„ABIå¤åˆ¶åˆ°è¿™é‡Œï¼Œéœ€è¦å…ˆç»è¿‡å‹ç¼©è½¬ä¹‰</span></span><br><span class="line"><span class="keyword">var</span> contractABI = <span class="string">&quot;</span></span><br><span class="line"><span class="string">[&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;x\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;add\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;get\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;x\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;set\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Geth èŠ‚ç‚¹çš„ HTTP-RPC åœ°å€</span></span><br><span class="line">    rpcURL := <span class="string">&quot;http://localhost:8545&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ–°è´¦æˆ·çš„å¯†ç </span></span><br><span class="line">    newPassword := <span class="string">&quot;your_password&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€  JSON-RPC è¯·æ±‚ä½“ï¼Œåˆ›å»ºæ–°è´¦æˆ·</span></span><br><span class="line">    payload := strings.NewReader(<span class="string">`&#123;&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;personal_newAccount&quot;,&quot;params&quot;:[&quot;`</span> + newPassword + <span class="string">`&quot;],&quot;id&quot;:1&#125;`</span>)</span><br><span class="line">    resp, err := http.Post(rpcURL, <span class="string">&quot;application/json&quot;</span>, payload)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£æåˆ›å»ºæ–°è´¦æˆ·çš„å“åº”</span></span><br><span class="line">    <span class="keyword">var</span> newAccountResp <span class="keyword">struct</span> &#123;</span><br><span class="line">        Result <span class="type">string</span> <span class="string">`json:&quot;result&quot;`</span></span><br><span class="line">        Error  *<span class="keyword">struct</span> &#123;</span><br><span class="line">            Message <span class="type">string</span> <span class="string">`json:&quot;message&quot;`</span></span><br><span class="line">        &#125; <span class="string">`json:&quot;error&quot;`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> err := json.NewDecoder(resp.Body).Decode(&amp;newAccountResp); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> newAccountResp.Error != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalf(<span class="string">&quot;Failed to create new account: %s&quot;</span>, newAccountResp.Error.Message)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£ææ–°è´¦æˆ·åœ°å€</span></span><br><span class="line">    newAccountAddress := common.HexToAddress(newAccountResp.Result)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;New account address: %s\n&quot;</span>, newAccountAddress.Hex())</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿æ¥åˆ°æœ¬åœ°çš„ Geth èŠ‚ç‚¹</span></span><br><span class="line">    client, err := rpc.Dial(rpcURL)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> client.Close()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å½“å‰ gas ä»·æ ¼</span></span><br><span class="line">    <span class="keyword">var</span> gasPrice *big.Int</span><br><span class="line">    <span class="keyword">if</span> err := client.CallContext(context.Background(), &amp;gasPrice, <span class="string">&quot;eth_gasPrice&quot;</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éƒ¨ç½²æ™ºèƒ½åˆçº¦</span></span><br><span class="line">    auth := bind.NewKeyedTransactor(newAccountAddress.Hex())</span><br><span class="line">    auth.Value = big.NewInt(<span class="number">0</span>)           <span class="comment">// éƒ¨ç½²æ—¶å‘é€çš„ä»¥å¤ªå¸æ•°é‡</span></span><br><span class="line">    auth.GasLimit = <span class="type">uint64</span>(<span class="number">3000000</span>)      <span class="comment">// æŒ‡å®š gas é™åˆ¶</span></span><br><span class="line">    auth.GasPrice = gasPrice              <span class="comment">// ä½¿ç”¨å½“å‰ gas ä»·æ ¼</span></span><br><span class="line">    input := <span class="string">&quot;0x&quot;</span> + <span class="string">&quot;6080604052348015600e575f80fd5b506101e48061001c5f395ff3fe608060405234801561000f575f80fd5b506004361061003f575f3560e01c80631003e2d21461004357806360fe47b11461005f5780636d4ce63c1461007b575b5f80fd5b61005d600480360381019061005891906100fb565b610099565b005b610079600480360381019061007491906100fb565b6100b3565b005b6100836100bc565b6040516100909190610135565b60405180910390f35b5f8054826100a7919061017b565b9050805f819055505050565b805f8190555050565b5f8054905090565b5f80fd5b5f819050919050565b6100da816100c8565b81146100e4575f80fd5b50565b5f813590506100f5816100d1565b92915050565b5f602082840312156101105761010f6100c4565b5b5f61011d848285016100e7565b91505092915050565b61012f816100c8565b82525050565b5f6020820190506101485f830184610126565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610185826100c8565b9150610190836100c8565b92508282019050808211156101a8576101a761014e565b5b9291505056fea26469706673582212209645cec1c57b3e0ea64b23d942988cdc634242f2c015ac31b32aa6ddac78ade164736f6c63430008190033&quot;</span></span><br><span class="line">    address, tx, _, err := bind.DeployContract(auth, abi.JSON(contractABI), common.FromHex(input), client)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;Contract address: %s\n&quot;</span>, address.Hex())</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…æ™ºèƒ½åˆçº¦éƒ¨ç½²å®Œæˆ</span></span><br><span class="line">    _, err = bind.WaitDeployed(context.Background(), client, tx)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// // è¾“å‡ºæ–°åˆ›å»ºçš„è´¦æˆ·åœ°å€å’Œç§é’¥</span></span><br><span class="line">    <span class="comment">// fmt.Printf(&quot;New account address: %s\n&quot;, newAccountAddress.Hex())</span></span><br><span class="line">    <span class="comment">// fmt.Printf(&quot;Private key: %x\n&quot;, crypto.FromECDSA(privateKey))</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="è°ƒç”¨æ™ºèƒ½åˆçº¦">è°ƒç”¨æ™ºèƒ½åˆçº¦</span></h2><h3><span id="å®‰è£…-abigen-å·¥å…·">å®‰è£… abigen å·¥å…·</span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">go get -u github.com/ethereum/go-ethereum</span><br></pre></td></tr></table></figure>

<h3><span id="ç”Ÿæˆåˆçº¦ç»‘å®šä»£ç ">ç”Ÿæˆåˆçº¦ç»‘å®šä»£ç </span></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">abigen --sol SimpleStorage.sol --pkg main --out SimpleStorage.go</span><br></pre></td></tr></table></figure>

<h3><span id="åœ¨-main-å‡½æ•°ä¸­æ·»åŠ æ™ºèƒ½åˆçº¦ç»‘å®šå’Œè°ƒç”¨æ™ºèƒ½åˆçº¦">åœ¨ main å‡½æ•°ä¸­æ·»åŠ æ™ºèƒ½åˆçº¦ç»‘å®šå’Œè°ƒç”¨æ™ºèƒ½åˆçº¦</span></h3><p>NewSimpleStorage ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†å‡½æ•°ï¼Œè€Œæ˜¯åœ¨ä½¿ç”¨ abigen æ—¶åˆ›å»ºçš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåˆ›å»ºæ™ºèƒ½åˆçº¦çš„ç»‘å®šå¯¹è±¡</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ™ºèƒ½åˆçº¦ç»‘å®š</span></span><br><span class="line">contract, err := NewSimpleStorage(address, client)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æ™ºèƒ½åˆçº¦çš„ get å‡½æ•°</span></span><br><span class="line">result, err := contract.Get(<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Result of get function: %s\n&quot;</span>, result.String())</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç§‘ç ”</category>
      </categories>
  </entry>
  <entry>
    <title>æ­å»ºä»¥å¤ªåŠç§é“¾</title>
    <url>/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/</url>
    <content><![CDATA[<p>è¿™é‡Œçš„å‘½ä»¤ä»¥ Linux ç³»ç»Ÿä¸ºå‡†ï¼Œä½†æ˜¯åœ¨ Windows ç³»ç»Ÿä¸‹ä¹Ÿæ˜¯åŸºæœ¬ç›¸åŒçš„</p>
<span id="more"></span>

<h2><span id="é…ç½®goç¯å¢ƒ">é…ç½®Goç¯å¢ƒ</span></h2><p>1ã€é¦–å…ˆåˆ‡æ¢åˆ°ç®¡ç†å‘˜èº«ä»½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo -s</span><br></pre></td></tr></table></figure>

<p>2ã€ä¸‹è½½å®˜â½…çš„ go è¯­â¾”ç¼–è¯‘å™¨å‹ç¼©åŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://go.dev/dl/go1.21.3.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>

<p>3ã€è§£å‹ç¼©åˆšä¸‹è½½çš„æ–°ç‰ˆæœ¬å¹¶æ”¾ç½®åˆ°åˆé€‚çš„ä½ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -C /usr/local -xzf go1.21.3.linux-amd64.tar.gz</span><br><span class="line">ï¼ˆå¦‚æœæœ‰æ—§ç‰ˆæœ¬ï¼Œå…ˆè¾“å…¥ `rm -rf /usr/local/go` ç§»é™¤ï¼‰</span><br></pre></td></tr></table></figure>

<p>4ã€è®¾å®šç¯å¢ƒå˜é‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/go/bin</span><br></pre></td></tr></table></figure>
<p>è¯•è¯•çœ‹æ˜¯å¦æ­£å¸¸ï¼ˆåº”è¯¥ä¼šçœ‹åˆ°ç‰ˆæœ¬å·ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go version</span><br></pre></td></tr></table></figure>

<h2><span id="æ„å»ºgeth">æ„å»ºgeth</span></h2><p>1ã€ä¸‹è½½git</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install git</span><br></pre></td></tr></table></figure>

<p>2ã€å…‹éš†ä»¥å¤ªåŠæºç <br>è¿™ä¸€æ­¥å¾ˆå¯èƒ½è¿ä¸ä¸Šgithubï¼Œæ²¡ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Œå¤šè¯•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/ethereum/go-ethereum.git</span><br></pre></td></tr></table></figure>

<p>3ã€è¿›å…¥ethereumæ‰€åœ¨æ–‡ä»¶å¤¹<br>24-04-09æ›´æ–°: ç°åœ¨ç›´æ¥å…‹éš†ä»¥å¤ªåŠä»“åº“ä¸‹è½½çš„ geth ç‰ˆæœ¬æ˜¯ 1.14.0-unstableï¼Œæ‰€ä»¥åœ¨è¿è¡Œé“¾çš„æ—¶å€™å°±ä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œåº”è¯¥è¦å…ˆåˆ‡æ¢åˆ° 1.13ç‰ˆæœ¬</p>
<img data-src="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/use_fatal.png" class>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd go-ethereum</span><br><span class="line">git checkout release/1.13</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>

<p>4ã€ç¼–è¯‘geth</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make geth</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‘ç°ä¸‹è½½å¾ˆæ…¢ï¼Œå¯ä»¥ç»ˆæ­¢æ‰ï¼Œè®¾ç½®ä»£ç†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export GOPROXY=https://goproxy.io,direct</span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½å®Œæˆï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç”»é¢</p>
<img data-src="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/%E4%B8%8B%E8%BD%BD%E5%AE%8C%E6%88%90.png" class>

<p>5ã€è¿›â¼Šâ½¬å½•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd build/bin</span><br></pre></td></tr></table></figure>

<p>6ã€å¯åŠ¨ä¸»ç¨‹åºï¼Œè¿æ¥ä¸»â½¹å¹¶åŒæ­¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./geth</span><br></pre></td></tr></table></figure>

<p>7ã€é…ç½®ç¯å¢ƒå˜é‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nano ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯¥æ–‡ä»¶æœ€åæ·»åŠ ä»¥ä¸‹è¯­å¥ï¼Œè¦æ³¨æ„æ›¿æ¢æˆè‡ªå·±ä¸»æœºçš„gethæ‰€åœ¨è·¯å¾„ (å‰é¢çš„~ä¹Ÿè¦ä¿®æ”¹)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PATH=$PATH:~/Desktop/go-ethereum/build/bin</span><br></pre></td></tr></table></figure>
<p>é€€å‡ºåè¾“å…¥ä»¥ä¸‹è¯­å¥è®©æ›´æ”¹ç”Ÿæ•ˆï¼Œå¹¶æ£€æµ‹æ˜¯å¦é…ç½®æˆåŠŸ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.bashrc</span><br><span class="line">geth version</span><br></pre></td></tr></table></figure>

<h2><span id="æ­å»ºç§é“¾">æ­å»ºç§é“¾</span></h2><p>1ã€åˆ›é€ é…ç½®æ–‡ä»¶<br>åœ¨ä¸åŒäºä»¥å¤ªåŠæºç çš„æ–‡ä»¶è·¯å¾„ä¸‹åˆ›ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œ.jsonæ–‡ä»¶ï¼Œå‘½åä¸ºgenesis.jsonï¼Œå¯ä»¥åœ¨æ¡Œé¢åˆ›å»º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// æ³¨æ„è¦è®°å¾—åˆ‡æ¢åˆ°ç®¡ç†å‘˜æ¨¡å¼ï¼Œæ‰èƒ½åˆ›å»ºæ–‡ä»¶å¤¹</span><br><span class="line">sudo -s</span><br><span class="line">mkdir ./project</span><br><span class="line">mkdir ./project/MyChain</span><br><span class="line">vim ./project/MyChain/genesis.json</span><br><span class="line">// ä¿®æ”¹å®Œè¾“å…¥:wqé€€å‡ºvim</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ª json æ–‡ä»¶ä¸‹ï¼Œé…ç½®è¿™ä¸ªç§é“¾çš„å‚æ•°<br>è¿™é‡Œä½¿ç”¨çš„å…±è¯†æœºåˆ¶æ˜¯ <a href="https://geth.ethereum.org/docs/tools/clef/clique-signing">Clique</a>ï¼Œ</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;chainId&quot;</span><span class="punctuation">:</span> <span class="number">12345</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;homesteadBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eip150Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eip155Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eip158Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;byzantiumBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;constantinopleBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;petersburgBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;istanbulBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;berlinBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clique&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;period&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;epoch&quot;</span><span class="punctuation">:</span> <span class="number">30000</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;difficulty&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;gasLimit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extradata&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000890fb1799fe7fa4b8e01ccf343e088d946fcd5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;890fb1799fe7fa4b8e01ccf343e088d946fcd556&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300000&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;14c6ead33b265da463eef7367798ade6aa8e9d12&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;400000&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2ã€åˆå§‹åŒ–é“¾</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir ./project/MyChain/ init ./project/MyChain/genesis.json</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸåä¼šå‡ºç°ä»¥ä¸‹æç¤º (å¯èƒ½ä¼šæœ‰ Error ä¿¡æ¯ï¼Œå¯ä»¥å¿½ç•¥)</p>
<img data-src="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/init.png" class>

<p>å‡å¦‚å‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œå¯ä»¥åˆ é™¤ .&#x2F;project&#x2F;MyChain&#x2F; ç›®å½•ä¸‹æ–°ç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåªä¿ç•™ .json æ–‡ä»¶</p>
<img data-src="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/init_fatal.png" class>


<p>3ã€å¯ç”¨é“¾<br>æ­¤å¤„å¯ç”¨ç§é“¾ï¼Œå¹¶ä¸”å¼€å¯RPCæ¥å£</p>
<p>24-04-09 æ›´æ–°: åœ¨å®éªŒçš„æ—¶å€™å‘ç°ï¼Œåœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ geth ä¸­ï¼Œrpc ç›¸å…³çš„æŒ‡ä»¤å·²ç»ä¸ç”¨ â€“rpcxxxï¼Œæ”¹ä¸º â€“http.xxx</p>
<ul>
<li>httpï¼šå¼€å¯ RPC æ¥å£</li>
<li>http.portï¼šæŒ‡å®šç«¯å£</li>
<li>http.apiï¼šå¼€å¯çš„RPC API</li>
<li>http.corsdomainï¼šè·¨åŸŸè¯·æ±‚ï¼Œâ€*â€ä¸ºå…è®¸æ‰€æœ‰æ¥æºçš„è·¨åŸŸè¯·æ±‚<br>è€Œä¸”ï¼Œdb æ¥å£ä¹Ÿå·²ç»è¢«å¼ƒç”¨ï¼Œ<br>æ‰€ä»¥ï¼Œè¯¥å‘½ä»¤å°†å˜ä¸º</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir ./project/MyChain/ --identity &quot;MyETH&quot; --http --http.port 8545  --http.api &quot;eth,net,web3,personal&quot; --http.corsdomain &quot;*&quot; --networkid 12345 console</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸåå°†å‡ºç°ä»¥ä¸‹é¡µé¢</p>
<img data-src="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/success.png" class>

<hr>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir ./project/MyChain/ --identity &quot;MyETH&quot; --rpc --rpcport 8545  --rpcapi &quot;db,eth,net,web3,personal&quot; --rpccorsdomain &quot;*&quot; --networkid 15 console</span><br></pre></td></tr></table></figure>

<ul>
<li>identity â€œMyETHâ€ï¼šèŠ‚ç‚¹èº«ä»½æ ‡è¯†</li>
<li>rpcï¼šå¼€å¯ RPC æ¥å£</li>
<li>rpcportï¼šæŒ‡å®šç«¯å£</li>
<li>rpcapiï¼šå¼€å¯çš„RPC API</li>
<li>rpccorsdomainï¼šè·¨åŸŸè¯·æ±‚ï¼Œâ€*â€ä¸ºå…è®¸æ‰€æœ‰æ¥æºçš„è·¨åŸŸè¯·æ±‚</li>
<li>networkidï¼šç½‘ç»œæ ‡è¯†ç¬¦ï¼Œç”¨äºè¿ä¸Šç§é“¾ï¼Œnetworkidæ˜¯åœ¨genesis.jsonä¸­ç¡®å®šçš„<br>consoleï¼šæ‰“å¼€gethæ§åˆ¶å°ï¼Œç”¨äºåˆ›å»ºèŠ‚ç‚¹å’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦</li>
</ul>
<h2><span id="åˆ›å»ºç”¨æˆ·å¹¶æŒ–çŸ¿">åˆ›å»ºç”¨æˆ·å¹¶æŒ–çŸ¿</span></h2><p>1ã€åœ¨æ§åˆ¶å°ä¸­åˆ›å»ºç”¨æˆ·</p>
<p>24-04-09 æ›´æ–°: å®éªŒä¸­å‘ç° personal å·²ç»è¢«å¼ƒç”¨ï¼Œgeth æ§åˆ¶å°ä¼¼ä¹ä¹Ÿæ²¡æœ‰å…¶ä»–æ–¹æ³•æ–°åˆ›å»ºè´¦æˆ·ã€‚å®˜æ–¹ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å’Œ geth è§£è€¦çš„ <a href="https://geth.ethereum.org/docs/tools/clef/introduction">clef</a> åˆ›å»ºè´¦å·<br>ä¸ªäººè®¤ä¸ºï¼Œé€šè¿‡å¦å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºè´¦æˆ·ä¼šæ›´æ–¹ä¾¿</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth account new --datadir ./project/MyChain/</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">personal.newAccount(&quot;123456&quot;)//æ‹¬å·å†…æ˜¯è‡ªå®šä¹‰çš„å¯†ç ï¼Œè¿”å›â€œ0x......â€ä¸ºåˆ›å»ºå‡ºæ¥çš„ç”¨æˆ·çš„åœ°å€ã€‚ä¹‹åè¦ç”¨åˆ°ã€‚</span><br><span class="line">eth.accounts //æŸ¥è¯¢ç”¨æˆ·</span><br><span class="line">eth.getBalance(eth.accounts[0]) // é€šè¿‡eth.accounts[0]æŸ¥è¯¢è´¦æˆ·ä½™é¢ã€‚è‹¥ç§é“¾ä¸Šæœ‰å¤šä¸ªç”¨æˆ·ï¼Œç¬¬ä¸€ä¸ªç”¨æˆ·ä¸ºeth.accounts[0]ï¼Œç¬¬äºŒä¸ªä¸ºeth.accounts[1]ã€‚ä»¥æ­¤ç±»æ¨ã€‚</span><br><span class="line">eth.getBalance(&quot;0x......è´¦æˆ·åœ°å€&quot;) // é€šè¿‡åœ°å€æŸ¥è¯¢å‡ºè´¦æˆ·ä½™é¢</span><br></pre></td></tr></table></figure>

<p>2ã€å¼€å§‹æŒ–çŸ¿</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eth.coinbase // ç¬¬ä¸€ç§æŸ¥çœ‹çŸ¿å·¥çš„è´¦æˆ·åœ°å€çš„æ–¹å¼ï¼Œè¯¥åœ°å€é»˜è®¤ä¸ºç¬¬ä¸€ä¸ªè´¦æˆ·åœ°å€</span><br><span class="line">web3.eth.coinbase // ç¬¬äºŒç§æŸ¥çœ‹æ–¹å¼çŸ¿å·¥åœ°å€çš„æ–¹å¼</span><br><span class="line">miner.setEtherbase(eth.accounts[0]) </span><br><span class="line">//è®¾ç½®çŸ¿å·¥ç”¨æˆ·</span><br></pre></td></tr></table></figure>

<p>3ã€åœæ­¢æŒ–çŸ¿<br>æŒ–ä¸€æ®µæ—¶é—´åï¼Œè´¦æˆ·å°±æœ‰é’±äº†ï¼Œå¯ä»¥éƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼ˆéƒ¨ç½²æ™ºèƒ½åˆçº¦éœ€è¦èŠ±é’±ï¼‰ï¼Œå¯ä»¥åœæ­¢æŒ–çŸ¿</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">miner.stop()</span><br><span class="line">eth.getBalance(eth.accounts[0])</span><br><span class="line">//å†æŸ¥è´¦æˆ·ï¼Œå‘ç°è‡ªå·±çªç„¶æœ‰é’±äº†ã€‚</span><br></pre></td></tr></table></figure>
<hr>
<p>24-04-15 æ›´æ–°: miner.start() å¿…é¡»å…ˆè§£é”è´¦æˆ·ï¼Œè€Œ personal.unlockAccount åœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ geth å·²ç»è¢«å¼ƒç”¨ï¼Œä¸è¿›è¡ŒæŒ–çŸ¿ä¼šå¯¼è‡´æ‰€æœ‰äº¤æ˜“éƒ½ä¸èƒ½ä¸Šé“¾ï¼ŒåŒ…æ‹¬æ™ºèƒ½åˆçº¦çš„éƒ¨ç½²</p>
<p>ç›®å‰çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œä¿®æ”¹ç§é“¾å¯åŠ¨è¯­å¥ï¼Œå°†æ‰€æœ‰å’Œ HTTP-RPC ç›¸å…³çš„å‚æ•°éƒ½åˆ å» (ä¸èƒ½ä¸ â€“unlock å¹¶å­˜)ï¼Œå¹¶æ·»åŠ  â€“unlock å‚æ•°ï¼Œåœ¨å¯åŠ¨é“¾çš„æ—¶å€™å°±è§£é”è´¦æˆ·ï¼Œä¹‹åçš„æ­¥éª¤å’Œä¹‹å‰ç›¸åŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir ./project/MyChain/ --unlock 0x890fb1799fe7fa4b8e01ccf343e088d946fcd556 console</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™æ ·ä¼šäº§ç”Ÿæ–°çš„é—®é¢˜ï¼Œå³æ— æ³•è¿œç¨‹è°ƒç”¨ geth æä¾›çš„ HTTP-RPC APIã€‚ç›®å‰æƒ³åˆ°çš„æ›²çº¿æ•‘å›½æ–¹æ³•æ˜¯ï¼Œä¸€éƒ¨åˆ†èŠ‚ç‚¹åªç”¨äºæŒ–çŸ¿ (ä»¥ä¸‹ç§°<em>æŒ–çŸ¿èŠ‚ç‚¹</em>)ï¼Œä¸€éƒ¨åˆ†èŠ‚ç‚¹ç”¨äºæä¾› HTTP-RPC API (ä»¥ä¸‹ç§°<em>é“¾æ¥èŠ‚ç‚¹</em>)ï¼Œä½†è¿˜æœªæµ‹è¯•è¿‡ï¼Œä¸çŸ¥æ˜¯å¦å¯è¡Œã€‚</p>
<hr>
<p>24-04-15 æ›´æ–°: è¿™ç§æ–¹æ³•ä¼¼ä¹æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ä¸ä¸€å®šç¬¦åˆå·¥ä¸šæ ‡å‡†ï¼Œå…·ä½“åšæ³•æ˜¯ï¼š<br>1ã€åˆ›å»ºæ–°ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir ./project/node2</span><br></pre></td></tr></table></figure>

<p>2ã€ç”¨åŸæ¥çš„ genesis.json åˆå§‹åŒ–é“¾</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir ./project/node2 init ./project/MyChain/genesis.json</span><br></pre></td></tr></table></figure>
<p>å¹¶æŠŠ .&#x2F;project&#x2F;MyChain&#x2F;keystore å¤åˆ¶åˆ° .&#x2F;project&#x2F;node2&#x2F;keystore</p>
<p>3ã€å¯ç”¨é“¾</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir ./project/node2 --http --http.port 8545 --http.corsdomain &quot;*&quot; --networkid 12345 --port 30305 --authrpc.port 8552 --ipcpath \\.\pipe\geth2.ipc</span><br></pre></td></tr></table></figure>

<p>4ã€æ·»åŠ èŠ‚ç‚¹<br>å¤åˆ¶é“¾æ¥èŠ‚ç‚¹çš„enodeå€¼ï¼Œå¹¶åœ¨æŒ–çŸ¿èŠ‚ç‚¹æ‰€åœ¨é“¾æ§åˆ¶å°ä¸­è¾“å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">admin.addPeer(&quot;enode://94d8388d7e97a8be1ee6005cc2bd81ad2b9f3e6580bec8a1305cac6271c5319b6a7e8273dfc82b0dab9c4c11ab71433f29ca30df3a4e327527a570ef1ed4bc28@127.0.0.1:30305&quot;)</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸåä¼šå‡ºç°ä»¥ä¸‹ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤æ¬¡ Looking for peers çš„ peercount å€¼å‘ç”Ÿäº†æ”¹å˜</p>
<img data-src="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/peercount_change.png" class>

<p>5ã€ä½¿ç”¨ node.js è¿œç¨‹åˆ›å»ºäº¤æ˜“<br>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è½¬è´¦äº¤æ˜“ä¾‹å­ï¼Œåœ¨ä»»æ„ä½ç½®åˆ›å»ºæ–‡ä»¶ tx.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Web3</span> = <span class="built_in">require</span>(<span class="string">&#x27;web3&#x27;</span>).<span class="property">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> web3 = <span class="keyword">new</span> <span class="title class_">Web3</span>(<span class="string">&#x27;http://localhost:8545&#x27;</span>);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> privateKey = <span class="string">&#x27;æ›¿æ¢æˆæ‚¨çš„ç§é’¥&#x27;</span>; <span class="comment">// ç§é’¥ï¼Œç¡®ä¿æ­£ç¡®å’Œå®‰å…¨åœ°å¤„ç†</span></span><br><span class="line">    <span class="keyword">var</span> tx = &#123;</span><br><span class="line">        <span class="attr">from</span>: <span class="string">&quot;0x890fb1799fe7fa4b8e01ccf343e088d946fcd556&quot;</span>,</span><br><span class="line">        <span class="attr">to</span>: <span class="string">&quot;0x4c6ead33b265da463eef7367798ade6aa8e9d12&quot;</span>,</span><br><span class="line">        <span class="attr">value</span>: web3.<span class="property">utils</span>.<span class="title function_">toWei</span>(<span class="number">1</span>, <span class="string">&quot;ether&quot;</span>), <span class="comment">// è½¬è´¦é‡‘é¢ï¼Œå•ä½ä¸ºä»¥å¤ª</span></span><br><span class="line">        <span class="attr">gas</span>: <span class="number">21000</span>, <span class="comment">// äº¤æ˜“çš„ gas é™é¢</span></span><br><span class="line">        <span class="attr">gasPrice</span>: web3.<span class="property">utils</span>.<span class="title function_">toWei</span>(<span class="number">10</span>, <span class="string">&quot;gwei&quot;</span>) <span class="comment">// gas ä»·æ ¼ï¼Œå•ä½ä¸º wei</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­¾åäº¤æ˜“</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> signedTx = <span class="keyword">await</span> web3.<span class="property">eth</span>.<span class="property">accounts</span>.<span class="title function_">signTransaction</span>(tx, privateKey);</span><br><span class="line">        <span class="keyword">const</span> receipt = <span class="keyword">await</span> web3.<span class="property">eth</span>.<span class="title function_">sendSignedTransaction</span>(signedTx.<span class="property">rawTransaction</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;äº¤æ˜“æ”¶æ®:&#x27;</span>, receipt);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç­¾åæˆ–å‘é€äº¤æ˜“å‡ºé”™:&#x27;</span>, err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>åœ¨æŒ–çŸ¿èŠ‚ç‚¹æ‰€åœ¨é“¾ç”¨ miner.start() ç­‰å¾…äº¤æ˜“æäº¤ä¸Šé“¾ (è¿™é‡Œä½œè€…ä¸ç¡®å®šæ˜¯å¦éœ€è¦åœ¨é“¾æ¥èŠ‚ç‚¹æ‰€åœ¨é“¾ç”¨ miner.start()ï¼Œæ­£å¸¸æ¥è¯´ä¼šå› ä¸ºæ²¡æœ‰è§£é”è´¦æˆ·è€Œå¤±è´¥ï¼Œä½†æ˜¯ä¼¼ä¹è¦è¿™æ ·åšæ‰èƒ½ä½¿ä¸¤ä¸ªèŠ‚ç‚¹åŒæ­¥)<br>åˆ›å»ºå¥½äº¤æ˜“åï¼Œå°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æäº¤äº¤æ˜“</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node tx.js</span><br></pre></td></tr></table></figure>
<p>ç„¶ååŒæ—¶åœ¨ä¸¤æ¡é“¾éƒ½æŸ¥è¯¢è´¦æˆ·ä½™é¢ï¼Œå‘ç°æ•°é¢ç›¸åŒï¼Œè¯´æ˜ä¸¤æ¡èŠ‚ç‚¹æˆåŠŸåŒæ­¥</p>
<h2><span id="éƒ¨ç½²æ™ºèƒ½åˆçº¦">éƒ¨ç½²æ™ºèƒ½åˆçº¦</span></h2><p>å‚ç…§ä¸‹ä¸€ç¯‡æ–‡ç« </p>
<a href="/2024/03/30/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE%E9%83%A8%E7%BD%B2%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" title="ä»¥å¤ªåŠç§é“¾éƒ¨ç½²æ™ºèƒ½åˆçº¦">ä»¥å¤ªåŠç§é“¾éƒ¨ç½²æ™ºèƒ½åˆçº¦</a>

<!-- åœ¨adminé‡Œé¢å¯ä»¥çœ‹åˆ°ç›‘å¬çš„ç«¯å£å·

personal.newAccount() åˆ›å»ºæ–°ç”¨æˆ·
è¾“å…¥å¯†ç ï¼Œè¿”å›å€¼æ˜¯è´¦æˆ·åœ°å€

personal.unlockAccount(eth.accounts[0]) 
ä¹‹åå°±å¯ä»¥è¾“å…¥å¯†ç ï¼Œè§£é”è´¦å·

miner.start å¼€å§‹æŒ–çŸ¿

geth --datadir ../project/MyChain/ --networkid 15 console 2>output.log
2ä»£è¡¨è¾“å‡ºï¼Œ>æ˜¯é‡å®šå‘

geth --datadir ../project/MyChain/ --networkid 15 --rpc console 2>output.log

å¯ä»¥ç”¨å¼€å‘è€…æ¨¡å¼ -dev -->

]]></content>
      <categories>
        <category>ç§‘ç ”</category>
      </categories>
  </entry>
  <entry>
    <title>ç®€å•çš„NFTé“¸é€ æ™ºèƒ½åˆçº¦</title>
    <url>/2024/04/17/%E7%AE%80%E5%8D%95%E7%9A%84NFT%E9%93%B8%E9%80%A0%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/</url>
    <content><![CDATA[<h3><span id="ä»£ç ">ä»£ç </span></h3><p>ä»¥ä¸‹å°†å±•ç¤ºä¸€ä¸ªç®€å•çš„ NFT é“¸é€ æ™ºèƒ½åˆçº¦ (å¿½ç•¥äº¤æ˜“ç›¸å…³çš„å‡½æ•°)</p>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity &gt;=0.8.0;</span><br><span class="line"></span><br><span class="line">// ERC 165 æ ‡å‡†æ¥å£</span><br><span class="line">interface IERC165 &#123;&#125;</span><br><span class="line"></span><br><span class="line">// ERC 721 æ ‡å‡†æ¥å£</span><br><span class="line">interface IERC721 is IERC165 &#123;</span><br><span class="line">    function balanceOf(address owner) external view returns (uint balance);</span><br><span class="line"></span><br><span class="line">    function ownerOfTokenId(uint tokenId) external view returns (address owner);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract ERC721 is IERC721 &#123;</span><br><span class="line">    </span><br><span class="line">    using Address for address;</span><br><span class="line"></span><br><span class="line">    // Mapping from token ID to owner address</span><br><span class="line">    mapping(uint =&gt; address) private _owners;</span><br><span class="line"></span><br><span class="line">    // Mapping owner address to token count</span><br><span class="line">    mapping(address =&gt; uint) private _balances;</span><br><span class="line"></span><br><span class="line">    // Mapping from tokenId to picture URL</span><br><span class="line">    mapping(uint256 =&gt; string) private _tokenURLs;</span><br><span class="line"></span><br><span class="line">    // Mapping from URL to token ID</span><br><span class="line">    mapping(string =&gt; uint256) private _urlToTokenId;</span><br><span class="line"></span><br><span class="line">    // Mapping from address to array of owned token IDs</span><br><span class="line">    mapping(address =&gt; uint256[]) private _ownedTokens;</span><br><span class="line"></span><br><span class="line">    // Mapping from address to array of owned URLs</span><br><span class="line">    mapping(address =&gt; string[]) private _ownedURLs;</span><br><span class="line"></span><br><span class="line">    // Mapping from URL to transaction hash</span><br><span class="line">    mapping(string =&gt; bytes32) public tokenHashes;</span><br><span class="line"></span><br><span class="line">    // Array to store all token IDs</span><br><span class="line">    uint256[] private _allTokenIds;</span><br><span class="line"></span><br><span class="line">    // Mapping from token Id to index in _allTokenIds array</span><br><span class="line">    mapping(uint256 =&gt; uint256) private _allTokenIdsIndex;</span><br><span class="line">    </span><br><span class="line">    // Event triggered when setting token URL</span><br><span class="line">    event TokenURLSet(uint256 indexed tokenId, string url);</span><br><span class="line"></span><br><span class="line">    // Private function _mint to mint NFTs by address and tokenId</span><br><span class="line">    function _mint(address to, uint tokenId) private &#123;</span><br><span class="line">        require(to != address(0), &quot;mint to zero address&quot;);</span><br><span class="line">        require(_owners[tokenId] == address(0), &quot;token already minted&quot;);</span><br><span class="line"></span><br><span class="line">        _balances[to] += 1;</span><br><span class="line">        _owners[tokenId] = to;</span><br><span class="line"></span><br><span class="line">        // Add tokenId to _allTokenIds array</span><br><span class="line">        _allTokenIds.push(tokenId);</span><br><span class="line">        _allTokenIdsIndex[tokenId] = _allTokenIds.length - 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Internal function to set token URL</span><br><span class="line">    function _setTokenURL(uint256 tokenId, string memory tokenURI) internal &#123;</span><br><span class="line">        require(_exists(tokenId), &quot;URL set of nonexistent token&quot;);</span><br><span class="line">        _tokenURLs[tokenId] = tokenURI;</span><br><span class="line">        emit TokenURLSet(tokenId, tokenURI);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Function to mint NFTs by address and picture URL</span><br><span class="line">    function mint(address to, string memory tokenURI) public &#123;</span><br><span class="line">        bytes32 hash = keccak256(abi.encodePacked(tokenURI));</span><br><span class="line">        uint256 newTokenId = uint256(hash);</span><br><span class="line"></span><br><span class="line">        _mint(to, newTokenId);</span><br><span class="line"></span><br><span class="line">        _setTokenURL(newTokenId, tokenURI);</span><br><span class="line">        _urlToTokenId[tokenURI] = newTokenId;</span><br><span class="line">        _ownedTokens[to].push(newTokenId);</span><br><span class="line">        _ownedURLs[to].push(tokenURI);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // Function to get token URL by tokenId</span><br><span class="line">    function getURLbyTokenId(uint256 tokenId) public view returns (string memory) &#123;</span><br><span class="line">        require(_exists(tokenId), &quot;URL query for nonexistent token&quot;);</span><br><span class="line">        return _tokenURLs[tokenId];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get tokenId by URL</span><br><span class="line">    function getTokenIdbyURL(string memory tokenURI) public view returns (uint256) &#123;</span><br><span class="line">        uint256 tokenId = _urlToTokenId[tokenURI];</span><br><span class="line">        require(_exists(tokenId), &quot;Token with this URL does not exist&quot;);</span><br><span class="line"></span><br><span class="line">        return tokenId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to burn NFTs</span><br><span class="line">    function burn(uint256 tokenId) external &#123;</span><br><span class="line">        address owner = ownerOfTokenId(tokenId);</span><br><span class="line">        require(msg.sender == owner, &quot;not owner of token&quot;);</span><br><span class="line"></span><br><span class="line">        _balances[owner] -= 1;</span><br><span class="line">        delete _owners[tokenId];</span><br><span class="line"></span><br><span class="line">        string memory tokenURL = _tokenURLs[tokenId];</span><br><span class="line">        delete _tokenURLs[tokenId];</span><br><span class="line">        delete _urlToTokenId[tokenURL];</span><br><span class="line"></span><br><span class="line">        uint256[] storage ownedTokens = _ownedTokens[owner];</span><br><span class="line">        for (uint256 i = 0; i &lt; ownedTokens.length; i++) &#123;</span><br><span class="line">            if (ownedTokens[i] == tokenId) &#123;</span><br><span class="line">                ownedTokens[i] = ownedTokens[ownedTokens.length - 1];</span><br><span class="line">                ownedTokens.pop();</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string[] storage ownedURLs = _ownedURLs[owner];</span><br><span class="line">        for (uint256 i = 0; i &lt; ownedURLs.length; i++) &#123;</span><br><span class="line">            if (keccak256(abi.encodePacked(ownedURLs[i])) == keccak256(abi.encodePacked(tokenURL))) &#123;</span><br><span class="line">                ownedURLs[i] = ownedURLs[ownedURLs.length - 1];</span><br><span class="line">                ownedURLs.pop();</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Remove tokenId from _allTokenIds array</span><br><span class="line">        uint256 indexToRemove = _allTokenIdsIndex[tokenId];</span><br><span class="line">        uint256 lastIndex = _allTokenIds.length - 1;</span><br><span class="line">        uint256 lastTokenId = _allTokenIds[lastIndex];</span><br><span class="line">        _allTokenIds[indexToRemove] = lastTokenId;</span><br><span class="line">        _allTokenIdsIndex[lastTokenId] = indexToRemove;</span><br><span class="line">        _allTokenIds.pop();</span><br><span class="line">        delete _allTokenIdsIndex[tokenId];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Private function to check if token exists</span><br><span class="line">    function _exists(uint256 tokenId) private view returns (bool) &#123;</span><br><span class="line">        return _owners[tokenId] != address(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get the total count of tokens owned by owner</span><br><span class="line">    function balanceOf(address owner) external view override returns (uint) &#123;</span><br><span class="line">        require(owner != address(0), &quot;owner = zero address&quot;);</span><br><span class="line">        return _balances[owner];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to determine owner by tokenId</span><br><span class="line">    function ownerOfTokenId(uint tokenId) public view override returns (address owner) &#123;</span><br><span class="line">        owner = _owners[tokenId];</span><br><span class="line">        require(owner != address(0), &quot;token doesn&#x27;t exist&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to determine owner by URL</span><br><span class="line">    function ownerOfURL(string memory tokenURI) public view returns (address) &#123;</span><br><span class="line">        uint256 token_Id = _urlToTokenId[tokenURI];</span><br><span class="line">        require(_exists(token_Id), &quot;Token with this URL does not exist&quot;);</span><br><span class="line"></span><br><span class="line">        return _owners[token_Id];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all token IDs owned by specified owner</span><br><span class="line">    function getOwnedTokenIds(address owner) public view returns (uint256[] memory) &#123;</span><br><span class="line">        require(owner != address(0), &quot;owner = zero address&quot;);</span><br><span class="line">        return _ownedTokens[owner];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all URLs owned by specified owner</span><br><span class="line">    function getOwnedURLs(address owner) public view returns (string[] memory) &#123;</span><br><span class="line">        require(owner != address(0), &quot;owner = zero address&quot;);</span><br><span class="line">        return _ownedURLs[owner];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all token IDs owned by current owner</span><br><span class="line">    function getMyTokenIds() public view returns (uint256[] memory) &#123;</span><br><span class="line">        return _ownedTokens[msg.sender];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all URLs owned by current owner</span><br><span class="line">    function getMyURLs() public view returns (string[] memory) &#123;</span><br><span class="line">        return _ownedURLs[msg.sender];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all token IDs</span><br><span class="line">    function getAllTokenIds() public view returns (uint256[] memory) &#123;</span><br><span class="line">        return _allTokenIds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get all URLs</span><br><span class="line">    function getAllURLs() public view returns (string[] memory) &#123;</span><br><span class="line">        string[] memory urls = new string[](_allTokenIds.length);</span><br><span class="line">        for (uint256 i = 0; i &lt; _allTokenIds.length; i++) &#123;</span><br><span class="line">            uint256 tokenId = _allTokenIds[i];</span><br><span class="line">            urls[i] = _tokenURLs[tokenId];</span><br><span class="line">        &#125;</span><br><span class="line">        return urls;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to set transaction hash</span><br><span class="line">    // use when the front end receive the event that the nft is minted</span><br><span class="line">    function setTransactionHash(string memory tokenURI, bytes32 txhash) public &#123;</span><br><span class="line">        tokenHashes[tokenURI] = txhash;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Function to get transaction hash</span><br><span class="line">    function getTransactionHash(string memory tokenURI) public view returns (bytes32) &#123;</span><br><span class="line">        return tokenHashes[tokenURI];</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Library to check if address is a contract address</span><br><span class="line">library Address &#123;</span><br><span class="line">    function isContract(address account) internal view returns (bool) &#123;</span><br><span class="line">        uint size;</span><br><span class="line">        assembly &#123;</span><br><span class="line">            size := extcodesize(account)</span><br><span class="line">        &#125;</span><br><span class="line">        return size &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯å¯¹ä¸€äº›æ¥å£çš„è§£é‡Š</p>
<ol>
<li>mint</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: æ‹¥æœ‰è€…åœ°å€toï¼Œæ•°æ®URL</li>
<li>å®ç°åŠŸèƒ½: é“¸é€ ä¸€ä¸ªæ–°çš„ä»£å¸ï¼Œå°†æ–°ä»£å¸åˆ†é…ç»™åœ°å€ <code>to</code>ï¼Œå¹¶ä½¿ç”¨ <code>tokenURI</code> ä½œä¸ºä»£å¸çš„å…ƒæ•°æ®</li>
</ul>
<ol start="2">
<li>burn</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: ä»£å¸tokenId</li>
<li>å®ç°åŠŸèƒ½: å…è®¸ä»£å¸çš„æ‹¥æœ‰è€…é”€æ¯ä¸€ä¸ªä»£å¸ã€‚é”€æ¯åï¼Œä»£å¸å°†ä»æ‹¥æœ‰è€…çš„ä½™é¢ä¸­ç§»é™¤ã€‚</li>
</ul>
<ol start="3">
<li>balanceOf</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: åœ°å€<code>address owner</code></li>
<li>å®ç°åŠŸèƒ½: è¿”å›æŒ‡å®šåœ°å€ <code>owner</code> æ‹¥æœ‰çš„ä»£å¸æ•°é‡ã€‚</li>
</ul>
<ol start="4">
<li>getOwnedTokenIds</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: åœ°å€<code>address owner</code></li>
<li>å®ç°åŠŸèƒ½: è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æŒ‡å®šåœ°å€ <code>owner</code> æ‹¥æœ‰çš„æ‰€æœ‰ä»£å¸çš„ <code>tokenId</code>ã€‚</li>
</ul>
<ol start="5">
<li>getOwnedURLs</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: åœ°å€<code>address owner</code></li>
<li>å®ç°åŠŸèƒ½: è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«ä¸æŒ‡å®šåœ°å€ <code>owner</code> æ‹¥æœ‰çš„ä»£å¸ç›¸å…³è”çš„æ‰€æœ‰ <code>tokenURL</code>ã€‚</li>
</ul>
<ol start="6">
<li>getTokenIdByUrl</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: å›¾ç‰‡çš„ <code>tokenURI</code></li>
<li>å®ç°åŠŸèƒ½: æ ¹æ®æä¾›çš„ <code>tokenURI</code> è¿”å›å¯¹åº”çš„ <code>tokenId</code>ã€‚å¦‚æœä¸å­˜åœ¨å…·æœ‰è¯¥ <code>tokenURI</code> çš„ä»£å¸ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<ol start="7">
<li>getURLbyTokenId</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: ä»£å¸çš„tokenId<code>uint256 tokenId</code></li>
<li>å®ç°åŠŸèƒ½: æ ¹æ®æä¾›çš„ <code>tokenId</code> è¿”å›å¯¹åº”çš„ <code>tokenURI</code>ã€‚å¦‚æœä¸å­˜åœ¨å…·æœ‰è¯¥ <code>tokenId</code> çš„ä»£å¸ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<ol start="8">
<li>OwnerOfTokenId</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: ä»£å¸çš„tokenId<code>uint tokenId</code></li>
<li>å®ç°åŠŸèƒ½: è¿”å›æ‹¥æœ‰æŒ‡å®š <code>tokenId</code> çš„ä»£å¸çš„åœ°å€ã€‚å¦‚æœä»£å¸ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<ol start="9">
<li>OwnerOfURL</li>
</ol>
<ul>
<li>æ‰€éœ€å‚æ•°: å›¾ç‰‡çš„ <code>tokenURI</code></li>
<li>å®ç°åŠŸèƒ½: æ ¹æ®æä¾›çš„ <code>tokenURI</code> è¿”å›æ‹¥æœ‰è¯¥ <code>tokenURI</code> çš„ä»£å¸çš„åœ°å€ã€‚å¦‚æœä»£å¸ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<h3><span id="abi-å’Œ-bytecode">abi å’Œ bytecode</span></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var abi = JSON.parse(&#x27;[&#123;\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[&#123;\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;,&#123;\&quot;indexed\&quot;:false,\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;url\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;TokenURLSet\&quot;,\&quot;type\&quot;:\&quot;event\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;name\&quot;:\&quot;balanceOf\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;burn\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getAllTokenIds\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getAllURLs\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getMyTokenIds\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;getMyURLs\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;name\&quot;:\&quot;getOwnedTokenIds\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;name\&quot;:\&quot;getOwnedURLs\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string[]\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string[]\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;getTokenIdbyURL\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;getTransactionHash\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;getURLbyTokenId\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;,&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;mint\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;&#125;],\&quot;name\&quot;:\&quot;ownerOfTokenId\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;ownerOfURL\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;address\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;,&#123;\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;txhash\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;&#125;],\&quot;name\&quot;:\&quot;setTransactionHash\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;,&#123;\&quot;inputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;&#125;],\&quot;name\&quot;:\&quot;tokenHashes\&quot;,\&quot;outputs\&quot;:[&#123;\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;&#125;],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;&#125;]&#x27;)</span><br><span class="line"></span><br><span class="line">var code = &quot;0x&quot; +  &quot;608060405234801561001057600080fd5b506127c1806100206000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c80636dffece4116100975780637ba0ca0d116100665780637ba0ca0d1461030d578063bdbed7221461032b578063d0def52114610349578063ffd448571461036557610100565b80636dffece41461025f5780636f8867041461028f57806370a08231146102ad578063785fc822146102dd57610100565b806342966c68116100d357806342966c68146101b35780634fac7e41146101cf5780635d46fa18146101ff57806368564b121461022f57610100565b8063105e18a81461010557806312e8ac061461013557806327030bec146101655780633fc3097414610183575b600080fd5b61011f600480360381019061011a91906117b0565b610381565b60405161012c919061192f565b60405180910390f35b61014f600480360381019061014a9190611987565b610508565b60405161015c91906119c3565b60405180910390f35b61016d6105b3565b60405161017a919061192f565b60405180910390f35b61019d60048036038101906101989190611987565b6106c9565b6040516101aa9190611a28565b60405180910390f35b6101cd60048036038101906101c89190611987565b6107b6565b005b6101e960048036038101906101e491906117b0565b610cd7565b6040516101f69190611b08565b60405180910390f35b61021960048036038101906102149190611c5f565b610ddd565b6040516102269190611cc1565b60405180910390f35b61024960048036038101906102449190611c5f565b610e05565b6040516102569190611ceb565b60405180910390f35b61027960048036038101906102749190611c5f565b610e7a565b60405161028691906119c3565b60405180910390f35b610297610f21565b6040516102a4919061192f565b60405180910390f35b6102c760048036038101906102c291906117b0565b611083565b6040516102d49190611ceb565b60405180910390f35b6102f760048036038101906102f29190611c5f565b61113a565b6040516103049190611cc1565b60405180910390f35b610315611168565b6040516103229190611b08565b60405180910390f35b6103336111fd565b6040516103409190611b08565b60405180910390f35b610363600480360381019061035e9190611d06565b611255565b005b61037f600480360381019061037a9190611d8e565b61139d565b005b6060600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036103f2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103e990611e36565b60405180910390fd5b600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b828210156104fd57838290600052602060002001805461047090611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461049c90611e85565b80156104e95780601f106104be576101008083540402835291602001916104e9565b820191906000526020600020905b8154815290600101906020018083116104cc57829003601f168201915b505050505081526020019060010190610451565b505050509050919050565b600080600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105ae576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105a590611f02565b60405180910390fd5b919050565b6060600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b828210156106c057838290600052602060002001805461063390611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461065f90611e85565b80156106ac5780601f10610681576101008083540402835291602001916106ac565b820191906000526020600020905b81548152906001019060200180831161068f57829003601f168201915b505050505081526020019060010190610614565b50505050905090565b60606106d4826113c4565b610713576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161070a90611f6e565b60405180910390fd5b60026000838152602001908152602001600020805461073190611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461075d90611e85565b80156107aa5780601f1061077f576101008083540402835291602001916107aa565b820191906000526020600020905b81548152906001019060200180831161078d57829003601f168201915b50505050509050919050565b60006107c182610508565b90508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610831576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161082890611fda565b60405180910390fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546108809190612029565b9250508190555060008083815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560006002600084815260200190815260200160002080546108dc90611e85565b80601f016020809104026020016040519081016040528092919081815260200182805461090890611e85565b80156109555780601f1061092a57610100808354040283529160200191610955565b820191906000526020600020905b81548152906001019060200180831161093857829003601f168201915b5050505050905060026000848152602001908152602001600020600061097b91906116e1565b60038160405161098b9190612099565b9081526020016040518091039020600090556000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905060005b8180549050811015610aa15784828281548110610a0357610a026120b0565b5b906000526020600020015403610a8e578160018380549050610a259190612029565b81548110610a3657610a356120b0565b5b9060005260206000200154828281548110610a5457610a536120b0565b5b906000526020600020018190555081805480610a7357610a726120df565b5b60019003818190600052602060002001600090559055610aa1565b8080610a999061210e565b9150506109e3565b506000600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905060005b8180549050811015610c015783604051602001610b059190612099565b60405160208183030381529060405280519060200120828281548110610b2e57610b2d6120b0565b5b90600052602060002001604051602001610b4891906121ee565b6040516020818303038152906040528051906020012003610bee578160018380549050610b759190612029565b81548110610b8657610b856120b0565b5b90600052602060002001828281548110610ba357610ba26120b0565b5b906000526020600020019081610bb991906123c7565b5081805480610bcb57610bca6120df565b5b600190038181906000526020600020016000610be791906116e1565b9055610c01565b8080610bf99061210e565b915050610ae8565b5060006008600087815260200190815260200160002054905060006001600780549050610c2e9190612029565b9050600060078281548110610c4657610c456120b0565b5b906000526020600020015490508060078481548110610c6857610c676120b0565b5b90600052602060002001819055508260086000838152602001908152602001600020819055506007805480610ca057610c9f6120df565b5b6001900381819060005260206000200160009055905560086000898152602001908152602001600020600090555050505050505050565b6060600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610d48576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3f90611e36565b60405180910390fd5b600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020018280548015610dd157602002820191906000526020600020905b815481526020019060010190808311610dbd575b50505050509050919050565b6000600682604051610def9190612099565b9081526020016040518091039020549050919050565b600080600383604051610e189190612099565b9081526020016040518091039020549050610e32816113c4565b610e71576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e6890612521565b60405180910390fd5b80915050919050565b600080600383604051610e8d9190612099565b9081526020016040518091039020549050610ea7816113c4565b610ee6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610edd90612521565b60405180910390fd5b60008082815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16915050919050565b6060600060078054905067ffffffffffffffff811115610f4457610f43611b34565b5b604051908082528060200260200182016040528015610f7757816020015b6060815260200190600190039081610f625790505b50905060005b60078054905081101561107b57600060078281548110610fa057610f9f6120b0565b5b90600052602060002001549050600260008281526020019081526020016000208054610fcb90611e85565b80601f0160208091040260200160405190810160405280929190818152602001828054610ff790611e85565b80156110445780601f1061101957610100808354040283529160200191611044565b820191906000526020600020905b81548152906001019060200180831161102757829003601f168201915b505050505083838151811061105c5761105b6120b0565b5b60200260200101819052505080806110739061210e565b915050610f7d565b508091505090565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036110f3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ea90611e36565b60405180910390fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6006818051602081018201805184825260208301602085012081835280955050505050506000915090505481565b6060600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054806020026020016040519081016040528092919081815260200182805480156111f357602002820191906000526020600020905b8154815260200190600101908083116111df575b5050505050905090565b6060600780548060200260200160405190810160405280929190818152602001828054801561124b57602002820191906000526020600020905b815481526020019060010190808311611237575b5050505050905090565b6000816040516020016112689190612099565b60405160208183030381529060405280519060200120905060008160001c9050611292848261142f565b61129c818461163c565b806003846040516112ad9190612099565b908152602001604051809103902081905550600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819080600181540180825580915050600190039060005260206000200160009091909190915055600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020839080600181540180825580915050600190039060005260206000200160009091909190915090816113969190612541565b5050505050565b806006836040516113ae9190612099565b9081526020016040518091039020819055505050565b60008073ffffffffffffffffffffffffffffffffffffffff1660008084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361149e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114959061265f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff1660008083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461153f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611536906126cb565b60405180910390fd5b60018060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461158e91906126eb565b925050819055508160008083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600781908060018154018082558091505060019003906000526020600020016000909190919091505560016007805490506116219190612029565b60086000838152602001908152602001600020819055505050565b611645826113c4565b611684576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161167b9061276b565b60405180910390fd5b806002600084815260200190815260200160002090816116a49190612541565b50817f9f29759901a481b6bf52ac6c03ccf75f53edec21c990efc5d3828daf7f93f13b826040516116d59190611a28565b60405180910390a25050565b5080546116ed90611e85565b6000825580601f106116ff575061171e565b601f01602090049060005260206000209081019061171d9190611721565b5b50565b5b8082111561173a576000816000905550600101611722565b5090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061177d82611752565b9050919050565b61178d81611772565b811461179857600080fd5b50565b6000813590506117aa81611784565b92915050565b6000602082840312156117c6576117c5611748565b5b60006117d48482850161179b565b91505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611843578082015181840152602081019050611828565b60008484015250505050565b6000601f19601f8301169050919050565b600061186b82611809565b6118758185611814565b9350611885818560208601611825565b61188e8161184f565b840191505092915050565b60006118a58383611860565b905092915050565b6000602082019050919050565b60006118c5826117dd565b6118cf81856117e8565b9350836020820285016118e1856117f9565b8060005b8581101561191d57848403895281516118fe8582611899565b9450611909836118ad565b925060208a019950506001810190506118e5565b50829750879550505050505092915050565b6000602082019050818103600083015261194981846118ba565b905092915050565b6000819050919050565b61196481611951565b811461196f57600080fd5b50565b6000813590506119818161195b565b92915050565b60006020828403121561199d5761199c611748565b5b60006119ab84828501611972565b91505092915050565b6119bd81611772565b82525050565b60006020820190506119d860008301846119b4565b92915050565b600082825260208201905092915050565b60006119fa82611809565b611a0481856119de565b9350611a14818560208601611825565b611a1d8161184f565b840191505092915050565b60006020820190508181036000830152611a4281846119ef565b905092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b611a7f81611951565b82525050565b6000611a918383611a76565b60208301905092915050565b6000602082019050919050565b6000611ab582611a4a565b611abf8185611a55565b9350611aca83611a66565b8060005b83811015611afb578151611ae28882611a85565b9750611aed83611a9d565b925050600181019050611ace565b5085935050505092915050565b60006020820190508181036000830152611b228184611aaa565b905092915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611b6c8261184f565b810181811067ffffffffffffffff82111715611b8b57611b8a611b34565b5b80604052505050565b6000611b9e61173e565b9050611baa8282611b63565b919050565b600067ffffffffffffffff821115611bca57611bc9611b34565b5b611bd38261184f565b9050602081019050919050565b82818337600083830152505050565b6000611c02611bfd84611baf565b611b94565b905082815260208101848484011115611c1e57611c1d611b2f565b5b611c29848285611be0565b509392505050565b600082601f830112611c4657611c45611b2a565b5b8135611c56848260208601611bef565b91505092915050565b600060208284031215611c7557611c74611748565b5b600082013567ffffffffffffffff811115611c9357611c9261174d565b5b611c9f84828501611c31565b91505092915050565b6000819050919050565b611cbb81611ca8565b82525050565b6000602082019050611cd66000830184611cb2565b92915050565b611ce581611951565b82525050565b6000602082019050611d006000830184611cdc565b92915050565b60008060408385031215611d1d57611d1c611748565b5b6000611d2b8582860161179b565b925050602083013567ffffffffffffffff811115611d4c57611d4b61174d565b5b611d5885828601611c31565b9150509250929050565b611d6b81611ca8565b8114611d7657600080fd5b50565b600081359050611d8881611d62565b92915050565b60008060408385031215611da557611da4611748565b5b600083013567ffffffffffffffff811115611dc357611dc261174d565b5b611dcf85828601611c31565b9250506020611de085828601611d79565b9150509250929050565b7f6f776e6572203d207a65726f2061646472657373000000000000000000000000600082015250565b6000611e206014836119de565b9150611e2b82611dea565b602082019050919050565b60006020820190508181036000830152611e4f81611e13565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611e9d57607f821691505b602082108103611eb057611eaf611e56565b5b50919050565b7f746f6b656e20646f65736e277420657869737400000000000000000000000000600082015250565b6000611eec6013836119de565b9150611ef782611eb6565b602082019050919050565b60006020820190508181036000830152611f1b81611edf565b9050919050565b7f55524c20717565727920666f72206e6f6e6578697374656e7420746f6b656e00600082015250565b6000611f58601f836119de565b9150611f6382611f22565b602082019050919050565b60006020820190508181036000830152611f8781611f4b565b9050919050565b7f6e6f74206f776e6572206f6620746f6b656e0000000000000000000000000000600082015250565b6000611fc46012836119de565b9150611fcf82611f8e565b602082019050919050565b60006020820190508181036000830152611ff381611fb7565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061203482611951565b915061203f83611951565b925082820390508181111561205757612056611ffa565b5b92915050565b600081905092915050565b600061207382611809565b61207d818561205d565b935061208d818560208601611825565b80840191505092915050565b60006120a58284612068565b915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b600061211982611951565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361214b5761214a611ffa565b5b600182019050919050565b60008190508160005260206000209050919050565b6000815461217881611e85565b612182818661205d565b9450600182166000811461219d57600181146121b2576121e5565b60ff19831686528115158202860193506121e5565b6121bb85612156565b60005b838110156121dd578154818901526001820191506020810190506121be565b838801955050505b50505092915050565b60006121fa828461216b565b915081905092915050565b60008154905061221481611e85565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b60006008830261227d7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612240565b6122878683612240565b95508019841693508086168417925050509392505050565b6000819050919050565b60006122c46122bf6122ba84611951565b61229f565b611951565b9050919050565b6000819050919050565b6122de836122a9565b6122f26122ea826122cb565b84845461224d565b825550505050565b600090565b6123076122fa565b6123128184846122d5565b505050565b5b818110156123365761232b6000826122ff565b600181019050612318565b5050565b601f82111561237b5761234c81612156565b61235584612230565b81016020851015612364578190505b61237861237085612230565b830182612317565b50505b505050565b600082821c905092915050565b600061239e60001984600802612380565b1980831691505092915050565b60006123b7838361238d565b9150826002028217905092915050565b8181036123d55750506124ad565b6123de82612205565b67ffffffffffffffff8111156123f7576123f6611b34565b5b6124018254611e85565b61240c82828561233a565b6000601f83116001811461243b5760008415612429578287015490505b61243385826123ab565b8655506124a6565b601f1984166124498761221b565b965061245486612156565b60005b8281101561247c57848901548255600182019150600185019450602081019050612457565b868310156124995784890154612495601f89168261238d565b8355505b6001600288020188555050505b5050505050505b565b7f546f6b656e207769746820746869732055524c20646f6573206e6f742065786960008201527f7374000000000000000000000000000000000000000000000000000000000000602082015250565b600061250b6022836119de565b9150612516826124af565b604082019050919050565b6000602082019050818103600083015261253a816124fe565b9050919050565b61254a82611809565b67ffffffffffffffff81111561256357612562611b34565b5b61256d8254611e85565b61257882828561233a565b600060209050601f8311600181146125ab5760008415612599578287015190505b6125a385826123ab565b86555061260b565b601f1984166125b986612156565b60005b828110156125e1578489015182556001820191506020850194506020810190506125bc565b868310156125fe57848901516125fa601f89168261238d565b8355505b6001600288020188555050505b505050505050565b7f6d696e7420746f207a65726f2061646472657373000000000000000000000000600082015250565b60006126496014836119de565b915061265482612613565b602082019050919050565b600060208201905081810360008301526126788161263c565b9050919050565b7f746f6b656e20616c7265616479206d696e746564000000000000000000000000600082015250565b60006126b56014836119de565b91506126c08261267f565b602082019050919050565b600060208201905081810360008301526126e4816126a8565b9050919050565b60006126f682611951565b915061270183611951565b925082820190508082111561271957612718611ffa565b5b92915050565b7f55524c20736574206f66206e6f6e6578697374656e7420746f6b656e00000000600082015250565b6000612755601c836119de565b91506127608261271f565b602082019050919050565b6000602082019050818103600083015261278481612748565b905091905056fea2646970667358221220fd0c05e9309ea22159cad7faa8357fabed9c609909ccc80bd530d94ef65ccb3d64736f6c63430008130033&quot;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç§‘ç ”</category>
      </categories>
  </entry>
  <entry>
    <title>ç»¼åˆå®è®­è°ƒç ”</title>
    <url>/2024/03/28/%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD%E8%B0%83%E7%A0%94/</url>
    <content><![CDATA[<p>ç”±äºç»¼åˆå®è·µé¡¹ç›®éœ€è¦ç”¨åˆ°Flink CDCã€Kafkaã€ElasticSearchã€Kibanaã€Dorisï¼Œä»¥ä¸‹æ˜¯å¯¹è¿™äº›æ¡†æ¶&#x2F;æŠ€æœ¯çš„è°ƒç ”</p>
<span id="more"></span>

<h2><span id="flink-cdc">Flink CDC</span></h2><p><a href="https://nightlies.apache.org/flink/flink-cdc-docs-release-3.0/zh/docs/get-started/introduction/">Flink CDC</a> æ˜¯ä¸€ä¸ªåŸºäºæµçš„æ•°æ®é›†æˆå·¥å…·ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¸€å¥—åŠŸèƒ½æ›´åŠ å…¨é¢çš„ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ã€‚</p>
<h3><span id="äº‹ä»¶">äº‹ä»¶</span></h3><p>äº‹ä»¶åˆ†ä¸ºDataChangeEventã€SchemaChangeEventã€Flow of Events</p>
<h4><span id="datachangeevent">DataChangeEvent</span></h4><p><em>DataChangeEvent</em> æè¿°äº†æºä¸­çš„æ•°æ®å˜æ›´ã€‚å®ƒç”± 5 ä¸ªå­—æ®µç»„æˆï¼š</p>
<ul>
<li>Table IDï¼šäº‹ä»¶æ‰€å±çš„è¡¨ ID</li>
<li>Beforeï¼šæ•°æ®çš„å‰ç½®å›¾åƒ</li>
<li>Afterï¼šæ•°æ®çš„åç½®å›¾åƒ</li>
<li>Operation typeï¼šå˜æ›´æ“ä½œçš„ç±»å‹</li>
<li>Metaï¼šå˜æ›´çš„å…ƒæ•°æ®</li>
</ul>
<p>æ“ä½œç±»å‹å­—æ®µé¢„å®šä¹‰äº† 4 ç§æ“ä½œç±»å‹ï¼š</p>
<ul>
<li>æ’å…¥ï¼ˆInsertï¼‰ï¼šæ–°æ•°æ®æ¡ç›®ï¼Œbefore &#x3D; nullï¼Œafter &#x3D; æ–°æ•°æ®</li>
<li>åˆ é™¤ï¼ˆDeleteï¼‰ï¼šæ•°æ®åˆ é™¤ï¼Œbefore &#x3D; è¢«åˆ é™¤çš„æ•°æ®ï¼Œafter &#x3D; null</li>
<li>æ›´æ–°ï¼ˆUpdateï¼‰ï¼šå·²å­˜åœ¨æ•°æ®çš„æ›´æ–°ï¼Œbefore &#x3D; å˜æ›´å‰çš„æ•°æ®ï¼Œafter &#x3D; å˜æ›´åçš„æ•°æ®</li>
<li>æ›¿æ¢ï¼ˆReplaceï¼‰</li>
</ul>
<h4><span id="schemachangeevent">SchemaChangeEvent</span></h4><p><em>SchemaChangeEvent</em> æè¿°äº†å¤–éƒ¨ç³»ç»Ÿä¸­è¡¨ç»“æ„çš„æ›´æ”¹</p>
<ul>
<li>AddColumnEventï¼šè¡¨ä¸­çš„æ–°åˆ—</li>
<li>AlterColumnTypeEventï¼šåˆ—ç±»å‹çš„æ›´æ”¹</li>
<li>CreateTableEventï¼šåˆ›å»ºæ–°è¡¨ã€‚ä¹Ÿç”¨äºæè¿°é¢„å‘å‡ºçš„ DataChangeEvent çš„æ¨¡å¼</li>
<li>DropColumnEventï¼šåˆ é™¤åˆ—</li>
<li>RenameColumnEventï¼šåˆ—åæ›´æ”¹</li>
</ul>
<h4><span id="äº‹ä»¶æµ">äº‹ä»¶æµ</span></h4><p>å¦‚æœä¸€ä¸ªè¡¨å¯¹æ¡†æ¶æ˜¯æ–°çš„ï¼Œåˆ™åœ¨ä»»ä½• DataChangeEvent ä¹‹å‰å¿…é¡»å‘å‡º CreateTableEventï¼›å¦‚æœè¡¨çš„ schema å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å¿…é¡»åœ¨ä»»ä½• DataChangeEvent ä¹‹å‰å‘å‡º SchemaChangeEventã€‚</p>
<img data-src="/2024/03/28/%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD%E8%B0%83%E7%A0%94/flow-of-events.png" class title="äº‹ä»¶æµå›¾">

<h3><span id="å¦‚ä½•ä½¿ç”¨-flink-cdc">å¦‚ä½•ä½¿ç”¨ Flink CDC</span></h3><p><a href="https://nightlies.apache.org/flink/flink-cdc-docs-release-3.0/zh/docs/get-started/quickstart/mysql-to-doris/">MySQL åŒæ­¥åˆ° Doris</a><br>Flink CDC æä¾›äº†åŸºäº YAML æ ¼å¼çš„ç”¨æˆ· APIï¼Œæ›´é€‚åˆäºæ•°æ®é›†æˆåœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ª YAML æ–‡ä»¶çš„ç¤ºä¾‹ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ•°æ®ç®¡é“(Pipeline)ï¼Œè¯¥Pipelineä» MySQL æ•è·å®æ—¶å˜æ›´ï¼Œå¹¶å°†å®ƒä»¬åŒæ­¥åˆ° Apache Dorisï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source:</span><br><span class="line">  type: mysql</span><br><span class="line">  hostname: localhost</span><br><span class="line">  port: 3306</span><br><span class="line">  username: root</span><br><span class="line">  password: 123456</span><br><span class="line">  tables: app_db.\.*</span><br><span class="line">  server-id: 5400-5404</span><br><span class="line">  server-time-zone: UTC</span><br><span class="line"></span><br><span class="line">sink:</span><br><span class="line">  type: doris</span><br><span class="line">  fenodes: 127.0.0.1:8030</span><br><span class="line">  username: root</span><br><span class="line">  password: &quot;&quot;</span><br><span class="line">  table.create.properties.light_schema_change: true</span><br><span class="line">  table.create.properties.replication_num: 1</span><br><span class="line"></span><br><span class="line">pipeline:</span><br><span class="line">  name: Sync MySQL Database to Doris</span><br><span class="line">  parallelism: 2</span><br></pre></td></tr></table></figure>
<p>æºæ•°æ®åº“ï¼ˆsourceï¼‰æ˜¯ MySQLï¼Œè¿æ¥ä¿¡æ¯åŒ…æ‹¬ä¸»æœºåï¼ˆlocalhostï¼‰ã€ç«¯å£ï¼ˆ3306ï¼‰ã€ç”¨æˆ·åï¼ˆrootï¼‰ã€å¯†ç ï¼ˆ123456ï¼‰ã€è¡¨ï¼ˆapp_dbä¸‹çš„æ‰€æœ‰è¡¨ï¼‰ã€æœåŠ¡å™¨IDï¼ˆ5400-5404ï¼‰å’ŒæœåŠ¡å™¨æ—¶åŒºï¼ˆUTCï¼‰ã€‚<br>ç›®æ ‡æ•°æ®åº“ï¼ˆsinkï¼‰æ˜¯ Dorisï¼Œè¿æ¥ä¿¡æ¯åŒ…æ‹¬FEèŠ‚ç‚¹ï¼ˆ127.0.0.1:8030ï¼‰ã€ç”¨æˆ·åï¼ˆrootï¼‰ã€å¯†ç ï¼ˆç©ºå­—ç¬¦ä¸²ï¼Œå³æ²¡æœ‰å¯†ç ï¼‰ã€è¡¨åˆ›å»ºå±æ€§ï¼ˆåŒ…æ‹¬è½»é‡æ¨¡å¼å˜æ›´å’Œå¤åˆ¶æ•°ç­‰è®¾ç½®ï¼‰ã€‚<br>Pipeline éƒ¨åˆ†å®šä¹‰äº†æ•°æ®åŒæ­¥ä»»åŠ¡çš„åç§°ï¼ˆSync MySQL Database to Dorisï¼‰å’Œå¹¶è¡Œåº¦ï¼ˆ2ï¼‰ã€‚</p>
<h2><span id="kafka">Kafka</span></h2><p>Kafka æ˜¯ç”± Linkedin å…¬å¸å¼€å‘çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œæ”¯æŒå¤šåˆ†åŒºã€å¤šå‰¯æœ¬ï¼ŒåŸºäº Zookeeper çš„åˆ†å¸ƒå¼æ¶ˆæ¯æµå¹³å°ï¼Œå®ƒåŒæ—¶ä¹Ÿæ˜¯ä¸€æ¬¾å¼€æºçš„åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼çš„æ¶ˆæ¯å¼•æ“ç³»ç»Ÿã€‚</p>
<h3><span id="ä¸»è¦æœ¯è¯­">ä¸»è¦æœ¯è¯­</span></h3><p>ä»¥ä¸‹æ–‡æ®µæ‘˜å½•äº <a href="https://kafka.apache.org/intro">kafka</a> å®˜æ–¹ã€‚</p>
<p>An <em>event</em> records the fact that â€œsomething happenedâ€ in the world or in your business. It is also called record or message in the documentation. When you read or write data to Kafka, you do this in the form of events. Conceptually, an event has a <em>key</em>, <em>value</em>, <em>timestamp</em>, and <em>optional metadata headers</em>.<br>An exampleï¼š</p>
<ul>
<li>keyï¼šâ€œAliceâ€</li>
<li>valueï¼šâ€œå‘ Bob æ”¯ä»˜äº† 200 ç¾å…ƒâ€</li>
<li>timestampï¼šâ€œ2020 å¹´ 6 æœˆ 25 æ—¥ä¸‹åˆ 2ï¼š06â€ã€‚</li>
</ul>
<p><em>Producers</em> are those client applications that publish (write) events to Kafka, and <em>consumers</em> are those that subscribe to (read and process) these events. </p>
<img data-src="/2024/03/28/%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD%E8%B0%83%E7%A0%94/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85.png" class title="ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼">

<p>Events are organized and durably stored in <em>topics</em>. A topic is similar to a folder in a filesystem, and the events are the files in that folder. Topics in Kafka are always <strong>multi-producer and multi-subscriber</strong>.</p>
<p>Topics are partitioned, meaning a topic is spread over a number of â€œbucketsâ€ located on different Kafka brokers. </p>
<p>Kafka ä¿è¯å…·æœ‰ç›¸åŒ Key çš„äº‹ä»¶å†™å…¥è¢«åŒä¸€åˆ†åŒºï¼Œè¯»å–æ—¶æŒ‰å†™å…¥é¡ºåºè¯»ã€‚ä½†æ˜¯ Kafka <strong>ä¸ä¿è¯</strong>ä¸åŒ Partition è·å–çš„ä¿¡æ¯æ˜¯æœ‰åºçš„ï¼Œåªä¿è¯åŒ Partition å†…æ¶ˆæ¯æœ‰åºã€‚</p>
<img data-src="/2024/03/28/%E7%BB%BC%E5%90%88%E5%AE%9E%E8%AE%AD%E8%B0%83%E7%A0%94/Kafka.png" class title="åˆ†åŒºç¤ºæ„å›¾">

<h3><span id="å¿«é€Ÿå…¥é—¨-kafka">å¿«é€Ÿå…¥é—¨ Kafka</span></h3><p><a href="https://kafka.apache.org/quickstart">å¿«é€Ÿå…¥é—¨</a></p>
<h3><span id="kafka-å’Œ-rabbitmq-çš„åŒºåˆ«">Kafka å’Œ RabbitMQ çš„åŒºåˆ«</span></h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>RabbitMQ</th>
<th>Kafka</th>
</tr>
</thead>
<tbody><tr>
<td>æ¶æ„</td>
<td>RabbitMQ çš„æ¶æ„ä¸“ä¸ºå¤æ‚çš„æ¶ˆæ¯è·¯ç”±è€Œè®¾è®¡ã€‚è¯¥ä»£ç†ä½¿ç”¨æ¨é€æ¨¡å‹ã€‚ç”Ÿäº§è€…ä½¿ç”¨ä¸åŒçš„è§„åˆ™å‘ä½¿ç”¨è€…å‘é€æ¶ˆæ¯ã€‚</td>
<td>Kafka ä½¿ç”¨åŸºäºåˆ†åŒºçš„è®¾è®¡è¿›è¡Œå®æ—¶ã€é«˜ååé‡çš„æµå¤„ç†ã€‚è¯¥ä»£ç†ä½¿ç”¨æ‹‰å–æ¨¡å‹ã€‚ç”Ÿäº§è€…å‘ä½¿ç”¨è€…è®¢é˜…çš„ä¸»é¢˜å’Œåˆ†åŒºå‘å¸ƒæ¶ˆæ¯ã€‚</td>
</tr>
<tr>
<td>æ¶ˆæ¯å¤„ç†</td>
<td>RabbitMQ ä»£ç†ç›‘æ§æ¶ˆæ¯ä½¿ç”¨ã€‚æ­¤ä»£ç†ä¼šåœ¨æ¶ˆæ¯è¢«ä½¿ç”¨åå°†å…¶åˆ é™¤ã€‚å®ƒæ”¯æŒæ¶ˆæ¯ä¼˜å…ˆçº§ã€‚</td>
<td>ä½¿ç”¨è€…ä½¿ç”¨åç§»è·Ÿè¸ªå™¨è·Ÿè¸ªæ¶ˆæ¯æ£€ç´¢æƒ…å†µã€‚Kafka æ ¹æ®ä¿ç•™ç­–ç•¥ä¿ç•™æ¶ˆæ¯ã€‚å…¶ä¸­æ²¡æœ‰æ¶ˆæ¯ä¼˜å…ˆçº§ã€‚</td>
</tr>
<tr>
<td>æ€§èƒ½</td>
<td>RabbitMQ æä¾›ä½å»¶è¿Ÿã€‚å®ƒæ¯ç§’å‘é€æ•°åƒæ¡æ¶ˆæ¯ã€‚</td>
<td>Kafka æ¯ç§’å¯å®æ—¶ä¼ è¾“å¤šè¾¾æ•°ç™¾ä¸‡æ¡æ¶ˆæ¯ã€‚</td>
</tr>
<tr>
<td>ç¼–ç¨‹è¯­è¨€</td>
<td>RabbitMQ æ”¯æŒå¤šç§è¯­è¨€å’Œæ—§å¼åè®®ã€‚</td>
<td>Kafka çš„ç¼–ç¨‹è¯­è¨€é€‰æ‹©æœ‰é™ã€‚è¯¥ä»£ç†åœ¨ TCP ä¸Šä½¿ç”¨äºŒè¿›åˆ¶åè®®è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</td>
</tr>
</tbody></table>
<h2><span id="elasticsearch">ElasticSearch</span></h2><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/documents-indices.html">Elasticsearch</a> is a distributed document store. Instead of storing information as rows of columnar data, Elasticsearch stores complex data structures that have been serialized as JSON documents.</p>
<p>Elasticsearch REST API æ”¯æŒç»“æ„åŒ–æŸ¥è¯¢ã€å…¨æ–‡æŸ¥è¯¢å’Œå°†ä¸¤è€…ç»“åˆåœ¨ä¸€èµ·çš„æŸ¥è¯¢çš„å¤æ‚æŸ¥è¯¢ </p>
<p>å’Œæ™®é€šçš„æ•°æ®åº“æ¨¡ç³Šæœç´¢ä¸åŒï¼Œ<em>Elasticsearch</em> çš„æ¨¡ç³Šæœç´¢æ˜¯èƒ½ä½¿ç”¨ä¸Šç´¢å¼•çš„ï¼Œæ‰€ä»¥åœ¨å¤§æ•°æ®åœºæ™¯ä¸‹æœç´¢é€Ÿåº¦å¿«ï¼›è€Œä¸”ï¼Œ<em>Elasticsearch</em> çš„æ¨¡ç³Šæœç´¢æ”¯æŒæ’åºï¼Œåªè¿”å›æ’åé«˜çš„è®°å½•ï¼›å¦å¤–ï¼Œ<em>Elasticsearch</em> çš„æ¨¡ç³Šæœç´¢åœ¨é‡åˆ°ä¸å¤ªå‡†ç¡®çš„å…³é”®å­—æ—¶ä¹Ÿèƒ½æœå‡ºç›¸å…³ç»“æœã€‚</p>
<h2><span id="kibana">Kibana</span></h2><p><a href="https://www.elastic.co/guide/en/kibana/current/introduction.html">Kibana</a> enables you to give shape to your data and navigate the Elastic Stack</p>
<h3><span id="kibana-å’Œ-elasticsearch-å…³ç³»">Kibana å’Œ ElasticSearch å…³ç³»</span></h3><p>Kibana è¿è¡Œåœ¨ Elasticsearch ä¹‹ä¸Šï¼Œä¸»è¦ç”¨äºåˆ†ææ—¥å¿—æ¶ˆæ¯ã€‚</p>
]]></content>
      <categories>
        <category>å­¦ä¹ </category>
        <category>ç»¼åˆå®è®­</category>
      </categories>
  </entry>
  <entry>
    <title>Kibana_on_ES é…ç½®æ•™ç¨‹</title>
    <url>/2024/05/10/Kibana-on-ES/</url>
    <content><![CDATA[<h2><span id="é…ç½®è¿‡ç¨‹">é…ç½®è¿‡ç¨‹</span></h2><p>å®éªŒç¯å¢ƒ: Kibana ç‰ˆæœ¬8.7.1, Elasticsearch ç‰ˆæœ¬8.7.1ï¼Œåœ¨ wsl2-ubuntu22.0.4 ä¸Šéƒ¨ç½²</p>
<p>ä½œè€…åœ¨å¯åŠ¨ Kibana çš„æ—¶å€™ï¼Œé‡åˆ°äº†æ‰¾ä¸åˆ° nodejs çš„æŠ¥é”™ï¼Œæœ€åå‘ç°æ˜¯ kibana-x.x.x&#x2F;node æ–‡ä»¶æƒé™çš„é—®é¢˜ï¼Œåªéœ€è¦ç”¨ chmod 755 kibana-x.x.x&#x2F;node å³å¯</p>
<span id="more"></span>

<h3><span id="es-å•èŠ‚ç‚¹é…ç½®">ES å•èŠ‚ç‚¹é…ç½®</span></h3><p>ä¿®æ”¹ config&#x2F;elasticsearch.yml æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œipåœ°å€è¾“å…¥æœ¬æœºwslåœ°å€ï¼Œå¯ä»¥é€šè¿‡ hostname -I å‘½ä»¤æ´»åŠ¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cluster.name: es-8.7.1</span><br><span class="line">node.name: es-9201</span><br><span class="line">path.data: ~\elastic\data\9201</span><br><span class="line">path.logs: ~\elastic\logs\9201</span><br><span class="line">network.host: 172.21.168.87</span><br><span class="line">http.port: 9201</span><br><span class="line">transport.port: 9301</span><br></pre></td></tr></table></figure>
<img data-src="/2024/05/10/Kibana-on-ES/1.png" class>

<p>åœ¨ kibana-8.7.1&#x2F; æ–°å»º data å’Œ logs æ–‡ä»¶å¤¹</p>
<p>è¿è¡Œå¯åŠ¨å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./elastic/elasticsearch-8.7.1/bin/elasticsearch</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨åä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè´¦å·çš„å¯†ç å’Œç”¨äº kibana çš„ enrollment tokenï¼Œå…ˆä¿å­˜ä¸‹æ¥ï¼Œå¾…ä¼šæœ‰ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-------------------------------------------------------------------------------------------------------------------------&gt; Elasticsearch security features have been automatically configured!</span><br><span class="line">-&gt; Authentication is enabled and cluster connections are encrypted.</span><br><span class="line"></span><br><span class="line">-&gt;  Password for the elastic user (reset with `bin/elasticsearch-reset-password -u elastic`):</span><br><span class="line">  rlF=_=7wFIrdNj6Zh9Z2</span><br><span class="line"></span><br><span class="line">-&gt;  HTTP CA certificate SHA-256 fingerprint:</span><br><span class="line">  a15c8cfcb300affed0dbdf73c318339366b8d8ba076657056e6b85170669d0d6</span><br><span class="line"></span><br><span class="line">-&gt;  Configure Kibana to use this cluster:</span><br><span class="line">* Run Kibana and click the configuration link in the terminal when Kibana starts.</span><br><span class="line">* Copy the following enrollment token and paste it into Kibana in your browser (valid for the next 30 minutes):</span><br><span class="line">  eyJ2ZXIiOiI4LjQuMiIsImFkciI6WyIxMjcuMC4wLjE6OTIwMSJdLCJmZ3IiOiJhMTVjOGNmY2IzMDBhZmZlZDBkYmRmNzNjMzE4MzM5MzY2YjhkOGJhMDc2NjU3MDU2ZTZiODUxNzA2NjlkMGQ2Iiwia2V5IjoienFtTmJZTUJfdzhtUUpvajh2TEI6WDlkMVlwenNTcENqWGV4bER4UE5QdyJ9</span><br><span class="line"></span><br><span class="line">-&gt;  Configure other nodes to join this cluster:</span><br><span class="line">* On this node:</span><br><span class="line">  - Create an enrollment token with `bin/elasticsearch-create-enrollment-token -s node`.</span><br><span class="line">  - Uncomment the transport.host setting at the end of config/elasticsearch.yml.</span><br><span class="line">  - Restart Elasticsearch.</span><br><span class="line">* On other nodes:</span><br><span class="line">  - Start Elasticsearch with `bin/elasticsearch --enrollment-token &lt;token&gt;`, using the enrollment token that you generated.</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰ä¿å­˜ä¸‹æ¥ã€tokenè¿‡æœŸï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨é‡ç½®</p>
<p>æŠŠ ES å¯åŠ¨åï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤é‡ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># é‡ç½®å¯†ç </span><br><span class="line">./elastic/elasticsearch-8.7.1/bin/elasticsearch-reset-password -u elastic</span><br><span class="line"># é‡ç½® token</span><br><span class="line">./elastic/elasticsearch-8.7.1/bin/elasticsearch-create-enrollment-token -s kibana --url &quot;https://172.21.168.87:9201&quot;</span><br></pre></td></tr></table></figure>

<img data-src="/2024/05/10/Kibana-on-ES/2.png" class>

<img data-src="/2024/05/10/Kibana-on-ES/3.png" class>

<p>é…ç½®å¥½ESï¼Œå°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®äº†(è®°å¾—è¦åŠ https)</p>
<img data-src="/2024/05/10/Kibana-on-ES/4.png" class>

<h3><span id="kibana-é…ç½®">Kibana é…ç½®</span></h3><p>é‡å¼€ä¸€ä¸ª wsl çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd ~</span><br><span class="line">./kibana-8.7.1/bin/kibana</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å‘½ä»¤è¡Œç»™å‡ºçš„ipå’Œç«¯å£è®¿é—® kibana</p>
<img data-src="/2024/05/10/Kibana-on-ES/5.png" class>

<p>è¾“å…¥åˆšåˆšå¤åˆ¶ä¸‹æ¥çš„è´¦å·å¯†ç ï¼Œå°±å¯ä»¥æˆåŠŸè¿æ¥ä¸Š kibana</p>
<img data-src="/2024/05/10/Kibana-on-ES/6.png" class>]]></content>
      <categories>
        <category>å­¦ä¹ </category>
        <category>ç»¼åˆå®è®­</category>
      </categories>
  </entry>
  <entry>
    <title>ä¸€æ¡å‘½ä»¤æˆåŠŸæ­å»ºä»¥å¤ªåŠç§é“¾</title>
    <url>/2024/05/11/%E4%B8%80%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%88%90%E5%8A%9F%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/</url>
    <content><![CDATA[<h2><span id="æœ¬æ–‡äº®ç‚¹">æœ¬æ–‡äº®ç‚¹</span></h2><p>ä½œè€…è®¤ä¸ºï¼Œæœ¬æ•™ç¨‹æ˜¯ç›®å‰ç½‘ç»œä¸Šæœ€æ–°ä¸”æœ€ç®€å•çš„ï¼Œâ€œä¸€æ¡å‘½ä»¤â€æŒ‡çš„å¹¶ä¸æ˜¯çœŸçš„åªéœ€ä¸€æ¡å‘½ä»¤ï¼Œä½†æ˜¯æ ¸å¿ƒå‘½ä»¤åªæœ‰ä¸€æ¡</p>
<ul>
<li>æœ€æ–°ï¼šç½‘ä¸Šçš„æ•™ç¨‹åŸºæœ¬æ˜¯ä¸€å¹´å‰ç”šè‡³å‡ å¹´å‰å†™çš„ï¼ŒæŸäº›å‚æ•°å’Œæ§åˆ¶å°å‘½ä»¤å·²ç»ä¸èƒ½ä½¿ç”¨</li>
<li>æœ€ç®€å•ï¼šç›¸è¾ƒäºä½œè€…ä¹‹å‰å†™çš„æ•™ç¨‹å’Œç½‘ä¸Šçš„æ•™ç¨‹ï¼Œçœå»äº†ä¸ geth console äº¤äº’çš„æ­¥éª¤</li>
</ul>
<p>æœ¬æ–‡çš„å‘½ä»¤ä»¥ Windows ç³»ç»Ÿä¸ºå‡†</p>
<span id="more"></span>

<h2><span id="é…ç½®ç§é“¾">é…ç½®ç§é“¾</span></h2><p>è¿™ä¸€æ­¥å¯ä»¥å‚è€ƒä½œè€…ä»¥å‰çš„æ•™ç¨‹ï¼š<a href="/2024/03/26/%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/" title="æ­å»ºä»¥å¤ªåŠç§é“¾">æ­å»ºä»¥å¤ªåŠç§é“¾</a>ï¼Œåˆ°æ­å»ºç§é“¾å‰çš„éƒ¨åˆ†</p>
<h2><span id="æ­å»ºç§é“¾">æ­å»ºç§é“¾</span></h2><h3><span id="åˆ›é€ é…ç½®æ–‡ä»¶">åˆ›é€ é…ç½®æ–‡ä»¶</span></h3><p>åœ¨ä¸åŒäºä»¥å¤ªåŠæºç çš„æ–‡ä»¶è·¯å¾„ä¸‹åˆ›ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œ.jsonæ–‡ä»¶ï¼Œå‘½åä¸ºgenesis.json</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir ./project</span><br><span class="line">mkdir ./project/node1</span><br><span class="line"># åœ¨./project/node1/ ä¸‹åˆ›å»ºgenesis.json</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ª json æ–‡ä»¶ä¸‹ï¼Œé…ç½®è¿™ä¸ªç§é“¾çš„å‚æ•°ï¼Œæ³¨æ„è¿™é‡Œçš„ â€œallocâ€ å­—æ®µä¸‹çš„åœ°å€ï¼Œæ˜¯éœ€è¦å¡«å…¥ geth account new æ–°å»ºçš„ç”¨æˆ·<br>è¿™é‡Œä½¿ç”¨çš„å…±è¯†æœºåˆ¶æ˜¯ <a href="https://geth.ethereum.org/docs/tools/clef/clique-signing">Clique</a>ï¼Œ</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;chainId&quot;</span><span class="punctuation">:</span> <span class="number">12345</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;homesteadBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eip150Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eip155Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eip158Block&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;byzantiumBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;constantinopleBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;petersburgBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;istanbulBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;berlinBlock&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clique&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;period&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;epoch&quot;</span><span class="punctuation">:</span> <span class="number">30000</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;difficulty&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;gasLimit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extradata&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000890fb1799fe7fa4b8e01ccf343e088d946fcd5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;alloc&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;890fb1799fe7fa4b8e01ccf343e088d946fcd556&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300000&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;14c6ead33b265da463eef7367798ade6aa8e9d12&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;400000&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3><span id="åˆå§‹åŒ–é“¾">åˆå§‹åŒ–é“¾</span></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir node1 init node1/genesis.json</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸåä¼šå‡ºç°ä»¥ä¸‹æç¤º (å¯èƒ½ä¼šæœ‰ Error ä¿¡æ¯ï¼Œå¯ä»¥å¿½ç•¥)</p>


<p>å‡å¦‚å‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œå¯ä»¥åˆ é™¤ .&#x2F;project&#x2F;MyChain&#x2F; ç›®å½•ä¸‹æ–°ç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåªä¿ç•™ .json æ–‡ä»¶</p>


<h3><span id="åˆ›å»ºç”¨æˆ·">åˆ›å»ºç”¨æˆ·</span></h3><p>è¿™é‡Œè¦ç”¨ geth account new åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œç”¨æˆ·çš„ä¿¡æ¯ä¼šå­˜åœ¨ &#x2F;project&#x2F;node1&#x2F;keystore ä¸‹<br>æ­¤å¤„éœ€è¦è¾“å…¥å¯†ç åˆ›å»ºç”¨æˆ·ï¼Œè¦è®°å¾—è¿™é‡Œçš„å¯†ç ï¼Œå¾…ä¼šæœ‰ç”¨</p>
<h3><span id="å¯ç”¨é“¾">å¯ç”¨é“¾</span></h3><p>æ­¤å¤„å¯ç”¨ç§é“¾ï¼Œå¹¶ä¸”å¼€å¯RPCæ¥å£<br>æ­¤å¤„å°±æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œä¹Ÿå°±æ˜¯é¢˜ç›®ä¸­æ‰€è¯´çš„â€œä¸€æ¡å‘½ä»¤â€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">geth --datadir node1 --http --http.addr 0.0.0.0 --http.port 8545 --http.corsdomain &quot;*&quot; --networkid 12345 --mine --miner.etherbase &quot;0x890fb1799fe7fa4b8e01ccf343e088d946fcd556&quot; --allow-insecure-unlock --unlock &quot;0x890fb1799fe7fa4b8e01ccf343e088d946fcd556&quot; --password password.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>httpï¼šå¼€å¯ RPC æ¥å£</li>
<li>http.portï¼šæŒ‡å®šç«¯å£ï¼Œé»˜è®¤8545</li>
<li>http.addr ï¼šHTTP-RPC ç›‘å¬çš„ipåœ°å€ï¼Œé»˜è®¤localhost</li>
<li>http.corsdomainï¼šè·¨åŸŸè¯·æ±‚ï¼Œâ€*â€ä¸ºå…è®¸æ‰€æœ‰æ¥æºçš„è·¨åŸŸè¯·æ±‚</li>
<li>networkidï¼šæŒ‡å®šé“¾çš„idï¼Œä»¥å¤ªåŠä¸»é“¾idä¸º1</li>
<li>mineï¼šå¯ç”¨æŒ–çŸ¿ï¼Œåªæœ‰å¯ç”¨äº†æ‰èƒ½æ‰“åŒ…äº¤æ˜“æˆåŒºå—</li>
<li>miner.etherbaseï¼šéœ€è¦æ˜¾å¼æŒ‡å®šcoinbaseï¼Œè¿™é‡Œé€‰åˆšåˆšåˆ›å»ºçš„è´¦æˆ·</li>
<li>allow-insecure-unlockï¼šè¿™æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªå‚æ•°ï¼Œæ²¡æœ‰è¿™ä¸ªå‚æ•° unlock å’Œ http ä¸èƒ½å…±å­˜</li>
<li>unlockï¼šéäº¤äº’å¼è§£é”è´¦æˆ·ï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„è´¦æˆ·</li>
<li>passwordï¼šåœ¨ &#x2F;project ä¸‹æ–°å»º password.txtï¼ŒæŠŠåˆšåˆšçš„å¯†ç æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°å°±å¯ä»¥è¢«è¯»å–åˆ°ï¼Œè€Œä¸ç”¨äº¤äº’å¼è¾“å…¥</li>
</ul>
<p>å¦‚æœéœ€è¦åˆ›å»ºå¤šèŠ‚ç‚¹ï¼Œæœ‰ä¸€äº›å‚æ•°æ˜¯éœ€è¦æ˜¾å¼æŒ‡å®šçš„ï¼Œä¸åŒèŠ‚ç‚¹è¿™äº›å‚æ•°ä¹Ÿè¦ä¸åŒï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<ul>
<li>portï¼šæŒ‡å®šé“¾è¿™ä¸ªç¨‹åºå ç”¨çš„ç«¯å£ï¼Œé»˜è®¤30303</li>
<li>authrpc.portï¼šauthenticated APIsçš„ç«¯å£ï¼Œé»˜è®¤8551</li>
<li>ipcpathï¼šé»˜è®¤ \.\pipe\geth.ipc</li>
</ul>
<p>å¯ç”¨æˆåŠŸåï¼Œå¯ä»¥å‘ç°é“¾å·²ç»åœ¨æŒ–çŸ¿äº†ï¼Œæ­¤æ—¶æäº¤äº¤æ˜“å¯ä»¥è¢«é¡ºåˆ©æ‰§è¡Œï¼›è€Œä¸” http æœåŠ¡ä¹ŸæˆåŠŸè¢«å¼€å¯</p>
<img data-src="/2024/05/11/%E4%B8%80%E6%9D%A1%E5%91%BD%E4%BB%A4%E6%88%90%E5%8A%9F%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%A7%81%E9%93%BE/success.png" class>

]]></content>
      <categories>
        <category>ç§‘ç ”</category>
      </categories>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜è€ƒç ”é¢˜â€”â€”è®¡ç½‘(æŒç»­æ›´æ–°)</title>
    <url>/2024/05/12/%E8%AE%A1%E7%BD%91/</url>
    <content><![CDATA[<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/1-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/1-2.jpg" class>

<span id="more"></span>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/2-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/2-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/3-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/3-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/4-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/4-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/5-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/5-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/6-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/6-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/7-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/7-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/8-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/8-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/9-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/9-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/10-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/10-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/11-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/11-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/12-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/12-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/13-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/13-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/14-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/14-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/15-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/12/%E8%AE%A1%E7%BD%91/15-2.jpg" class>]]></content>
      <categories>
        <category>æ¯æ—¥ä¸€é¢˜è€ƒç ”é¢˜</category>
        <category>è®¡ç½‘</category>
      </categories>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜è€ƒç ”é¢˜â€”â€”é«˜æ•°(æŒç»­æ›´æ–°)</title>
    <url>/2024/05/14/%E9%AB%98%E6%95%B0/</url>
    <content><![CDATA[<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/1-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/1-2.jpg" class>

<span id="more"></span>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/2-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/2-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/3-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/3-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/4-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/4-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/5-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/5-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/6-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/6-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/7-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/7-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/8-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/8-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/9-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/9-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/10-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/10-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/11-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/11-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/12-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/12-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/13-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/13-2.jpg" class>

<h2><span id></span></h2><h3><span id="é¢˜ç›®">é¢˜ç›®</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/14-1.jpg" class>

<h3><span id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</span></h3><img data-src="/2024/05/14/%E9%AB%98%E6%95%B0/14-2.jpg" class>
]]></content>
      <categories>
        <category>æ¯æ—¥ä¸€é¢˜è€ƒç ”é¢˜</category>
        <category>é«˜æ•°</category>
      </categories>
  </entry>
</search>
